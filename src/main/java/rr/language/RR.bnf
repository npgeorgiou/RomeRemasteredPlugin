{
  parserClass="rr.language.parser.RRParser"

  extends="com.intellij.extapi.psi.ASTWrapperPsiElement"

  psiClassPrefix="RR"
  psiImplClassSuffix="Impl"
  psiPackage="rr.language.psi"
  psiImplPackage="rr.language.psi.impl"
  psiImplUtilClass="rr.language.psi.impl.RRPsiImplUtil"
  elementTypeHolderClass="rr.language.psi.RRTypes"
  elementTypeClass="rr.language.psi.RRElementType"
  tokenTypeClass="rr.language.psi.RRTokenType"

  tokens = [
      // basic
      DESCR_STRAT_MARKER='regexp:;descr_strat.txt.*'
      DESCR_CULTURES_MARKER='regexp:;descr_cultures.txt.*'
      FERAL_DESCR_AI_PERSONALITY_MARKER='regexp:;feral_descr_ai_personality.txt.*'
      DESCR_FACTION_GROUPS_MARKER='regexp:;descr_faction_groups.txt.*'
      DESCR_SM_FACTIONS_MARKER='regexp:;descr_sm_factions.txt.*'
      DESCR_SM_RESOURCES_MARKER='regexp:;descr_sm_resources.txt.*'
      FERAL_DESCR_PORTRAITS_VARIATION_MARKER='regexp:;feral_descr_portraits_variation.txt.*'
      DESCR_BANNERS_MARKER='regexp:;descr_banners.txt.*'
      DESCR_BUILDING_BATTLE_MARKER='regexp:;descr_building_battle.txt.*'
      DESCR_CHARACTER_MARKER='regexp:;descr_character.txt.*'
      DESCR_LBC_DB_MARKER='regexp:;descr_lbc_db.txt.*'
      DESCR_MODEL_BATTLE_MARKER='regexp:;descr_model_battle.txt.*'
      DESCR_MODEL_STRAT_MARKER='regexp:;descr_model_strat.txt.*'
      DESCR_OFFMAP_MODELS_MARKER='regexp:;descr_offmap_models.txt.*'
      DESCR_SM_LANDMARKS_MARKER='regexp:;descr_sm_landmarks.txt.*'
      DESCR_DISASTERS_MARKER='regexp:;descr_disasters.txt.*'
      DESCR_MOUNT_MARKER='regexp:;descr_mount.txt.*'
      DESCR_REBEL_FACTIONS_MARKER='regexp:;descr_rebel_factions.txt.*'
      DESCR_ITEMS_MARKER='regexp:;descr_items.txt.*'
      DESCR_SM_AMBIENT_OBJECTS_MARKER='regexp:;descr_sm_ambient_objects.txt.*'
      DESCR_BELIEFS_MARKER='regexp:;descr_beliefs.txt.*'

      // text mapping markers
      // TODO: Do also buildings text in this generic way?
      EXPORT_BUILDINGS_MARKER='regexp:;export_buildings.txt.*'
      TEXT_MAPPING_MARKER='regexp:;(landmarks|names|rebel_faction_descr).txt.*'

      // Keywords that can also be strings.
      LOCAL='regexp:"local"|local'

      // enums markers
      ENUMS_MARKER='regexp:;(rebel_faction_descr_enums).txt.*'

      COMMENT='regexp:[;Â¬].*'
//      EOL='regexp:[\r\n][\s]*'
      space='regexp:\s+'
      INT = 'regexp:[+\-]?[0-9]+'
      FLOAT = 'regexp:[+\-]?[0-9]*\.[0-9]+'
      STRING='regexp:\"([^\"\\]|\\.)*\"'
      BOOLEAN='regexp:(true|false)'

      // punctuation and ops
      COMMA=","
      COLON=":"
      OCB="{"
      CCB="}"
      OP="("
      CP=")"
      OSB="["
      CSB="]"
      NOT_EQUALS="!="
      EQUALS='regexp:(==|=)'
      LARGER=">"
      LARGER_OR_EQUAL=">="
      SMALLER="<"
      SMALLER_OR_EQUAL="<="
      PLUS="+"
      DASH="-"
      SLASH="/"
      STAR="*"
      AND="and"
      AMBERSANDS="&&"
      OR="or"
      PIPES="||"
      NOT="not"
      EXCLAMATION="!"

      // files and paths
      TXT_FILE='regexp:[\w\d_]+([/\\][\w\d_]+)*\.(txt|TXT)'
      TGA_FILE='regexp:[\w\d_]+([/\\][\w\d_]+)*\.(tga|TGA)'
      CAS_FILE='regexp:[\w\d_]+([/\\][\w\d_]+)*\.(cas|CAS)'
      RTM_FILE='regexp:[\w\d_]+([/\\][\w\d_]+)*\.(rtm|RTM)'
      WMV_FILE='regexp:[\w\d_]+([/\\][\w\d_]+)*\.(wmv|WMV)'
      PATH='regexp:[\w\d_]+(/[\w\d_]+)+'

      // keywords
      // descr_strat
      END="end"
      SUMMER="summer"
      WINTER="winter"
      SPRING="spring"
      AUTUMN="autumn"
      CAMPAIGN="campaign"
      OPTIONS_BI="options bi"
      PLAYABLE="playable"
      UNLOCKABLE="unlockable"
      NONPLAYABLE="nonplayable"
      START_DATE="start_date"
      END_DATE="end_date"
      MARIAN_REFORMS_DISABLED="marian_reforms_disabled"
      BRIGAND_SPAWN_VALUE="brigand_spawn_value"
      PIRATE_SPAWN_VALUE="pirate_spawn_value"
      LANDMARK="landmark"
      RESOURCE_QUANTITY_ENABLED="resource_quantity_enabled"
      RESOURCE_QUANTITY_DISABLED="resource_quantity_disabled"
      RESOURCE="resource"
      AMBIENT_OBJECT="ambient_object"
      INDEX="index"
      FACTION="faction"
      SUPERFACTION="superfaction"
      DEAD_UNTIL_RESURRECTED="dead_until_resurrected"
      AI_DO_NOT_ATTACK="ai_do_not_attack"
      AI_DO_NOT_ATTACK_FACTION="ai_do_not_attack_faction"
      DENARI="denari"
      SETTLEMENT="settlement"
      LEVEL="level"
      REGION="region"
      YEAR_FOUNDED="year_founded"
      POPULATION="population"
      SETTLEMENT_TAX="settlement_tax"
      PLAN_SET="plan_set"
      FACTION_CREATOR="faction_creator"
      VILLAGE="village"
      TOWN="town"
      LARGE_TOWN="large_town"
      CITY="city"
      LARGE_CITY="large_city"
      HUGE_CITY="huge_city"
      DEFAULT_SET="default_set"
      BUILDING="building"
      TYPE="type"
      CHARACTER="character"
      SUB_FACTION="sub_faction"
      LEADER="leader"
      HEIR="heir"
      AGE="age"
      PORTRAIT_INDEX="portrait_index"
      TRAITS="traits"
      ANCILLARIES="ancillaries"
      ARMY="army"
      CHARACTER_RECORD="character_record"
      COMMAND="command"
      INFLUENCE="influence"
      MANAGEMENT="management"
      SUBTERFUGE="subterfuge"
      ALIVE="alive"
      NEVER_A_LEADER="never_a_leader"
      PAST_LEADER="past_leader"
      MALE="male"
      FEMALE="female"
      RELATIVE="relative"
      UNIT="unit"
      EXP="exp"
      ARMOUR="armour"
      WEAPON_LVL="weapon_lvl"
      CORE_ATTITUDES="core_attitudes"
      FACTION_RELATIONSHIPS="faction_relationships"
      ALLIED_TO="allied_to"
      AT_WAR_WITH="at_war_with"
      SUPERFACTION_SETUP="superfaction_setup"
      DEFAULT_HOSTILE="default_hostile"
      MISSION_QUEUE="mission_queue"
      X="x"
      Y="y"
      SPAWN_SCRIPT="spawn_script"
      REVOLT="revolt"
      SCRIPT="script"
      ONCE_ONLY="once_only"

      // export_descr_unit
      DICTIONARY="dictionary"
      CATEGORY="category"
      CLASS="class"
      VOICE_TYPE="voice_type"
      VOICE_INDEXES="voice_indexes"
      SOLDIER="soldier"
      SOLDIERS="soldiers"
      DEFAULT_LC="default"
      ENGINE="engine"
      NO="no"

      // unit attributes
      FRIGHTEN_FOOT="frighten_foot"
      FRIGHTEN_MOUNTED="frighten_mounted"
      CAN_RUN_AMOK="can_run_amok"
      WARCRY="warcry"
      CAN_SAP="can_sap"
      CAN_SWIM="can_swim"
      HARDY="hardy"
      VERY_HARDY="very_hardy"
      POWER_CHARGE="power_charge"
      SEA_FARING="sea_faring"
      CANTABRIAN_CIRCLE="cantabrian_circle"
      GENERAL_UNIT="general_unit"
      GENERAL_UNIT_UPGRADE='general_unit_upgrade "marian_reforms"'
      MERCENARY_UNIT="mercenary_unit"
      DRUID="druid"
      SCREECHING_WOMEN="screeching_women"
      NO_CUSTOM="no_custom"
      IS_PEASANT="is_peasant"
      CAN_HORDE="can_horde"
      LEGIONARY_NAME="legionary_name"

      MELEE="melee"
      THROWN="thrown"
      SIEGE_MISSILE="siege_missile"
      SIMPLE="simple"
      OTHER="other"
      BLADE="blade"
      ARCHERY="archery"
      PIERCING="piercing"
      BLUNT="blunt"
      SLASHING="slashing"
      FIRE="fire"
      NONE="none"
      KNIFE="knife"
      MACE="mace"
      CLUB="club"
      AXE="axe"
      SWORD="sword"
      SPEAR="spear"
      AP="ap"
      BP="bp"
      LIGHT_SPEAR="light_spear"
      LONG_PIKE="long_pike"
      PREC="prec"
      THROWN_AP="thrown ap"
      LAUNCHING="launching"
      AREA="area"
      SHORT_PIKE="short_pike"
      FLESH="flesh"
      LEATHER="leather"
      WOOD="wood"
      METAL="metal"
      BERSERKER="berserker"
      IMPETUOUS="impetuous"
      LOW="low"
      NORMAL="normal"
      DISCIPLINED="disciplined"
      UNTRAINED="untrained"
      TRAINED="trained"
      HIGHLY_TRAINED="highly_trained"
      ANIMAL="animal"
      MOUNT="mount"
      OFFICER="officer"
      MOUNT_EFFECT="mount_effect"
      ATTRIBUTES="attributes"
      FORMATION="formation"
      STAT_HEALTH="stat_health"
      STAT_PRI_ATTR="stat_pri_attr"
      STAT_PRI="stat_pri"
      STAT_SEC="stat_sec"
      STAT_SEC_ATTR="stat_sec_attr"
      STAT_PRI_ARMOUR="stat_pri_armour"
      STAT_SEC_ARMOUR="stat_sec_armour"
      STAT_HEAT="stat_heat"
      STAT_GROUND="stat_ground"
      STAT_MENTAL="stat_mental"
      STAT_CHARGE_DIST="stat_charge_dist"
      STAT_FIRE_DELAY="stat_fire_delay"
      STAT_FOOD="stat_food"
      STAT_COST="stat_cost"
      DONT_ALLOW_MIXED="don't_allow_mixed"
      DONT_ALLOW_REGIONAL="don't_allow_regional"
      DONT_ALLOW_CUSTOM="don't_allow_custom"
      TATTOO_COLOR="tattoo_color"
      UNIQUE_TATTOO="unique_tattoo"
      EXCLUDE_TATTOO="exclude_tattoo"
      HAIR_COLOR="hair_color"
      HAIR_STYLE="hair_style"
      IS_FEMALE="is_female"
      REBALANCE_STATBLOCK="rebalance_statblock"
      RECRUIT_PRIORITY_OFFSET="recruit_priority_offset"
      OWNERSHIP="ownership"
      ETHNICITY="ethnicity"

      // export_descr_buildings
      TAGS="tags"
      ALIAS="alias"
      REQUIRES="requires"
      NO_BUILDING_TAGGED="no_building_tagged"
      QUEUED="queued"
      DISPLAY_STRING="display_string"
      TAG="tag"
      CORE="core"
      DEFENCE="defence"
      MILITARY="military"
      TRADE="trade"
      WATER="water"
      CULTURE="culture"
      RELIGIOUS="religious"
      ICON="icon"
      CLASSIFICATION="classification"
      LEVELS="levels"
      PLUGINS="plugins"
      FACTIONS="factions"
      CAPABILITY="capability"
      FACTION_CAPABILITY="faction_capability"
      TAXABLE_INCOME_BONUS="taxable_income_bonus"
      TRADE_BASE_INCOME_BONUS="trade_base_income_bonus"
      TRADE_FLEET="trade_fleet"
      FARMING_LEVEL="farming_level"
      ROAD_LEVEL="road_level"
      MINE_RESOURCE="mine_resource"
      HAPPINESS_BONUS="happiness_bonus"
      LAW_BONUS="law_bonus"
      RELIGIOUS_BELIEF="religious_belief"
      POPULATION_HEALTH_BONUS="population_health_bonus"
      POPULATION_GROWTH_BONUS="population_growth_bonus"
      WALL_LEVEL="wall_level"
      TOWER_LEVEL="tower_level"
      GATE_STRENGTH="gate_strength"
      GATE_DEFENCES="gate_defences"
      RECRUITS_EXP_BONUS="recruits_exp_bonus"
      RECRUITS_MORALE_BONUS="recruits_morale_bonus"
      CONSTRUCTION_COST_BONUS_MILITARY="construction_cost_bonus_military"
      CONSTRUCTION_COST_BONUS_RELIGIOUS="construction_cost_bonus_religious"
      CONSTRUCTION_COST_BONUS_DEFENSIVE="construction_cost_bonus_defensive"
      CONSTRUCTION_COST_BONUS_OTHER="construction_cost_bonus_other"
      CONSTRUCTION_TIME_BONUS_MILITARY="construction_time_bonus_military"
      CONSTRUCTION_TIME_BONUS_RELIGIOUS="construction_time_bonus_religious"
      CONSTRUCTION_TIME_BONUS_DEFENSIVE="construction_time_bonus_defensive"
      CONSTRUCTION_TIME_BONUS_OTHER="construction_time_bonus_other"
      WEAPON_SIMPLE="weapon_simple"
      WEAPON_BLADED="weapon_bladed"
      WEAPON_OTHER="weapon_other"
      WEAPON_MISSILE="weapon_missile"
      WEAPON_SIEGE="weapon_siege"
      UPGRADE_BODYGUARD="upgrade_bodyguard"
      STAGE_RACES="stage_races"
      STAGE_GAMES="stage_games"
      AGENT_LIMIT_SETTLEMENT="agent_limit_settlement"
      DUMMY="dummy"
      CAPABILITY_TRAITSANDRETINUE="Capability_TraitsAndRetinue"
      AI_DESTRUCTION_HINT="ai_destruction_hint"
      RECRUIT="recruit"
      AGENT="agent"
      CONSTRUCTION="construction"
      RECRUITMENT="recruitment"
      MERCENARIES="mercenaries"
      FIELD_CONSTRUCTION="field_construction"
      AGENT_UCF="Agent"
      MISSION_UCF="Mission"
      COST="cost"
      SETTLEMENT_MIN="settlement_min"
      UPGRADES="upgrades"
      BONUS="bonus"
      IS_TOGGLED="is_toggled"
      MAJOR_EVENT="major_event"
      IS_PLAYER="is_player"
      RESOURCE="resource"
      HIDDEN_RESOURCE="hidden_resource"
      BUILDING_PRESENT="building_present"
      BUILDING_PRESENT_MIN_LEVEL="building_present_min_level"

      // export_descr_ancillaries
      ANCILLARY = "Ancillary"
      IMAGE = "Image"
      UNIQUE = "Unique"
      EXCLUDEDANCILLARIES = "ExcludedAncillaries"
      EXCLUDECULTURES = "ExcludeCultures"
      DESCRIPTION = "Description"
      EFFECTSDESCRIPTION = "EffectsDescription"
      EFFECT = "Effect"
      FAKEEFFECT = "FakeEffect"
      HIDDEN = "Hidden"
      SHOWSTATS = "ShowStats"
      TRIGGER = "Trigger"
      WHENTOTEST = "WhenToTest"
      CONDITION = "Condition"
      ACQUIREANCILLARY = "AcquireAncillary"
      REMOVEANCILLARY = "RemoveAncillary"

      // export_descr_traits
      TRAIT = "Trait"
      CHARACTERS = "Characters"
      NOGOINGBACKLEVEL = "NoGoingBackLevel"
      ANTITRAITS = "AntiTraits"
      LEVEL = "Level"
      GAINMESSAGE = "GainMessage"
      EPITHET = "Epithet"
      LOSEMESSAGE = "LoseMessage"
      THRESHOLD = "Threshold"
      AFFECTS = "Affects"
      CHANCE = "Chance"
      LOSE = "Lose"

      // descr_mercenaries
      POOL = "pool"
      REGIONS = "regions"
      REPLENISH = "replenish"
      MAX = "max"
      INITIAL = "initial"

      // descr_names
      CHARACTERS_LC = "characters"
      SURNAMES = "surnames"
      WOMEN = "women"

      // descr_unit_variation
      SKIN = "skin"
      ETHNICITIES = "ethnicities"
      HAIR_STYLES = "hair_styles"
      FEMALE_HAIR = "female_hair"
      BEARD_STYLES = "beard_styles"
      AGED_HAIR_COLOR = "aged_hair_color"
      VARIANT = "variant"
      DISTRIBUTION = "distribution"

      // feral_descr_ai_personality
      BUILDING_PRIORITY = "building_priority"
      POPULATION_GROWTH_BONUS = "population_growth_bonus"
      POPULATION_LOYALTY_BONUS = "population_loyalty_bonus"
      POPULATION_HEALTH_BONUS = "population_health_bonus"
      TRADE_BASE_INCOME_BONUS = "trade_base_income_bonus"
      TRADE_LEVEL_BONUS = "trade_level_bonus"
      TRADE_FLEET = "trade_fleet"
      TAXABLE_INCOME_BONUS = "taxable_income_bonus"
      MINE_RESOURCE_LEVEL = "mine_resource_level"
      FARMING_LEVEL = "farming_level"
      ROAD_LEVEL = "road_level"
      GATE_STRENGTH = "gate_strength"
      GATE_DEFENSES = "gate_defenses"
      WALL_LEVEL = "wall_level"
      TOWER_LEVEL = "tower_level"
      STAGE_GAMES = "stage_games"
      STAGE_RACES = "stage_races"
      ARMOUR = "armour"
      POPULATION_FIRE_RISK_BONUS = "population_fire_risk_bonus"
      BODYGUARD = "bodyguard"
      RECRUITS_MORALE_BONUS = "recruits_morale_bonus"
      RECRUITS_EXPERIENCE_BONUS = "recruits_experience_bonus"
      HAPPINESS_BONUS = "happiness_bonus"
      LAW_BONUS = "law_bonus"
      MILITARY_PRIORITY = "military_priority"
      MASS = "mass"
      INFANTRY_LIGHT = "infantry_light"
      INFANTRY_HEAVY = "infantry_heavy"
      INFANTRY_MISSILE = "infantry_missile"
      INFANTRY_SPEARMEN = "infantry_spearmen"
      CAVALRY_LIGHT = "cavalry_light"
      CAVALRY_HEAVY = "cavalry_heavy"
      CAVALRY_MISSILE = "cavalry_missile"
      SIEGE_ARTILLERY = "siege_artillery"
      SPECIAL = "special"
      SALLY_AGRESSION = "sally_agression"
      SALLY_DESPERATE = "sally_desperate"
      ATTACK_RISK_TAKER = "attack_risk_taker"
      SUBTERFUGE_RISK_TAKER = "subterfuge_risk_taker"
      DIPLOMATIC_PRIORITY = "diplomatic_priority"
      AGGRESIVENESS = "aggresiveness"
      PERSONALITY = "personality"

      // feral_descr_portraits_variation
      OLD="old"
      CIVILIAN="civilian"
      ROGUE="rogue"
      YOUNG="young"

      // descr_faction_groups
      GROUP="group"

      // descr_banners
      BANNER="banner"
      MODEL="model"
      SKELETON="skeleton"
      OUTLINE="outline"
      STANDARD_TEXTURE="standard_texture"
      REBELS_TEXTURE="rebels_texture"
      ROUTING_TEXTURE="routing_texture"
      ALLY_TEXTURE="ally_texture"

      // descr_character
      STARTING_ACTION_POINTS="starting_action_points"
      ACTIONS="actions"
      WAGE_BASE="wage_base"
      STRAT_CARD="strat_card"
      STRAT_MODEL="strat_model"
      BATTLE_MODEL="battle_model"
      BATTLE_EQUIP="battle_equip"

      // descr_building_battle
      TEXTURE_VARIANTS="texture_variants"
      SNOWFALL="snowfall"
      SNOWCOVER="snowcover"
      SPOT_ITEMS="spot_items"
      ANY="any"
      STAT_CATS="stat_cats"
      FULL_HEALTH="full_health"
      BATTLE_STATS="battle_stats"
      TRANSITION_SCRIPTS="transition_scripts"
      TRANSITION="transition"
      DURATION="duration"
      PHYSICAL_SWITCH="physical_switch"
      START_ITEMS="start_items"
      END_ITEMS="end_items"
      INCLUDE="include"
      LOCALISED_NAME="localised_name"
      MIN_HEALTH="min_health"
      ITEM="item"
      PHYSICAL_INFO="physical_info"

      // descr_offmap_models
      NAVY="navy"
      LARGE="large"
      MEDIUM="medium"
      SMALL="small"
      WONDER="wonder"
      PORT="port"
      FISHING_VILLAGE="fishing_village"
      SEA_PORT="sea_port"
      SHIPWRIGHT="shipwright"
      DOCKYARD="dockyard"

      // descr_model_battle
      SCALE="scale"
      SKELETON_HORSE="skeleton_horse"
      SKELETON_ELEPHANT="skeleton_elephant"
      SKELETON_CHARIOT="skeleton_chariot"
      SKELETON_CAMEL="skeleton_camel"
      BODY="body"
      ANGRY_FACE="angry_face"
      YES="yes"
      MEDIEVAL_FEATURES="medieval_features"
      TIRED_K="tired"
      TIRED_C="Tired"
      VERYTIRED="VeryTired"
      AGED="aged"
      PBR_TEXTURE="pbr_texture"
      TEXTURE="texture"
      NO_VARIATION="no_variation"
      MODEL_FLEXI="model_flexi"
      MODEL_FLEXI_M="model_flexi_m"
      MODEL_FLEXI_C="model_flexi_c"
      DEFAULT="Default"
      SKINNY="Skinny"
      SKINNYATHLETIC="SkinnyAthletic"
      ATHLETIC="Athletic"
      BULKY="Bulky"
      OVERWEIGHT="Overweight"

      // descr_model_strat
      IGNORE_REGISTRY="ignore_registry"

      // descr_sm_landmarks
      IMAGE="image"
      JULII_RTM="julii_rtm"
      BRUTII_RTM="brutii_rtm"
      SCIPII_RTM="scipii_rtm"
      MOVIE="movie"

      // descr_disasters
      DISASTER_LC="disaster"
      YEAR="year"
      POSITION="position"
      SIZE="size"

      // descr_mount
      RADIUS="radius"
      X_RADIUS="x_radius"
      HEIGHT="height"
      BANNER_HEIGHT="banner_height"
      BOUYANCY_OFFSET="bouyancy_offset"
      WATER_TRAIL_EFFECT="water_trail_effect"
      WATER_TRAIL_EFFECT_RUNNING="water_trail_effect_running"
      ROOT_NODE_HEIGHT="root_node_height"
      RIDER_OFFSET="rider_offset"
      ATTACK_DELAY="attack_delay"
      DEAD_RADIUS="dead_radius"
      TUSK_Z="tusk_z"
      TUSK_RADIUS="tusk_radius"
      RIDERS="riders"
      AXLE_WIDTH="axle_width"
      WHEEL_RADIUS="wheel_radius"
      PIVOT_OFFSET="pivot_offset"
      POLE_LENGTH="pole_length"
      POLE_PIVOT="pole_pivot"
      POLE_CONNECT="pole_connect"
      HARNESS_CONNECT="harness_connect"
      SCYTHE_RADIUS="scythe_radius"
      REVS_PER_ATTACK="revs_per_attack"
      HORSE_TYPE="horse_type"
      HORSES="horses"
      HORSE_OFFSET="horse_offset"
      LODS="lods"
      LOD="lod"
      SCORPION_OFFSET="scorpion_offset"
      SCORPION_HEIGHT="scorpion_height"
      SCORPION_FORWARD_LENGTH="scorpion_forward_length"
      SCORPION_RELOAD_TICKS="scorpion_reload_ticks"

      // descr_rebel_factions
      REBEL_TYPE='rebel_type'
      CHANCE_LC='chance'
      DESCRIPTION_LC='description'
      PEASANT_REVOLT='peasant_revolt'
      GLADIATOR_REVOLT='gladiator_revolt'
      BRIGANDS='brigands'
      PIRATES='pirates'

      // descr_items
      MAX_DISTANCE = "max_distance"
      MODEL_RIGID = "model_rigid"

      // events
      PREBATTLE = "PreBattle"
      PREBATTLEWITHDRAWAL = "PreBattleWithdrawal"
      BATTLEAICOMMENCED = "BattleAiCommenced"
      BATTLEDELAYPHASECOMMENCED = "BattleDelayPhaseCommenced"
      BATTLEDEPLOYMENTPHASECOMMENCED = "BattleDeploymentPhaseCommenced"
      BATTLECONFLICTPHASECOMMENCED = "BattleConflictPhaseCommenced"
      BATTLEPLAYERUNITATTACKSENEMYUNIT = "BattlePlayerUnitAttacksEnemyUnit"
      BATTLEENEMYUNITATTACKSPLAYERUNIT = "BattleEnemyUnitAttacksPlayerUnit"
      BATTLEPLAYERATTACKSSETTLEMENTBUILDING = "BattlePlayerAttacksSettlementBuilding"
      BATTLEENEMYATTACKSSETTLEMENTBUILDING = "BattleEnemyAttacksSettlementBuilding"
      BATTLEUNITGOESBERSERK = "BattleUnitGoesBerserk"
      BATTLEPLAYERUNITGOESBERSERK = "BattlePlayerUnitGoesBerserk"
      BATTLEENEMYUNITGOESBERSERK = "BattleEnemyUnitGoesBerserk"
      BATTLEUNITROUTS = "BattleUnitRouts"
      BATTLEPLAYERUNITROUTS = "BattlePlayerUnitRouts"
      BATTLEENEMYUNITROUTS = "BattleEnemyUnitRouts"
      BATTLEPLAYERSIEGEENGINEDESTROYED = "BattlePlayerSiegeEngineDestroyed"
      BATTLEENEMYSIEGEENGINEDESTROYED = "BattleEnemySiegeEngineDestroyed"
      POSTBATTLE = "PostBattle"
      BATTLEARMYROUTED = "BattleArmyRouted"
      BATTLEGENERALKILLED = "BattleGeneralKilled"
      BATTLEGENERALROUTED = "BattleGeneralRouted"
      BATTLEREINFORCEMENTSARRIVE = "BattleReinforcementsArrive"
      BATTLESIEGEENGINEDESTROYED = "BattleSiegeEngineDestroyed"
      BATTLESIEGEENGINEDOCKSWALL = "BattleSiegeEngineDocksWall"
      BATTLEGATESATTACKEDBYENGINE = "BattleGatesAttackedByEngine"
      BATTLEGATESATTACKEDBYPLAYERENGINE = "BattleGatesAttackedByPlayerEngine"
      BATTLEGATESATTACKEDBYENEMYENGINE = "BattleGatesAttackedByEnemyEngine"
      BATTLEBATTLEGATESDESTROYEDBYENGINE = "BattleBattleGatesDestroyedByEngine"
      BATTLEWALLSBREACHEDBYENGINE = "BattleWallsBreachedByEngine"
      BATTLEWALLSCAPTURED = "BattleWallsCaptured"
      BATTLEFINISHED = "BattleFinished"
      ENTEREDCITYVIEW = "EnteredCityView"
      BATTLEMINIMAPACTION = "BattleMinimapAction"
      BATTLEPLAYERUNITSELECTED = "BattlePlayerUnitSelected"
      ENTERTACTICALMODE = "EnterTacticalMode"
      BATTLEREINFORCEMENTSHACK = "BattleReinforcementsHack"
      FACTIONTURNSTART = "FactionTurnStart"
      FACTIONWARDECLARED = "FactionWarDeclared"
      HORDEFORMED = "HordeFormed"
      FACTIONTURNEND = "FactionTurnEnd"
      HIREMERCENARIES = "HireMercenaries"
      GENERALCAPTURERESIDENCE = "GeneralCaptureResidence"
      GENERALCAPTUREWONDER = "GeneralCaptureWonder"
      GENERALCAPTURESETTLEMENT = "GeneralCaptureSettlement"
      LEADERDESTROYEDFACTION = "LeaderDestroyedFaction"
      DISASTER = "Disaster"
      CHARACTERDAMAGEDBYDISASTER = "CharacterDamagedByDisaster"
      GENERALASSAULTSRESIDENCE = "GeneralAssaultsResidence"
      OFFEREDFORADOPTION = "OfferedForAdoption"
      LESSERGENERALOFFEREDFORADOPTION = "LesserGeneralOfferedForAdoption"
      OFFEREDFORMARRIAGE = "OfferedForMarriage"
      BROTHERADOPTED = "BrotherAdopted"
      BECOMESFACTIONLEADER = "BecomesFactionLeader"
      BECOMESFACTIONHEIR = "BecomesFactionHeir"
      TAKEOFFICE = "TakeOffice"
      CEASEDFACTIONLEADER = "CeasedFactionLeader"
      CEASEDFACTIONHEIR = "CeasedFactionHeir"
      LEAVEOFFICE = "LeaveOffice"
      UNGARRISONEDFORT = "UngarrisonedFort"
      LOSTLEGIONARYEAGLE = "LostLegionaryEagle"
      CAPTUREDLEGIONARYEAGLE = "CapturedLegionaryEagle"
      RECAPTUREDLEGIONARYEAGLE = "RecapturedLegionaryEagle"
      SENATEEXPOSURE = "SenateExposure"
      QUAESTORINVESTIGATIONMINOR = "QuaestorInvestigationMinor"
      QUAESTORINVESTIGATION = "QuaestorInvestigation"
      QUAESTORINVESTIGATIONMAJOR = "QuaestorInvestigationMajor"
      POPULARSUPPORTFOROVERTHROW = "PopularSupportForOverthrow"
      SENATEREADYTOOUTLAWFACTION = "SenateReadyToOutlawFaction"
      SENATEOUTLAWSFACTION = "SenateOutlawsFaction"
      NEWTURNSTART = "NewTurnStart"
      SCRIPTPROMPTCALLBACK = "ScriptPromptCallback"
      FACTIONDESTROYED = "FactionDestroyed"
      BIRTH = "Birth"
      CHARACTERCOMESOFAGE = "CharacterComesOfAge"
      CHARACTERMARRIES = "CharacterMarries"
      CHARACTERBECOMESAFATHER = "CharacterBecomesAFather"
      CHARACTERTURNSTART = "CharacterTurnStart"
      CHARACTERTURNEND = "CharacterTurnEnd"
      CHARACTERTURNENDINSETTLEMENT = "CharacterTurnEndInSettlement"
      GENERALDEVASTATESTILE = "GeneralDevastatesTile"
      SPYMISSION = "SpyMission"
      EXECUTESASPYONAMISSION = "ExecutesASpyOnAMission"
      LEADERORDEREDSPYINGMISSION = "LeaderOrderedSpyingMission"
      ASSASSINATIONMISSION = "AssassinationMission"
      EXECUTESANASSASSINONAMISSION = "ExecutesAnAssassinOnAMission"
      LEADERORDEREDASSASSINATION = "LeaderOrderedAssassination"
      SUFFERASSASSINATIONATTEMPT = "SufferAssassinationAttempt"
      SABOTAGEMISSION = "SabotageMission"
      LEADERORDEREDSABOTAGE = "LeaderOrderedSabotage"
      BRIBERYMISSION = "BriberyMission"
      LEADERORDEREDBRIBERY = "LeaderOrderedBribery"
      ACCEPTBRIBE = "AcceptBribe"
      REFUSEBRIBE = "RefuseBribe"
      INSURRECTION = "Insurrection"
      DIPLOMACYMISSION = "DiplomacyMission"
      LEADERORDEREDDIPLOMACY = "LeaderOrderedDiplomacy"
      LEADERSENATEMISSIONSUCCESS = "LeaderSenateMissionSuccess"
      LEADERSENATEMISSIONFAILED = "LeaderSenateMissionFailed"
      CONSTRUCTIONITEMCLICKED = "ConstructionItemClicked"
      RECRUITMENTITEMCLICKED = "RecruitmentItemClicked"
      RECRUITMENTPOPULATED = "RecruitmentPopulated"
      CONSTRUCTIONPOPULATED = "ConstructionPopulated"
      AGENTLISTPOPULATED = "AgentListPopulated"
      MOVERETINUEPOPULATED = "MoveRetinuePopulated"
      MOVERETINUEPRESSED = "MoveRetinuePressed"
      MOVERETINUEANCILLARYSELECTED = "MoveRetinueAncillarySelected"
      MOVERETINUEANCILLARYDESELECTED = "MoveRetinueAncillaryDeselected"
      MISSIONSELECTED = "MissionSelected"
      AGENTSELECTED = "AgentSelected"
      SCROLLDIDOPEN = "ScrollDidOpen"
      UNITHASROUTED = "UnitHasRouted"
      BATTLEUNITACTIONSTATUS = "BattleUnitActionStatus"
      DIPLOMACYSCROLLPOPULATED = "DiplomacyScrollPopulated"
      ITEMDESELECTED = "ItemDeselected"
      UNITINFOOPENED = "UnitInfoOpened"
      ADVISORAUDIOSTOPPED = "AdvisorAudioStopped"
      SETTLEMENTTURNSTART = "SettlementTurnStart"
      SETTLEMENTTURNEND = "SettlementTurnEnd"
      NEWADMIRALCREATED = "NewAdmiralCreated"
      UNITTRAINED = "UnitTrained"
      GOVERNORUNITTRAINED = "GovernorUnitTrained"
      BUILDINGCOMPLETED = "BuildingCompleted"
      GOVERNORBUILDINGCOMPLETED = "GovernorBuildingCompleted"
      PLUGINCOMPLETED = "PlugInCompleted"
      GOVERNORPLUGINCOMPLETED = "GovernorPlugInCompleted"
      AGENTCREATED = "AgentCreated"
      GOVERNORAGENTCREATED = "GovernorAgentCreated"
      BUILDINGDESTROYED = "BuildingDestroyed"
      GOVERNORBUILDINGDESTROYED = "GovernorBuildingDestroyed"
      CITYRIOTS = "CityRiots"
      GOVERNORCITYRIOTS = "GovernorCityRiots"
      CITYREBELS = "CityRebels"
      GOVERNORCITYREBELS = "GovernorCityRebels"
      GOVERNORTHROWGAMES = "GovernorThrowGames"
      GOVERNORTHROWRACES = "GovernorThrowRaces"
      UNGARRISONEDSETTLEMENT = "UngarrisonedSettlement"
      ENSLAVEPOPULATION = "EnslavePopulation"
      EXTERMINATEPOPULATION = "ExterminatePopulation"
      CITYSACKED = "CitySacked"
      CHARACTERSELECTED = "CharacterSelected"
      SETTLEMENTSELECTED = "SettlementSelected"
      ENEMYSETTLEMENTSELECTED = "EnemySettlementSelected"
      MULTITURNMOVE = "MultiTurnMove"
      CHARACTERPANELOPEN = "CharacterPanelOpen"
      SETTLEMENTPANELOPEN = "SettlementPanelOpen"
      FINANCESPANELOPEN = "FinancesPanelOpen"
      FACTIONSUMMARYPANELOPEN = "FactionSummaryPanelOpen"
      FAMILYTREEPANELOPEN = "FamilyTreePanelOpen"
      DIPLOMATICSTANDINGPANELOPEN = "DiplomaticStandingPanelOpen"
      SENATEMISSIONSPANELOPEN = "SenateMissionsPanelOpen"
      SENATEOFFICESPANELOPEN = "SenateOfficesPanelOpen"
      DIPLOMACYPANELOPEN = "DiplomacyPanelOpen"
      PREBATTLEPANELOPEN = "PreBattlePanelOpen"
      RECRUITMENTPANELOPEN = "RecruitmentPanelOpen"
      CONSTRUCTIONPANELOPEN = "ConstructionPanelOpen"
      TRADEPANELOPEN = "TradePanelOpen"
      HIREMERCENARIESPANELOPEN = "HireMercenariesPanelOpen"
      NAVALAUTORESOLVEPANELOPEN = "NavalAutoResolvePanelOpen"
      INCOMINGMESSAGE = "IncomingMessage"
      MESSAGEOPEN = "MessageOpen"
      REQUESTBUILDINGADVICE = "RequestBuildingAdvice"
      REQUESTTRAININGADVICE = "RequestTrainingAdvice"
      REQUESTMERCENARIESADVICE = "RequestMercenariesAdvice"
      BUTTONPRESSED = "ButtonPressed"
      SHORTCUTTRIGGERED = "ShortcutTriggered"
      SCROLLOPENED = "ScrollOpened"
      SCROLLCLOSED = "ScrollClosed"
      ADVICESUPRESSED = "AdviceSupressed"
      SCROLLADVICEREQUESTED = "ScrollAdviceRequested"
      PREBATTLESCROLLADVICEREQUESTED = "PreBattleScrollAdviceRequested"
      NAVALPREBATTLESCROLLADVICEREQUESTED = "NavalPreBattleScrollAdviceRequested"
      SETTLEMENTSCROLLADVICEREQUESTED = "SettlementScrollAdviceRequested"
      IDLE = "Idle"
      ABANDONSHOWME = "AbandonShowMe"
      SCRIPTEDADVICE = "ScriptedAdvice"
      DECLINEAUTOMATEDSETTLEMENTMANAGEMENT = "DeclineAutomatedSettlementManagement"
      ESCPRESSED = "EscPressed"
      GAMERELOADED = "GameReloaded"
      FIRSTSTRATUPDATES = "FirstStratUpdates"
      MOVIESTOPPED = "MovieStopped"
      SELECTIONASSISTPOSSIBLE = "SelectionAssistPossible"
      SETTLEMENTBUTTONPRESSED = "SettlementButtonPressed"
      WORLDSCRIPTTERMINATE = "WorldScriptTerminate"
      CAMPAIGNHUDSHOWN = "CampaignHudShown"
      CONTEXTPOPUPINTERACTION = "ContextPopupInteraction"
      DIPLOMACYCONSTRUCTINGOFFER = "DiplomacyConstructingOffer"
      DIPLOMACYCONSTRUCTINGCOUNTEROFFER = "DiplomacyConstructingCounterOffer"
      DIPLOMACYOPPONENTPRESENTSOFFER = "DiplomacyOpponentPresentsOffer"
      DIPLOMACYOPPONENTPRESENTSCOUNTEROFFER = "DiplomacyOpponentPresentsCounterOffer"
      FACTIONSUMMARY = "FactionSummary"
      FACTIONSENATE = "FactionSenate"
      FACTIONSENATEPOLICY = "FactionSenatePolicy"
      FACTIONSENATEMISSIONS = "FactionSenateMissions"
      FACTIONSENATEOFFICIALS = "FactionSenateOfficials"
      FACTIONSENATEFLOOR = "FactionSenateFloor"
      FACTIONFACTIONS = "FactionFactions"
      FACTIONDETAILS = "FactionDetails"
      FACTIONFAMILYTREE = "FactionFamilyTree"
      FACTIONRANKINGS = "FactionRankings"
      FACTIONLISTS = "FactionLists"
      SETTLEMENTCHARACTER = "SettlementCharacter"
      SETTLEMENTTRADE = "SettlementTrade"
      SETTLEMENTOVERVIEW = "SettlementOverview"
      SPYSELECTED = "SpySelected"
      DIPLOMATSELECTED = "DiplomatSelected"
      ASSASSINSELECTED = "AssassinSelected"
      FLEETSELECTED = "FleetSelected"
      CAMPAIGNMAPGESTURE = "CampaignMapGesture"
      CAMPAIGNDOINGBADLY = "CampaignDoingBadly"
      BATTLEMAPGESTURE = "BattleMapGesture"
      HIDEBATTLEUI = "HideBattleUI"
      FERALNEWSVISIBLE = "FeralNewsVisible"
      AGENTHUBOPENED = "AgentHubOpened"
      MOVERETINUEOPENED = "MoveRetinueOpened"
      OWNFACTIONDETAILSOPENED = "OwnFactionDetailsOpened"
      DIPLOMATICSTANDINGSHOWN = "DiplomaticStandingShown"
      FACTIONFINANCESSHOWN = "FactionFinancesShown"
      FAMILYTREESHOWN = "FamilyTreeShown"
      SENDAGENTPANEL = "SendAgentPanel"
      SETTLEMENTDETAILSSHOWN = "SettlementDetailsShown"
      CHARACTERINFOSCREEN = "CharacterInfoScreen"
      FRIENDLYCHARACTERSELECTED = "FriendlyCharacterSelected"
      ENEMYCHARACTERSELECTED = "EnemyCharacterSelected"
      FRIENDLYSETTLEMENTSELECTED = "FriendlySettlementSelected"
      MAPOVERLAYOPENED = "MapOverlayOpened"
      SIEGEDETAILSSHOWN = "SiegeDetailsShown"
      PREBATTLESCREEN = "PreBattleScreen"
      TACTICALMAPSHOWN = "TacticalMapShown"
      POSTBATTLESCREEN = "PostBattleScreen"
      UNITSGROUPED = "UnitsGrouped"
      ENTEREDBATTLE = "EnteredBattle"
      ADVISOROPENED = "AdvisorOpened"
      FORMATIONTYPESSHOWN = "FormationTypesShown"
      MERCHANTSELECTED = "MerchantSelected"
      NAVALCOMBATSTARTED = "NavalCombatStarted"
      MERGEARMIESOPENED = "MergeArmiesOpened"
      ROUTESBLOCKADED = "RoutesBlockaded"
      ELECTIONRESULTS = "ElectionResults"
      BATTLETOGGLEMENU = "BattleToggleMenu"
      AMBUSHMODE = "AmbushMode"
      NEWSTABCLOSED = "NewsTabClosed"
      NEWSTABOPENED = "NewsTabOpened"
      BATTLENEWSTABOPENED = "BattleNewsTabOpened"
      QUICKLISTSOPENED = "QuickListsOpened"
      EMBARGOISAVAILABLE = "EmbargoIsAvailable"
      REBELCHARACTERSELECTED = "RebelCharacterSelected"
      HIGHTAXESCAUSEDISORDER = "HighTaxesCauseDisorder"
      FAILEDTOENDTURN = "FailedToEndTurn"
      ACQUISITIONMISSION = "AcquisitionMission"
      SUFFERACQUISITIONATTEMPT = "SufferAcquisitionAttempt"

      // conditions
      I_INBATTLE = "I_InBattle"
      WONBATTLE = "WonBattle"
      I_WONBATTLE = "I_WonBattle"
      ROUTS = "Routs"
      ALLY_ROUTS = "Ally_Routs"
      GENERALHPLOSTRATIOINBATTLE = "GeneralHPLostRatioinBattle"
      GENERALNUMKILLSINBATTLE = "GeneralNumKillsInBattle"
      GENERALFOUGHTINCOMBAT = "GeneralFoughtInCombat"
      PERCENTAGEOFARMYKILLED = "PercentageOfArmyKilled"
      I_PERCENTAGEOFARMYKILLED = "I_PercentageOfArmyKilled"
      PERCENTAGEENEMYKILLED = "PercentageEnemyKilled"
      PERCENTAGEBODYGUARDKILLED = "PercentageBodyguardKilled"
      PERCENTAGEROUTEDOFFFIELD = "PercentageRoutedOffField"
      NUMKILLEDGENERALS = "NumKilledGenerals"
      PERCENTAGEUNITCATEGORY = "PercentageUnitCategory"
      NUMFRIENDSINBATTLE = "NumFriendsInBattle"
      NUMENEMIESINBATTLE = "NumEnemiesInBattle"
      GENERALFOUGHTFACTION = "GeneralFoughtFaction"
      GENERALFOUGHTCULTURE = "GeneralFoughtCulture"
      I_CONFLICTTYPE = "I_ConflictType"
      ISNIGHTBATTLE = "IsNightBattle"
      BATTLESUCCESS = "BattleSuccess"
      BATTLEODDS = "BattleOdds"
      WASATTACKER = "WasAttacker"
      I_BATTLEAIATTACKING = "I_BattleAiAttacking"
      I_BATTLEAIATTACKINGSETTLEMENT = "I_BattleAiAttackingSettlement"
      I_BATTLEAIDEFENDINGSETTLEMENT = "I_BattleAiDefendingSettlement"
      I_BATTLEAIDEFENDINGHILL = "I_BattleAiDefendingHill"
      I_BATTLEAIDEFENDINGCROSSING = "I_BattleAiDefendingCrossing"
      I_BATTLEAISCOUTING = "I_BattleAiScouting"
      I_BATTLEISRIVERBATTLE = "I_BattleIsRiverBattle"
      I_BATTLEISSIEGEBATTLE = "I_BattleIsSiegeBattle"
      I_BATTLEISSALLYOUTBATTLE = "I_BattleIsSallyOutBattle"
      I_BATTLEISFORTBATTLE = "I_BattleIsFortBattle"
      I_BATTLEATTACKERNUMSIEGEENGINES = "I_BattleAttackerNumSiegeEngines"
      I_BATTLEATTACKERNUMARTILLERYCANPENETRATEWALLS = "I_BattleAttackerNumArtilleryCanPenetrateWalls"
      I_BATTLEDEFENDERNUMNONMISSILEUNITSONWALLS = "I_BattleDefenderNumNonMissileUnitsOnWalls"
      I_BATTLEDEFENDERNUMMISSILEUNITSONWALLS = "I_BattleDefenderNumMissileUnitsOnWalls"
      I_BATTLESETTLEMENTWALLSBREACHED = "I_BattleSettlementWallsBreached"
      I_BATTLESETTLEMENTGATEDESTROYED = "I_BattleSettlementGateDestroyed"
      I_BATTLESETTLEMENTTOWERDEFENCE = "I_BattleSettlementTowerDefence"
      I_BATTLESETTLEMENTGATEDEFENCE = "I_BattleSettlementGateDefence"
      I_BATTLESETTLEMENTFORTIFICATIONLEVEL = "I_BattleSettlementFortificationLevel"
      BATTLEBUILDINGTYPE = "BattleBuildingType"
      I_BATTLESETTLEMENTGATESTRENGTH = "I_BattleSettlementGateStrength"
      I_BATTLENUMBEROFRIVERCROSSINGS = "I_BattleNumberOfRiverCrossings"
      BATTLEPLAYERUNITCLASS = "BattlePlayerUnitClass"
      BATTLEENEMYUNITCLASS = "BattleEnemyUnitClass"
      BATTLEPLAYERUNITCATEGORY = "BattlePlayerUnitCategory"
      BATTLEENEMYUNITCATEGORY = "BattleEnemyUnitCategory"
      BATTLEPLAYERUNITSIEGEENGINECLASS = "BattlePlayerUnitSiegeEngineClass"
      BATTLEENEMYUNITSIEGEENGINECLASS = "BattleEnemyUnitSiegeEngineClass"
      BATTLEPLAYERUNITONWALLS = "BattlePlayerUnitOnWalls"
      BATTLEENEMYUNITONWALLS = "BattleEnemyUnitOnWalls"
      BATTLEPLAYERCURRENTFORMATION = "BattlePlayerCurrentFormation"
      BATTLEENEMYCURRENTFORMATION = "BattleEnemyCurrentFormation"
      BATTLEPLAYERUNITCLOSEFORMATION = "BattlePlayerUnitCloseFormation"
      BATTLEENEMYUNITCLOSEFORMATION = "BattleEnemyUnitCloseFormation"
      BATTLEPLAYERUNITSPECIALABILITYSUPPORTED = "BattlePlayerUnitSpecialAbilitySupported"
      BATTLESELECTEDPLAYERUNITSPECIALABILITYSUPPORTED = "BattleSelectedPlayerUnitSpecialAbilitySupported"
      BATTLEENEMYUNITSPECIALABILITYSUPPORTED = "BattleEnemyUnitSpecialAbilitySupported"
      BATTLEPLAYERUNITSPECIALABILITYACTIVE = "BattlePlayerUnitSpecialAbilityActive"
      BATTLEENEMYUNITSPECIALABILITYACTIVE = "BattleEnemyUnitSpecialAbilityActive"
      BATTLEPLAYERMOUNTCLASS = "BattlePlayerMountClass"
      BATTLEENEMYMOUNTCLASS = "BattleEnemyMountClass"
      BATTLEPLAYERUNITMELEESTRENGTH = "BattlePlayerUnitMeleeStrength"
      BATTLEENEMYUNITMELEESTRENGTH = "BattleEnemyUnitMeleeStrength"
      BATTLEPLAYERUNITMISSILESTRENGTH = "BattlePlayerUnitMissileStrength"
      BATTLEENEMYUNITMISSILESTRENGTH = "BattleEnemyUnitMissileStrength"
      BATTLEPLAYERUNITSPECIALFORMATION = "BattlePlayerUnitSpecialFormation"
      BATTLEENEMYUNITSPECIALFORMATION = "BattleEnemyUnitSpecialFormation"
      BATTLEPLAYERUNITENGAGED = "BattlePlayerUnitEngaged"
      BATTLEENEMYUNITENGAGED = "BattleEnemyUnitEngaged"
      BATTLEPLAYERACTIONSTATUS = "BattlePlayerActionStatus"
      BATTLEENEMYACTIONSTATUS = "BattleEnemyActionStatus"
      BATTLEPLAYERUNITMOVINGFAST = "BattlePlayerUnitMovingFast"
      BATTLEENEMYUNITMOVINGFAST = "BattleEnemyUnitMovingFast"
      BATTLERANGEOFATTACK = "BattleRangeOfAttack"
      BATTLEDIRECTIONOFATTACK = "BattleDirectionOfAttack"
      BATTLEISMELEEATTACK = "BattleIsMeleeAttack"
      I_BATTLEPLAYERARMYPERCENTAGEOFUNITCLASS = "I_BattlePlayerArmyPercentageOfUnitClass"
      I_BATTLEENEMYARMYPERCENTAGEOFUNITCLASS = "I_BattleEnemyArmyPercentageOfUnitClass"
      I_BATTLEPLAYERARMYPERCENTAGEOFUNITCATEGORY = "I_BattlePlayerArmyPercentageOfUnitCategory"
      I_BATTLEENEMYARMYPERCENTAGEOFUNITCATEGORY = "I_BattleEnemyArmyPercentageOfUnitCategory"
      I_BATTLEPLAYERARMYPERCENTAGEOFMOUNTCLASS = "I_BattlePlayerArmyPercentageOfMountClass"
      I_BATTLEENEMYARMYPERCENTAGEOFMOUNTCLASS = "I_BattleEnemyArmyPercentageOfMountClass"
      I_BATTLEPLAYERARMYPERCENTAGEOFCLASSANDCATEGORY = "I_BattlePlayerArmyPercentageOfClassAndCategory"
      I_BATTLEENEMYARMYPERCENTAGEOFCLASSANDCATEGORY = "I_BattleEnemyArmyPercentageOfClassAndCategory"
      I_BATTLEPLAYERARMYPERCENTAGEOFSPECIALABILITY = "I_BattlePlayerArmyPercentageOfSpecialAbility"
      I_BATTLEENEMYARMYPERCENTAGEOFSPECIALABILITY = "I_BattleEnemyArmyPercentageOfSpecialAbility"
      I_BATTLEPLAYERARMYPERCENTAGECANHIDE = "I_BattlePlayerArmyPercentageCanHide"
      I_BATTLEENEMYARMYPERCENTAGECANHIDE = "I_BattleEnemyArmyPercentageCanHide"
      I_BATTLEPLAYERARMYPERCENTAGECANSWIM = "I_BattlePlayerArmyPercentageCanSwim"
      I_BATTLEENEMYARMYPERCENTAGECANSWIM = "I_BattleEnemyArmyPercentageCanSwim"
      I_BATTLEPLAYERARMYISATTACKER = "I_BattlePlayerArmyIsAttacker"
      I_BATTLEPLAYERALLIANCEODDSINFAVOUR = "I_BattlePlayerAllianceOddsInFavour"
      I_BATTLEPLAYERALLIANCEODDSAGAINST = "I_BattlePlayerAllianceOddsAgainst"
      TOTALSIEGEWEAPONS = "TotalSiegeWeapons"
      I_BATTLESTARTED = "I_BattleStarted"
      I_BATTLEFINISHED = "I_BattleFinished"
      I_BATTLEEND = "I_BattleEnd"
      I_BATTLEENDPENDING = "I_BattleEndPending"
      I_ISUNITMOVEFASTSET = "I_IsUnitMoveFastSet"
      I_ISUNITMOVING = "I_IsUnitMoving"
      I_ISUNITIDLE = "I_IsUnitIdle"
      I_ISUNITROUTING = "I_IsUnitRouting"
      I_ISUNITUNDERFIRE = "I_IsUnitUnderFire"
      I_ISUNITENGAGED = "I_IsUnitEngaged"
      I_ISUNITENGAGEDWITHUNIT = "I_IsUnitEngagedWithUnit"
      I_UNITFORMATION = "I_UnitFormation"
      I_PERCENTAGEUNITKILLED = "I_PercentageUnitKilled"
      I_UNITPERCENTAGEAMMOLEFT = "I_UnitPercentageAmmoLeft"
      I_UNITDISTANCEFROMPOSITION = "I_UnitDistanceFromPosition"
      I_UNITDISTANCEFROMLINE = "I_UnitDistanceFromLine"
      I_UNITDISTANCEFROMUNIT = "I_UnitDistanceFromUnit"
      I_UNITINRANGEOFUNIT = "I_UnitInRangeOfUnit"
      I_UNITDESTROYED = "I_UnitDestroyed"
      I_UNITENEMYUNITINRADIUS = "I_UnitEnemyUnitInRadius"
      I_ISUNITGROUPMOVING = "I_IsUnitGroupMoving"
      I_ISUNITGROUPENGAGED = "I_IsUnitGroupEngaged"
      I_ISUNITGROUPIDLE = "I_IsUnitGroupIdle"
      I_ISUNITGROUPDESTROYED = "I_IsUnitGroupDestroyed"
      I_PERCENTAGEUNITGROUPKILLED = "I_PercentageUnitGroupKilled"
      I_UNITGROUPFORMATION = "I_UnitGroupFormation"
      I_UNITGROUPDISTANCEFROMPOSITION = "I_UnitGroupDistanceFromPosition"
      I_UNITGROUPDISTANCEFROMGROUP = "I_UnitGroupDistanceFromGroup"
      I_UNITGROUPINRANGEOFUNIT = "I_UnitGroupInRangeOfUnit"
      I_UNITINRANGEOFUNITGROUP = "I_UnitInRangeOfUnitGroup"
      I_UNITGROUPINRANGEOFUNITGROUP = "I_UnitGroupInRangeOfUnitGroup"
      I_PLAYERINRANGEOFUNITGROUP = "I_PlayerInRangeOfUnitGroup"
      I_PLAYERINRANGEOFUNIT = "I_PlayerInRangeOfUnit"
      I_UNITTYPESELECTED = "I_UnitTypeSelected"
      UNITTYPE = "UnitType"
      I_UNITSELECTED = "I_UnitSelected"
      I_MULTIPLEUNITSSELECTED = "I_MultipleUnitsSelected"
      I_SPECIFICUNITSSELECTED = "I_SpecificUnitsSelected"
      I_ISCAMERAZOOMINGTOUNIT = "I_IsCameraZoomingToUnit"
      I_BATTLEENEMYARMYPERCENTAGEOFMATCHINGUNITS = "I_BattleEnemyArmyPercentageOfMatchingUnits"
      I_BATTLEENEMYARMYNUMBEROFMATCHINGUNITS = "I_BattleEnemyArmyNumberOfMatchingUnits"
      I_BATTLEPLAYERARMYPERCENTAGEOFMATCHINGUNITS = "I_BattlePlayerArmyPercentageOfMatchingUnits"
      I_BATTLEPLAYERARMYNUMBEROFMATCHINGUNITS = "I_BattlePlayerArmyNumberOfMatchingUnits"
      LOCALPLAYERHASMANUALREINFORCEMENTS = "LocalPlayerHasManualReinforcements"
      LOCALPLAYERHASAIREINFORCEMENTS = "LocalPlayerHasAIReinforcements"
      TRAIT = "Trait"
      HASANCILLARY = "HasAncillary"
      FATHERTRAIT = "FatherTrait"
      FACTIONLEADERTRAIT = "FactionLeaderTrait"
      ATTRIBUTE = "Attribute"
      REMAININGMPPERCENTAGE = "RemainingMPPercentage"
      I_REMAININGMPPERCENTAGE = "I_RemainingMPPercentage"
      I_CHARACTERCANMOVE = "I_CharacterCanMove"
      NOACTIONTHISTURN = "NoActionThisTurn"
      AGENTTYPE = "AgentType"
      TRAINEDAGENTTYPE = "TrainedAgentType"
      DISASTERTYPE = "DisasterType"
      CULTURETYPE = "CultureType"
      ORIGINALFACTIONTYPE = "OriginalFactionType"
      ORIGINALCULTURETYPE = "OriginalCultureType"
      ISGENERAL = "IsGeneral"
      ISADMIRAL = "IsAdmiral"
      REMASTEREDEDUCATION = "RemasteredEducation"
      ENDEDINSETTLEMENT = "EndedInSettlement"
      ISFACTIONLEADER = "IsFactionLeader"
      ISFACTIONHEIR = "IsFactionHeir"
      ISMARRIED = "IsMarried"
      ATSEA = "AtSea"
      INENEMYLANDS = "InEnemyLands"
      INBARBARIANLANDS = "InBarbarianLands"
      INUNCIVILISEDLANDS = "InUncivilisedLands"
      ISBESIEGING = "IsBesieging"
      ISUNDERSIEGE = "IsUnderSiege"
      I_WITHDRAWSBEFOREBATTLE = "I_WithdrawsBeforeBattle"
      ENDEDINENEMYZOC = "EndedInEnemyZOC"
      ADVISEACTION = "AdviseAction"
      I_CHARACTERTYPENEARCHARACTERTYPE = "I_CharacterTypeNearCharacterType"
      I_CHARACTERTYPENEARTILE = "I_CharacterTypeNearTile"
      I_CHARACTERNAMENEARTILE = "I_CharacterNameNearTile"
      TRADINGRESOURCE = "TradingResource"
      REGIONTRADINGRESOURCE = "RegionTradingResource"
      TRADINGEXOTIC = "TradingExotic"
      DISTANCECAPITAL = "DistanceCapital"
      DISTANCEHOME = "DistanceHome"
      TRADINGGROUP = "TradingGroup"
      REGIONMERCHANTCOUNT = "RegionMerchantCount"
      PRECIOUSMINECOUNT = "PreciousMineCount"
      ISFROMFACTION = "IsFromFaction"
      NIGHTBATTLESENABLED = "NightBattlesEnabled"
      HASOFFICE = "HasOffice"
      FACTIONTYPE = "FactionType"
      TARGETFACTIONTYPE = "TargetFactionType"
      FACTIONCULTURETYPE = "FactionCultureType"
      TARGETFACTIONCULTURETYPE = "TargetFactionCultureType"
      TRAINEDUNITCATEGORY = "TrainedUnitCategory"
      UnitCategory = "UnitCategory"
      SENATEMISSIONTIMEREMAINING = "SenateMissionTimeRemaining"
      MEDIANTAXLEVEL = "MedianTaxLevel"
      MODETAXLEVEL = "ModeTaxLevel"
      I_MODETAXLEVEL = "I_ModeTaxLevel"
      MISSIONSUCCESSLEVEL = "MissionSuccessLevel"
      MISSIONSUCCEEDED = "MissionSucceeded"
      MISSIONFACTIONTARGETTYPE = "MissionFactionTargetType"
      MISSIONCULTURETARGETTYPE = "MissionCultureTargetType"
      DIPLOMATICSTANCEFROMCHARACTER = "DiplomaticStanceFromCharacter"
      DIPLOMATICSTANCEFROMFACTION = "DiplomaticStanceFromFaction"
      FACTIONHASALLIES = "FactionHasAllies"
      LOSINGMONEY = "LosingMoney"
      I_LOSINGMONEY = "I_LosingMoney"
      FACTIONISALIVE = "FactionIsAlive"
      SUPPORTCOSTSPERCENTAGE = "SupportCostsPercentage"
      TREASURY = "Treasury"
      ONAWARFOOTING = "OnAWarFooting"
      I_FACTIONBESIEGING = "I_FactionBesieging"
      I_FACTIONBESIEGED = "I_FactionBesieged"
      I_NUMBEROFSETTLEMENTS = "I_NumberOfSettlements"
      I_NUMBEROFHEIRS = "I_NumberOfHeirs"
      I_FACTIONNEARTILE = "I_FactionNearTile"
      SETTLEMENTSTAKEN = "SettlementsTaken"
      BATTLESFOUGHT = "BattlesFought"
      BATTLESWON = "BattlesWon"
      BATTLESLOST = "BattlesLost"
      DEFENSIVESIEGESFOUGHT = "DefensiveSiegesFought"
      DEFENSIVESIEGESWON = "DefensiveSiegesWon"
      OFFENSIVESIEGESFOUGHT = "OffensiveSiegesFought"
      OFFENSIVESIEGESWON = "OffensiveSiegesWon"
      FACTIONWIDEANCILLARYEXISTS = "FactionwideAncillaryExists"
      ISALLY = "IsAlly"
      ISPROTECTORATE = "IsProtectorate"
      ISPROTECTOR = "IsProtector"
      ISSAMESUPERFACTION = "IsSameSuperfaction"
      LOCALPLAYERBATTLESFOUGHT = "LocalPlayerBattlesFought"
      TOGGLED = "Toggled"
      MAJOREVENTACTIVE = "MajorEventActive"
      RANDOMPERCENT = "RandomPercent"
      TRUECONDITION = "TrueCondition"
      WORLDWIDEANCILLARYEXISTS = "WorldwideAncillaryExists"
      I_ISTUTORIALENABLED = "I_IsTutorialEnabled"
      I_ISPLAYERTURN = "I_IsPlayerTurn"
      CONSTRUCTIONITEMCLICKED = "ConstructionItemClicked"
      RECRUITMENTITEMCLICKED = "RecruitmentItemClicked"
      CHARACTERNAME = "CharacterName"
      SCROLLDIDOPEN = "ScrollDidOpen"
      UNITHASROUTED = "UnitHasRouted"
      BATTLEUNITACTIONSTATUS = "BattleUnitActionStatus"
      I_AMOUNTOFUNITINSETTLEMENT = "I_AmountOfUnitInSettlement"
      I_UNITCARDSELECTED = "I_UnitCardSelected"
      I_COMPARECOUNTER = "I_CompareCounter"
      TESTFACTION = "TestFaction"
      LANGIS = "LangIs"
      I_TIMERELAPSED = "I_TimerElapsed"
      I_SOUNDPLAYING = "I_SoundPlaying"
      HASRESOURCE = "HasResource"
      SETTLEMENTREVOLTINGFROM = "SettlementRevoltingFrom"
      ISCAPITAL = "IsCapital"
      SETTLEMENTNAME = "SettlementName"
      GOVERNORBUILDINGEXISTS = "GovernorBuildingExists"
      SETTLEMENTBUILDINGEXISTS = "SettlementBuildingExists"
      HOMESETTLEMENTBUILDINGEXISTS = "HomeSettlementBuildingExists"
      SETTLEMENTORDERLEVEL = "SettlementOrderLevel"
      SETTLEMENTCAPABILITYLEVEL = "SettlementCapabilityLevel"
      BUILDINGFINISHEDBYGOVERNOR = "BuildingFinishedByGovernor"
      SETTLEMENTBUILDINGFINISHED = "SettlementBuildingFinished"
      GOVERNORPLUGINEXISTS = "GovernorPlugInExists"
      GOVERNORPLUGINFINISHED = "GovernorPlugInFinished"
      GOVERNORTAXLEVEL = "GovernorTaxLevel"
      SETTLEMENTTAXLEVEL = "SettlementTaxLevel"
      GOVERNORINRESIDENCE = "GovernorInResidence"
      GOVERNORLOYALTYLEVEL = "GovernorLoyaltyLevel"
      SETTLEMENTLOYALTYLEVEL = "SettlementLoyaltyLevel"
      RIOTRISK = "RiotRisk"
      BUILDINGQUEUEIDLEDESPITECASH = "BuildingQueueIdleDespiteCash"
      TRAININGQUEUEIDLEDESPITECASH = "TrainingQueueIdleDespiteCash"
      I_SETTLEMENTEXISTS = "I_SettlementExists"
      I_SETTLEMENTOWNER = "I_SettlementOwner"
      I_SETTLEMENTOWNERCULTURE = "I_SettlementOwnerCulture"
      I_SETTLEMENTLEVEL = "I_SettlementLevel"
      ADVISEFINANCIALBUILD = "AdviseFinancialBuild"
      ADVISEBUILD = "AdviseBuild"
      ADVISERECRUIT = "AdviseRecruit"
      SETTLEMENTPOPULATIONMAXEDOUT = "SettlementPopulationMaxedOut"
      SETTLEMENTPOPULATIONTOOLOW = "SettlementPopulationTooLow"
      SETTLEMENTAUTOMANAGED = "SettlementAutoManaged"
      FERALSETTLEMENTAUTOMANAGED = "FeralSettlementAutoManaged"
      PERCENTAGEOFPOPULATIONINGARRISON = "PercentageOfPopulationInGarrison"
      GARRISONTOPOPULATIONRATIO = "GarrisonToPopulationRatio"
      HEALTHPERCENTAGE = "HealthPercentage"
      SETTLEMENTHASPLAGUE = "SettlementHasPlague"
      ISFORTGARRISONED = "IsFortGarrisoned"
      ISSETTLEMENTGARRISONED = "IsSettlementGarrisoned"
      ISSETTLEMENTRIOTING = "IsSettlementRioting"
      I_NUMBERUNITSINSETTLEMENT = "I_NumberUnitsInSettlement"
      I_ADVISORSPEECHPLAYING = "I_AdvisorSpeechPlaying"
      CHARACTERISLOCAL = "CharacterIsLocal"
      TARGETCHARACTERISLOCAL = "TargetCharacterIsLocal"
      SETTLEMENTISLOCAL = "SettlementIsLocal"
      TARGETSETTLEMENTISLOCAL = "TargetSettlementIsLocal"
      REGIONISLOCAL = "RegionIsLocal"
      TARGETREGIONISLOCAL = "TargetRegionIsLocal"
      ARMYISLOCAL = "ArmyIsLocal"
      ARMYISGARRISON = "ArmyIsGarrison"
      TARGETARMYISLOCAL = "TargetArmyIsLocal"
      FACTIONISLOCAL = "FactionIsLocal"
      I_LOCALFACTION = "I_LocalFaction"
      TARGETFACTIONISLOCAL = "TargetFactionIsLocal"
      I_TURNNUMBER = "I_TurnNumber"
      I_MAPNAME = "I_MapName"
      I_THREADCOUNT = "I_ThreadCount"
      I_ISTRIGGERTRUE = "I_IsTriggerTrue"
      INCOMINGMESSAGETYPE = "IncomingMessageType"
      I_ADVISORVERBOSITY = "I_AdvisorVerbosity"
      I_ADVISORVISIBLE = "I_AdvisorVisible"
      I_CHARACTERSELECTED = "I_CharacterSelected"
      I_AGENTSELECTED = "I_AgentSelected"
      I_SETTLEMENTSELECTED = "I_SettlementSelected"
      SHORTCUTTRIGGERED = "ShortcutTriggered"
      I_ADVANCEDSTATSSCROLLISOPEN = "I_AdvancedStatsScrollIsOpen"
      BUTTONPRESSED = "ButtonPressed"
      SCROLLOPENED = "ScrollOpened"
      SCROLLCLOSED = "ScrollClosed"
      SCROLLADVICEREQUESTED = "ScrollAdviceRequested"
      I_ANNOTATIONDISPLAYED = "I_AnnotationDisplayed"
      FERALUITYPE = "FeralUIType"
      MERCHANTISAVAILABLETOBUILD = "MerchantIsAvailableToBuild"
      SETTLEMENTHASDAMAGEDBUILDING = "SettlementHasDamagedBuilding"
      LOCALPLAYERHASREINFORCEMENTS = "LocalPlayerHasReinforcements"
      SETTLEMENTMERCHANTTRADINGWITH = "SettlementMerchantTradingWith"
      SETTLEMENTOWNEDBY = "SettlementOwnedBy"
      FACTIONBUILDINGEXISTS = "FactionBuildingExists"
      // conflict types
      SUCCESSFULAMBUSH = "SuccessfulAmbush"
      FAILEDAMBUSH = "FailedAmbush"
      NORMAL = "Normal"
      SIEGE = "Siege"
      SALLYBESIEGER = "SallyBesieger"
      NAVAL = "Naval"
      WITHDRAW = "Withdraw"
      // battle success
      CLOSE = "close"
      AVERAGE = "average"
      CLEAR = "clear"
      CRUSHING = "crushing"
      // siege_engine_class
      TOWER = "tower"
      RAM = "ram"
      LADDER = "ladder"
      SAP_POINT = "sap_point"
      CATAPULT = "catapult"
      TREBUCHET = "trebuchet"
      BALLISTA = "ballista"
      SCORPION = "scorpion"
      // tower defence type
      ARROW_TOWER = "arrow_tower"
      BALLISTA_TOWER = "ballista_tower"
      // gate defence type
      HOT_SAND = "hot_sand"
      BURNING_OIL = "burning_oil"
      // battle building type
      AMBIENT = "ambient"
      MAJOR = "major"
      WALL = "wall"
      TOWER = "tower"
      GATE = "gate"
      // unit class
      LIGHT="light"
      HEAVY="heavy"
      SKIRMISH = "skirmish"
      MISSILE="missile"
      SPEARMEN="spearmen"
      // unit category
      INFANTRY="infantry"
      CAVALRY="cavalry"
      SIEGE="siege"
      HANDLER="handler"
      SHIP="ship"
      NON_COMBATANT="non_combatant"
      // hide_type
      HIDE_FOREST="hide_forest"
      HIDE_IMPROVED_FOREST="hide_improved_forest"
      HIDE_LONG_GRASS="hide_long_grass"
      HIDE_ANYWHERE="hide_anywhere"
      // formations
      SQUARE="square"
      SQUARE_HOLLOW="square_hollow"
      COLUMN="column"
      HORDE="horde"
      PHALANX="phalanx"
      TESTUDO="testudo"
      WEDGE="wedge"
      SHIELD_WALL="shield_wall"
      SCHILTROM="schiltrom"
      // special abilities
      DROP_ENGINES="drop_engines"
      FLAMING_AMMO="flaming_ammo"
      CHANT="chant"
      CURSE="curse"
      BERSERK="berserk"
      RALLY="rally"
      KILL_ELEPHANTS="kill_elephants"
      MOVE_AND_SHOOT="move_and_shoot"
      CANTABRIAN_CIRCLE="cantabrian_circle"
      STEALTH="stealth"
      FEIGNED_ROUT="feigned_rout"
      // mount_class
      HORSE = "horse"
      CAMEL = "camel"
      ELEPHANT = "elephant"
      CHARIOT = "chariot"
      SCORPION_CART = "scorpion_cart"
      // action status
      IDLING = "idling"
      HIDING = "hiding"
      READY = "ready"
      REFORMING = "reforming"
      MOVING = "moving"
      WITHDRAWING = "withdrawing"
      MISSILES_FIRING = "missiles_firing"
      MISSILES_RELOADING = "missiles_reloading"
      CHARGING = "charging"
      FIGHTING = "fighting"
      PURSUING = "pursuing"
      ROUTING = "routing"
      FIGHTING_BACKS_TO_THE_WALLS = "fighting_backs_to_the_walls"
      RUNNING_AMOK = "running_amok"
      RALLYING = "rallying"
      DEAD = "dead"
      LEAVING_BATTLE = "leaving_battle"
      ENTERING_BATTLE = "entering_battle"
      LEFT_BATTLE = "left_battle"
      // attack direction
      FRONT = "front"
      FLANK = "flank"
      REAR = "rear"
      // disaster_type
      EARTHQUAKE = "earthquake"
      FLOOD = "flood"
      HORDE = "horde"
      FIRE = "fire"
      RIOT = "riot"
      STORM = "storm"
      VOLCANO = "volcano"
      // Character attributes
      COMMAND_UCF="Command"
      INFLUENCE_UCF="Influence"
      MANAGEMENT_UCF="Management"
      SUBTERFUGE_UCF="Subterfuge"
      // character_action_advice
      ATTACK_ENEMY = "attack_enemy"
      ATTACK_SETTLEMENT = "attack_settlement"
      MERGE_ARMIES = "merge_armies"
      PATROL_REGION = "patrol_region"
      MOVE_TO_REGION = "move_to_region"
      DO_NOTHING = "do_nothing"
      // character_type
      ALL="all"
      FAMILY="family"
      NAMED_CHARACTER="named character"
      GENERAL="general"
      ADMIRAL="admiral"
      DIPLOMAT="diplomat"
      SPY="spy"
      ASSASSIN="assassin"
      MERCHANT="merchant"
      // tax_level
      TAX_LOW = "tax_low"
      TAX_NORMAL = "tax_normal"
      TAX_HIGH = "tax_high"
      TAX_EXTORTIONATE = "tax_extortionate"
      // success_level
      NOT_SUCCESSFUL = "not_successful"
      SLIGHTLY_SUCCESSFUL = "slightly_successful"
      PARTLY_SUCCESSFUL = "partly_successful"
      HIGHLY_SUCCESSFUL = "highly_successful"
      // diplomatic_stance
      ALLIED = "Allied"
      SUSPICIOUS = "Suspicious"
      NEUTRAL = "Neutral"
      HOSTILE = "Hostile"
      ATWAR = "AtWar"
      // loyalty_to_governor_level
      LOYALTY_REVOLTING = "loyalty_revolting"
      LOYALTY_RIOTING = "loyalty_rioting"
      LOYALTY_DISILLUSIONED = "loyalty_disillusioned"
      LOYALTY_CONTENT = "loyalty_content"
      LOYALTY_HAPPY = "loyalty_happy"
      // automanage_type
      TROOPS = "Troops"
      BUILDINGS = "Buildings"
      MECHANICS = "Mechanics"

      // commands
      SENATE_MISSION_HELP_PLAYER="senate_mission_help_player"
      SENATE_MISSION_ASSASSINATION="senate_mission_assassination"
      SENATE_MISSION_CEASE_HOSTILITIES="senate_mission_cease_hostilities"
      SENATE_MISSION_DECLARE_WAR="senate_mission_declare_war"
      SENATE_MISSION_BROKER_PEACE="senate_mission_broker_peace"
      SENATE_MISSION_TAKE_CITY="senate_mission_take_city"
      MOVE_TO_SETTLEMENT="move_to_settlement"
      SNAP_TO_SETTLEMENT="snap_to_settlement"
      CLEAR_RESTRICT_STRAT_MOVEMENT="clear_restrict_strat_movement"
      RESTRICT_STRAT_MOVEMENT="restrict_strat_movement"
      DISABLE_DIPLOMACY_UI="disable_diplomacy_ui"
      ENABLE_DIPLOMACY_VOICES="enable_diplomacy_voices"
      ENABLE_UNIT_VOICES="enable_unit_voices"
      HIDE_UI_ELEMENT="hide_ui_element"
      SHOW_UI_ELEMENT="show_ui_element"
      ENABLE_UI_CARD="enable_ui_card"
      DISABLE_UI_CARD="disable_ui_card"
      DISABLE_ALL_UI_CARDS="disable_all_ui_cards"
      ENABLE_ALL_UI_CARDS="enable_all_ui_cards"
      DISABLE_AGENT_HUB_ALL="disable_agent_hub_all"
      ENABLE_AGENT_HUB_ALL="enable_agent_hub_all"
      DISABLE_AGENT_HUB="disable_agent_hub"
      ENABLE_AGENT_HUB="enable_agent_hub"
      POINT_AT_AGENT_HUB="point_at_agent_hub"
      SET_MARRIAGE_ALLOWED="set_marriage_allowed"
      TRIGGER_MARRIAGE_PROPOSAL="trigger_marriage_proposal"
      DESELECT_CURRENT_SELECTION="deselect_current_selection"
      FORCE_AUTORESOLVE_OUTCOME="force_autoresolve_outcome"
      FORCE_DIPLOMACY="force_diplomacy"
      CREATE_MERCENARY_POOL="create_mercenary_pool"
      FORCE_AGENT_SUCCEED="force_agent_succeed"
      ALLOW_CAMPAIGN_BATTLES="allow_campaign_battles"
      SPAWN_CHARACTER_CHILD="spawn_character_child"
      STOP_POINT_AT_INDICATOR="stop_point_at_indicator"
      STOP_ALL_POINT_AT_INDICATORS="stop_all_point_at_indicators"
      SET_BATTLE="set_battle"
      RESTRICT_BATTLE_MOVEMENT="restrict_battle_movement"
      CLEAR_RESTRICT_BATTLE_MOVEMENT="clear_restrict_battle_movement"
      POINT_AT_DIPLOMACY_OFFER="point_at_diplomacy_offer"
      POINT_AT_MOVE_RETINUE="point_at_move_retinue"
      DISABLE_MOVE_RETINUE_ALL="disable_move_retinue_all"
      ENABLE_MOVE_RETINUE_ALL="enable_move_retinue_all"
      DISABLE_MOVE_RETINUE="disable_move_retinue"
      ENABLE_MOVE_RETINUE="enable_move_retinue"
      BLOCK_UNIT_SELECTION="block_unit_selection"
      FORCED_GATE_SUCCESS="forced_gate_success"
      STRAT_SELECTION_UNBLOCKER="strat_selection_unblocker"
      CLEAR_STRAT_SELECTION_UNBLOCKER="clear_strat_selection_unblocker"
      OPEN_STOP_TUTORIAL_CONFIRMATION_DIALOG="open_stop_tutorial_confirmation_dialog"
      SET_LABEL="set_label"
      GOTO="goto"
      FORCE_DESELECT_TRIGGER="force_deselect_trigger"
      BOX_DRAG_SELECTION="box_drag_selection"
      FORCE_SETTLEMENT_TAB="force_settlement_tab"
      CLICK_DRAG_MOVE="click_drag_move"
      TOGGLE_MINIMAP="toggle_minimap"
      CLOSE_NEWS_PANEL="close_news_panel"
      UI_CARD_SELECTION_LOCK="ui_card_selection_lock"
      DISABLE_SPECIFIC_SHORTCUT="disable_specific_shortcut"
      SET_ADVICE_PAGE="set_advice_page"
      ADVANCE_COMPLETED_TASKS="advance_completed_tasks"
      SET_MIN_FORMATION_WIDTH="set_min_formation_width"
      SCRIPT_LOG="script_log"
      AI_ACTIVE_SET="ai_active_set"
      RELEASE_UNIT="release_unit"
      HIDING_ENABLED_SET="hiding_enabled_set"
      SWIMMING_ENABLED_SET="swimming_enabled_set"
      PAUSE_BATTLE="pause_battle"
      UNIT_IMMEDIATE_PLACE="unit_immediate_place"
      UNIT_ORDER_HALT="unit_order_halt"
      UNIT_ORDER_MOVE="unit_order_move"
      UNIT_ORDER_MOVE_TO_ORIENTATION="unit_order_move_to_orientation"
      UNIT_ORDER_MOVE_RELATIVE="unit_order_move_relative"
      UNIT_ORDER_ATTACK_UNIT="unit_order_attack_unit"
      UNIT_ORDER_ATTACK_CLOSEST_UNIT="unit_order_attack_closest_unit"
      UNIT_ORDER_CHANGE_FORMATION="unit_order_change_formation"
      UNIT_ORDER_MOVE_TO_MISSILE_RANGE="unit_order_move_to_missile_range"
      UNIT_ORDER_TURN="unit_order_turn"
      UNIT_SET_MORALE="unit_set_morale"
      UNIT_UNSET_MORALE="unit_unset_morale"
      UNIT_SET_WEAPON_UPGRADE="unit_set_weapon_upgrade"
      UNIT_SET_ARMOUR_UPGRADE="unit_set_armour_upgrade"
      UNIT_SET_EXPERIENCE="unit_set_experience"
      KILL_UNIT="kill_unit"
      REDUCE_UNIT_STRENGTH="reduce_unit_strength"
      UNIT_SET_GUARD_MODE="unit_set_guard_mode"
      UNIT_SET_SKIRMISH_MODE="unit_set_skirmish_mode"
      UNIT_SET_FIRE_AT_WILL_MODE="unit_set_fire_at_will_mode"
      UNIT_SET_FORMATION_SPACING="unit_set_formation_spacing"
      UNIT_TAUNT="unit_taunt"
      UNIT_USE_SPECIAL_ABILITY="unit_use_special_ability"
      UNIT_GROUP_ENABLE_AUTOMATION="unit_group_enable_automation"
      UNIT_GROUP_AUTOMATE_DEFEND_POSITION="unit_group_automate_defend_position"
      UNIT_GROUP_AUTOMATE_ATTACK="unit_group_automate_attack"
      UNIT_GROUP_IMMEDIATE_PLACE="unit_group_immediate_place"
      UNIT_GROUP_ORDER_HALT="unit_group_order_halt"
      UNIT_GROUP_ORDER_MOVE_FORMED="unit_group_order_move_formed"
      UNIT_GROUP_ORDER_MOVE_UNFORMED="unit_group_order_move_unformed"
      UNIT_GROUP_ORDER_RELATIVE_MOVE_FORMED="unit_group_order_relative_move_formed"
      UNIT_GROUP_ORDER_RELATIVE_MOVE_UNFORMED="unit_group_order_relative_move_unformed"
      UNIT_GROUP_MOVE_TO_MISSILE_RANGE_OF_UNIT="unit_group_move_to_missile_range_of_unit"
      UNIT_GROUP_MOVE_TO_MISSILE_RANGE_OF_GROUP="unit_group_move_to_missile_range_of_group"
      UNIT_GROUP_ORDER_ATTACK_UNIT="unit_group_order_attack_unit"
      UNIT_GROUP_ORDER_ATTACK_GROUP="unit_group_order_attack_group"
      UNIT_GROUP_ORDER_CHANGE_GROUP_FORMATION="unit_group_order_change_group_formation"
      UNIT_GROUP_ORDER_TURN="unit_group_order_turn"
      UNIT_GROUP_SET_MORALE="unit_group_set_morale"
      UNIT_GROUP_UNSET_MORALE="unit_group_unset_morale"
      UNIT_GROUP_CHANGE_UNIT_FORMATION="unit_group_change_unit_formation"
      UNIT_GROUP_SET_GUARD_MODE="unit_group_set_guard_mode"
      UNIT_GROUP_SET_SKIRMISH_MODE="unit_group_set_skirmish_mode"
      UNIT_GROUP_SET_FIRE_AT_WILL_MODE="unit_group_set_fire_at_will_mode"
      UNIT_GROUP_SET_FORMATION_SPACING="unit_group_set_formation_spacing"
      FORCE_AI_CONTROL="force_ai_control"
      FINISH_BATTLE="finish_battle"
      MOVE_STRAT_CAMERA="move_strat_camera"
      SET_STRAT_CAMERA_SPEED="set_strat_camera_speed"
      SNAP_STRAT_CAMERA="snap_strat_camera"
      ZOOM_STRAT_CAMERA="zoom_strat_camera"
      CAMERA_RESTRICTIONS_SET="camera_restrictions_set"
      CAMERA_EVENT_CUTS_ACTIVE_SET="camera_event_cuts_active_set"
      CAMERA_DEFAULT_MODE_SET="camera_default_mode_set"
      BATTLE_DEFAULT_CAMERA="battle_default_camera"
      BATTLE_GENERAL_CAMERA="battle_general_camera"
      SET_CAMERA_BOOKMARK="set_camera_bookmark"
      USE_CAMERA_BOOKMARK="use_camera_bookmark"
      CAMERA_POSITION_AT_BOOKMARK_="camera_position_at_bookmark"
      CAMERA_ZOOM_TO_BOOKMARK="camera_zoom_to_bookmark"
      CAMERA_POSITION="camera_position"
      CAMERA_ZOOM_TO="camera_zoom_to"
      CAMERA_LOOK_AT_POSITION="camera_look_at_position"
      CAMERA_LOOK_AT_UNIT="camera_look_at_unit"
      CAMERA_TRACK_UNIT="camera_track_unit"
      CAMERA_ZOOM_TO_UNIT="camera_zoom_to_unit"
      E_CAMERA_ZOOM_TO_UNIT="e_camera_zoom_to_unit"
      INHIBIT_CAMERA_INPUT="inhibit_camera_input"
      DECLARE_PROLOGUE="declare_prologue"
      TERMINATE_PROLOGUE="terminate_prologue"
      PROVOKE_REBELLION="provoke_rebellion"
      MOVE="move"
      REPOSITION_CHARACTER="reposition_character"
      REPLENISH_ACTION_POINTS="replenish_action_points"
      REPLENISH_UNITS="replenish_units"
      SPAWN_CHARACTER="spawn_character"
      SPAWN_ARMY="spawn_army"
      ENGAGE_ARMIES="engage_armies"
      DISABLE_POPUPS="disable_popups"
      START_BENCHMARK="start_benchmark"
      END_BENCHMARK="end_benchmark"
      DISABLE_PAUSE_SHORTCUT_IN_CAMPAIGN="disable_pause_shortcut_in_campaign"
      OVERRIDE_SUPERFACTION_POPULARITY="override_superfaction_popularity"
      SET_FACTION_SENATE_STANDING="set_faction_senate_standing"
      SET_FACTION_PEOPLE_STANDING="set_faction_people_standing"
      MESSAGE_PROMPT="message_prompt"
      INCLUDE_SCRIPT="include_script"
      TERMINATE_SCRIPT="terminate_script"
      BREAK="break"
      SPAWN_BATTLE="spawn_battle"
      END_BATTLE="end_battle"
      SET_AO_VISIBLE="set_ao_visible"
      SET_ALL_AO_VISIBLE="set_all_ao_visible"
      MONITOR_CONDITIONS="monitor_conditions"
      MONITOR="monitor"
      MONITOR_EVENT="monitor_event"
      END_MONITOR="end_monitor"
      TERMINATE_MONITOR="terminate_monitor"
      CONSOLE_COMMAND="console_command"
      DECLARE_COUNTER="declare_counter"
      DECLARE_PERSISTENT_COUNTER="declare_persistent_counter"
      INC_COUNTER="inc_counter"
      SET_COUNTER="set_counter"
      COUNTER_OPERATION="counter_operation"
      STORE_COUNTER="store_counter"
      RETRIEVE_COUNTER="retrieve_counter"
      PREPARE_FOR_BATTLE="prepare_for_battle"
      DECLARE_SHOW_ME="declare_show_me"
      LABEL_UNIT="label_unit"
      LABEL_LOCATION="label_location"
      DEFINE_UNIT_GROUP="define_unit_group"
      UNDEFINE_UNIT_GROUP="undefine_unit_group"
      REMOVE_UNIT_FROM_GROUP="remove_unit_from_group"
      DECLARE_TIMER="declare_timer"
      RESTART_TIMER="restart_timer"
      HEED_PAUSE="heed_pause"
      WAIT="wait"
      CAMPAIGN_WAIT="campaign_wait"
      BATTLE_WAIT="battle_wait"
      SUSPEND_DURING_BATTLE="suspend_during_battle"
      SET_MUSIC_STATE="set_music_state"
      RELEASE_MUSIC_CONTROL="release_music_control"
      PLAY_SOUND_EVENT="play_sound_event"
      PLAY_SOUND_FLOURISH="play_sound_flourish"
      STOP_SOUND_EVENT="stop_sound_event"
      POINT_AT_CHARACTER="point_at_character"
      POINT_AT_SETTLEMENT="point_at_settlement"
      E_POINT_AT_SETTLEMENT="e_point_at_settlement"
      POINT_AT_STRAT_POSITION="point_at_strat_position"
      POINT_AT_STRAT_POSITION_ALT="point_at_strat_position_alt"
      POINT_AT_MESSAGE="point_at_message"
      UI_FLASH_START="ui_flash_start"
      UI_FLASH_STOP="ui_flash_stop"
      SETTLEMENT_FLASH_START="settlement_flash_start"
      SETTLEMENT_FLASH_STOP="settlement_flash_stop"
      CHARACTER_FLASH_START="character_flash_start"
      CHARACTER_FLASH_STOP="character_flash_stop"
      POINT_AT_LOCATION="point_at_location"
      POINT_AT_UNIT_POS="point_at_unit_pos"
      POINT_AT_UNIT_GROUP_POS="point_at_unit_group_pos"
      REMOVE_BATTLE_MAP_ARROW="remove_battle_map_arrow"
      POINT_AT_CARD="point_at_card"
      POINT_AT_UNIT_CARD="point_at_unit_card"
      E_POINT_AT_UNIT_CARD="e_point_at_unit_card"
      SHOW_MOUSE_BUTTON_ANIMATION="show_mouse_button_animation"
      SHOW_MOVIE="show_movie"
      HIDE_UI="hide_ui"
      SHOW_UI="show_ui"
      DISABLE_UI="disable_ui"
      ENABLE_UI="enable_ui"
      DISABLE_ENTIRE_UI="disable_entire_ui"
      ENABLE_ENTIRE_UI="enable_entire_ui"
      SET_CARDS_SELECTABLE="set_cards_selectable"
      DISABLE_CURSOR="disable_cursor"
      ENABLE_CURSOR="enable_cursor"
      RENAME_SETTLEMENT_IN_REGION="rename_settlement_in_region"
      ADD_RELIGION="add_religion"
      ADD_HIDDEN_RESOURCE="add_hidden_resource"
      REMOVE_HIDDEN_RESOURCE="remove_hidden_resource"
      DESTROY_BUILDING="destroy_building"
      REVEAL_TILE="reveal_tile"
      HIDE_ALL_REVEALED_TILES="hide_all_revealed_tiles"
      PLAY_VIDEO="play_video"
      ADVANCE_ADVICE_THREAD="advance_advice_thread"
      DISMISS_ADVICE="dismiss_advice"
      DISMISS_ADVISOR="dismiss_advisor"
      SUSPEND_UNSCRIPTED_ADVICE="suspend_unscripted_advice"
      SELECT_CHARACTER="select_character"
      E_SELECT_CHARACTER="e_select_character"
      SELECT_SETTLEMENT="select_settlement"
      E_SELECT_SETTLEMENT="e_select_settlement"
      CALL_OBJECT_SHORTCUT="call_object_shortcut"
      SIMULATE_MOUSE_CLICK="simulate_mouse_click"
      SELECT_UI_ELEMENT="select_ui_element"
      DISABLE_SHORTCUTS="disable_shortcuts"
      FILTER_UNIT_COMMANDS="filter_unit_commands"
      FILTER_UNIT_GROUP_COMMANDS="filter_unit_group_commands"
      FILTER_UNIT_SELECTION_COMMANDS="filter_unit_selection_commands"
      FILTER_SETTLEMENT_COMMANDS="filter_settlement_commands"
      FILTER_CHARACTER_COMMANDS="filter_character_commands"
      FILTER_ALL_UI_COMMANDS="filter_all_ui_commands"
      UI_INDICATOR="ui_indicator"
      UI_INDICATOR_REMOVE="ui_indicator_remove"
      STEAL_ESC_KEY="steal_esc_key"
      HIGHLIGHT_RECRUITMENT_ITEM="highlight_recruitment_item"
      HIGHLIGHT_CONSTRUCTION_ITEM="highlight_construction_item"
      SHOW_ANNOTATIONS="show_annotations"
      E_SELECT_UNIT="e_select_unit"
      OPEN_SIEGE_SCROLL="open_siege_scroll"
      CONTROL_FERAL_ANIM="control_feral_anim"
      SELECT_CAPTIAL="select_captial"
      SHOW_BUILDING_INFO="show_building_info"
      SHOW_UNIT_INFO="show_unit_info"
      TACTICAL_VIEW_LOCKED="tactical_view_locked"

      // console commands
      KILL_CHARACTER="kill_character"
      GIVE_TRAIT="give_trait"
      GIVE_ANCILLARY="give_ancillary"
      PROCESS_CQ="process_cq"
      ADD_POPULATION="add_population"
      CAPTURE_SETTLEMENT="capture_settlement"
      ADD_MONEY="add_money"
      DIPLOMATIC_STANCE="diplomatic_stance"
      DATE="date"
      SEASON="season"
      CREATE_BUILDING="create_building"
      CREATE_UNIT="create_unit"
      DESTROY_UNIT="destroy_unit"
      SUDO="sudo"
      QUIT_GAME="quit_game"
      TOGGLE_FOW="toggle_fow"
      SET_FOW="set_fow"
      FORCE_BATTLE_VICTORY="force_battle_victory"
      BECOME_PROTECTOR="become_protector"
      INVULNERABLE_GENERAL="invulnerable_general"
      PROVOKE_REBELLION="provoke_rebellion"
      CHANGE_CHARACTER_FACTION="change_character_faction"
      ADD_INCOME="add_income"
      ADD_EXPENDITURE="add_expenditure"
      DISABLE_AI="disable_ai"
      SURRENDER_REGIONS="surrender_regions"
      RUN_AI="run_ai"
      GIVE_EVERYTHING="give_everything"
      CONTROL="control"

      // scripts
      SCRIPT="script"
      END_SCRIPT="end_script"
      RETURN="return"
      IF="if"
      IF_NOT="if_not"
      END_IF="end_if"
      WHILE="while"
      WHILE_NOT="while_not"
      END_WHILE="end_while"
      FOR_EACH="for_each"
      IN="in"
      END_FOR="end_for"
      WORLD="world"

      // command params
      LOCAL_CHARACTER="local_character"
      LOCAL_FACTION="local_faction"
      LOCAL_SETTLEMENT="local_settlement"
      LABEL="label"
      CHARACTER_UCF="Character"
      ON="on"
      OFF="off"
      CIRCLE="circle"
      ARROW="arrow"
      ACCEPT="accept"
      REJECT="reject"
      SHOW="show"
      HIDE="hide"
      UNITS="units"
      BUILDINGS="buildings"
      PASSENGERS="passengers"
      UP="up"
      DOWN="down"
      BACK="back"
      LEFT="left"
      RIGHT="right"
      TOP_LEFT="top_left"
      TOP_RIGHT="top_right"
      BOT_LEFT="bot_left"
      BOT_RIGHT="bot_right"
      RUN="run"
      WALK="walk"
      ABSOLUTE="absolute"
      LOOSE="loose"
      TIGHT="tight"
      BESERK="beserk"
      HIGH="high"
      FIRM="firm"
      SHAKEN="shaken"
      WAVERING="wavering"
      TW="tw"
      RTS="rts"
      USER_PREF="user_pref"
      ALLIED="allied"
      NEUTRAL="neutral"

      // â ÃÃ¶Ã.Ã­Ã«Ã© are in descr_names. Maybe just typos.
      ID = "regexp:[a-zA-Z0-9_+\-!?'â ÃÃ¶Ã.Ã­Ã«Ã©]+"
    ]
}

RRFile ::= descr_strat|
          export_descr_unit|
          export_descr_buildings|
          export_descr_ancillaries|
          export_descr_traits|
          descr_regions|
          descr_mercenaries|
          descr_names|
          descr_unit_variation|
          export_buildings|
          descr_cultures|
          feral_descr_ai_personality|
          descr_faction_groups|
          descr_sm_factions|
          descr_sm_resources|
          feral_descr_portraits_variation|
          descr_banners|
          descr_character|
          descr_building_battle|
          descr_lbc_db|
          descr_model_battle|
          descr_model_strat|
          descr_offmap_models|
          descr_sm_landmarks|
          descr_disasters|
          descr_mount|
          descr_rebel_factions|
          descr_items|
          descr_sm_ambient_objects|
          descr_beliefs|
          text_mapping_format|
          enums_format|
          kv_format|
          script_|

// ############### descr_strat start ###############################
descr_strat ::= DESCR_STRAT_MARKER
                campaign_section
                landmark_section?
                resources_section
                ambient_objects
                sound_emitters_section?
                events_section?
                factions_section
                diplomacy_section
                (SPAWN_SCRIPT faction_ref COMMA REVOLT COMMA txt_file_)*
                 SCRIPT txt_file_ (COMMA ONCE_ONLY)?

private season_enum ::= (SPRING|SUMMER|WINTER|AUTUMN)

campaign_section ::= CAMPAIGN ID
                     OPTIONS_BI?
                     PLAYABLE faction_ref* END
                     UNLOCKABLE faction_ref* END
                     NONPLAYABLE faction_ref* END
                     START_DATE INT season_enum
                     END_DATE INT season_enum
                     MARIAN_REFORMS_DISABLED?
                     (BRIGAND_SPAWN_VALUE INT)?
                     (PIRATE_SPAWN_VALUE INT)?
                     {recoverWhile=recover_campaign_section}
private recover_campaign_section ::= !(landmark_section)

landmark_section ::= landmark_item*
landmark_item ::= LANDMARK wonder_ref coords

resources_section ::= (resource_quantity_enabled_ resource_quantity_disabled_)|resource_item*
resource_quantity_enabled_ ::= RESOURCE_QUANTITY_ENABLED resource_item* END
resource_quantity_disabled_ ::= RESOURCE_QUANTITY_DISABLED resource_item* END
resource_item ::= RESOURCE resource_ref COMMA (INT COMMA coords|coords) {pin=1 recoverWhile=recover_resource_item}
private recover_resource_item ::= !(resource_item|ambient_object_|END|FACTION)

ambient_objects ::= ambient_object_*
ambient_object_ ::= AMBIENT_OBJECT ambient_object_ref COMMA (TAG STRING COMMA)? coords_with_xy COMMA INDEX INT

sound_emitters_section ::=
events_section ::=

factions_section ::= faction_item+
faction_item ::= FACTION faction_ref COMMA ai_personality_ref
                                 (AI_DO_NOT_ATTACK faction_ref)?
                                 (AI_DO_NOT_ATTACK_FACTION faction_ref)?
                                 (SUPERFACTION ID)?
                                 DEAD_UNTIL_RESURRECTED?
                                 DENARI INT
                                 settlement_item*
                                 character_item*
                                 character_record_item*
                                 relative_item*  {pin=1 recoverWhile=faction_recover}
private faction_recover ::= !(FACTION|CORE_ATTITUDES)

settlement_item ::= SETTLEMENT OCB
                      LEVEL settlement_level
                      REGION region_ref
                      YEAR_FOUNDED INT
                      POPULATION INT
                      (SETTLEMENT_TAX INT)?
                      PLAN_SET settlement_plan
                      FACTION_CREATOR faction_ref
                      building_item*
                    CCB
                    {methods=[name]}
settlement_level ::= VILLAGE|TOWN|LARGE_TOWN|CITY|LARGE_CITY|HUGE_CITY
settlement_plan ::= DEFAULT_SET|

building_item ::= BUILDING OCB building_info CCB {pin=2}
private building_info ::= TYPE building_tree_ref building_level_ref  {pin=1 recoverWhile=not_CCB}
private not_CCB ::= !CCB

character_item ::= CHARACTER COMMA?
                   (SUB_FACTION ID COMMA)?
                   name_ COMMA
                   character_type COMMA
                   ((LEADER|HEIR) COMMA)?
                   (character_skills COMMA?)?
                   AGE INT COMMA COMMA
                   coords_with_xy
                   (COMMA PORTRAIT_INDEX INT)?

                   (TRAITS <<optional_commas_list (trait_ref INT)>>)?
                   (ANCILLARIES <<list ancillary_ref>>)?
                   (ARMY army_unit_item*)?
army_unit_item ::= UNIT unit_ref EXP INT ARMOUR INT WEAPON_LVL INT

character_record_item ::= CHARACTER_RECORD name_ COMMA
                     (MALE|FEMALE) COMMA
                     character_skills COMMA
                     AGE INT COMMA
                     (ALIVE|DEAD INT)
                     (COMMA (NEVER_A_LEADER|PAST_LEADER))?

character_attribute ::= COMMAND_UCF|INFLUENCE_UCF|MANAGEMENT_UCF|SUBTERFUGE_UCF
character_skills ::= COMMAND INT COMMA INFLUENCE INT COMMA MANAGEMENT INT COMMA SUBTERFUGE INT
relative_item ::= RELATIVE name_ COMMA name_ COMMA (<<list name_>> COMMA?)? end

diplomacy_section ::= core_attitudes_item+
                      faction_relationships_item+
                      superfaction_setup_item*

core_attitudes_item ::= CORE_ATTITUDES faction_ref COMMA INT <<list faction_ref>> {pin=1 recoverWhile=core_attitudes_recover}
private core_attitudes_recover ::= !(CORE_ATTITUDES|FACTION_RELATIONSHIPS)

faction_relationships_item ::= FACTION_RELATIONSHIPS faction_ref COMMA (INT|ALLIED_TO|AT_WAR_WITH) <<list faction_ref>> {pin=1 recoverWhile=faction_relationships_recover}
private faction_relationships_recover ::= !(FACTION_RELATIONSHIPS|SUPERFACTION_SETUP|SCRIPT)

superfaction_setup_item ::= SUPERFACTION_SETUP ID
                            (DEFAULT_HOSTILE faction_ref)*
                            mission_queue_item*
mission_queue_item ::= MISSION_QUEUE faction_ref OCB mission_* CCB
mission_ ::= ID INT ID (ID)?

name_ ::= safe_id+
private safe_id ::= ID|keywords_that_may_be_in_ids
// TODO: Go through all tokens and add dangerous ones here.
// Then on highlighting make all unit_reds/decls have identifier color.
// Then rethink sublexers.
keywords_that_may_be_in_ids ::= TRADE|DISCIPLINED|UNTRAINED|TRAINED|ANIMAL|LOCAL|GENERAL|ELEPHANT|HEAVY|LIGHT|INFANTRY|CAVALRY|ALLIED|CITY|BALLISTA|BERSERKER|HORSE|X|VILLAGE|TOWN|ARMY|LEADER|ARMOUR|DRUID|KNIFE|MACE|CLUB|AXE|SWORD|SPEAR|MERCENARIES|LARGE|CIVILIAN|MEDIUM|PIRATES|BRIGANDS|NORMAL|CATAPULT|TREBUCHET|SCORPION|HORDE|PHALANX|SPEARMEN|SIEGE|CHARIOT|CAMEL
// ############### descr_strat end #################################

// ############### export_descr_unit start ###############################
export_descr_unit ::= unit_item_+
unit_item_ ::= TYPE unit_name_decl
               DICTIONARY ID
               CATEGORY unit_category
               CLASS unit_class
               VOICE_TYPE ID culture_ref?
               (VOICE_INDEXES INT INT INT)?
               rebalance_block
               (RECRUIT_PRIORITY_OFFSET INT)?
               OWNERSHIP <<list faction_or_culture_ref>> COMMA?
               (ETHNICITY faction_ref COMMA ethnicity_makeup_ref
                         (COMMA (DONT_ALLOW_MIXED|DONT_ALLOW_REGIONAL|DONT_ALLOW_CUSTOM))*
                         (TATTOO_COLOR ID)?
                         (UNIQUE_TATTOO INT)?
                         (EXCLUDE_TATTOO ID)?
                         (HAIR_COLOR ID)?
                         (HAIR_STYLE INT)?
                         (IS_FEMALE)?)*
               (REBALANCE_STATBLOCK rebalance_block)?
               {pin=2}

unit_name_decl ::= name_ {implements="rr.language.psi.RRNamedElement" methods=[setName getName getNameIdentifier]}
unit_ref ::= name_ {methods=[setName getReference]}
str_unit_ref ::= STRING {methods=[setName getReference]}
faction_or_culture_ref ::= ID {methods=[setName getReference]}

private soldier_ ::= SOLDIER model_ref COMMA INT COMMA INT COMMA number
private soldiers_ ::= SOLDIERS INT COMMA INT COMMA number OCB
                       DEFAULT_LC OCB
                         model_ref+
                       CCB
                      CCB

rebalance_block ::= (soldier_|soldiers_)
                    (ENGINE ID)?
                    (SHIP name_)?
                    (ANIMAL ID)?
                    (
                      MOUNT mount_ref|
                      OFFICER ID*
                    )* // RTR has them reversed in order
                    (MOUNT_EFFECT  <<list (mount_class INT)>>)?
                    ATTRIBUTES list_of_unit_attributes
                    FORMATION number COMMA number COMMA number COMMA number COMMA INT COMMA unit_formations
                    STAT_HEALTH INT COMMA INT
                    STAT_PRI unit_weapon_info
                    STAT_PRI_ATTR (NO|list_of_unit_weapon_attributes)
                    STAT_SEC (NO|unit_weapon_info)
                    STAT_SEC_ATTR (NO|list_of_unit_weapon_attributes)
                    STAT_PRI_ARMOUR INT COMMA INT COMMA INT COMMA unit_sound_when_hit (COMMA unit_sound_when_hit)?
                    STAT_SEC_ARMOUR INT COMMA INT COMMA unit_sound_when_hit
                    STAT_HEAT INT
                    STAT_GROUND INT COMMA INT COMMA INT COMMA INT
                    STAT_MENTAL INT COMMA unit_discipline COMMA unit_training
                    STAT_CHARGE_DIST INT
                    STAT_FIRE_DELAY INT
                    STAT_FOOD INT COMMA INT
                    STAT_COST INT COMMA INT COMMA INT COMMA INT COMMA INT COMMA INT
                    {pin=1}


unit_attribute ::= hide_type|
                    FRIGHTEN_FOOT|FRIGHTEN_MOUNTED|CAN_RUN_AMOK|WARCRY|
                    CAN_SAP|HARDY|VERY_HARDY|POWER_CHARGE|SEA_FARING|CANTABRIAN_CIRCLE|
                    GENERAL_UNIT|GENERAL_UNIT_UPGRADE|COMMAND|MERCENARY_UNIT|DRUID|SCREECHING_WOMEN|
                    NO_CUSTOM|IS_PEASANT|CAN_HORDE|CAN_SWIM|LEGIONARY_NAME
list_of_unit_attributes ::= <<list unit_attribute>> COMMA? {recoverWhile=not_formation}
private not_formation ::= !FORMATION
unit_formations::=  unit_formation (COMMA unit_formation)? {recoverWhile=not_stat_health}
private not_stat_health ::= !STAT_HEALTH

unit_weapon_info::=  INT COMMA
                     INT COMMA
                     (NO|ID) COMMA // descr_projectile and descr_projectile_new
                     INT COMMA
                     INT COMMA
                     (NO|unit_weapon_type) COMMA
                     (NO|unit_tech_type)  COMMA
                     (NO|unit_damage_type) COMMA
                     unit_damage_sound_type COMMA
                     INT COMMA
                     number
                     {pin=10 recoverWhile=recover_stat_pri_attr}
private recover_stat_pri_attr ::= !(STAT_PRI_ATTR|STAT_SEC_ATTR)

unit_weapon_type::=  MELEE|THROWN|MISSILE|SIEGE_MISSILE
unit_tech_type::=  SIMPLE|OTHER|BLADE|ARCHERY|SIEGE
unit_damage_type::=  PIERCING|BLUNT|SLASHING|FIRE
unit_damage_sound_type::=  NONE|KNIFE|MACE|CLUB|AXE|SWORD|SPEAR
unit_weapon_attrs ::= AP|BP|SPEAR|LIGHT_SPEAR|LONG_PIKE|SHORT_PIKE|FIRE|
                      PREC|THROWN|THROWN_AP|LAUNCHING|AREA|SPEAR_BONUS_X
list_of_unit_weapon_attributes ::= <<list unit_weapon_attrs>>

unit_sound_when_hit ::= FLESH|LEATHER|WOOD|METAL
unit_discipline ::= BERSERKER|IMPETUOUS|LOW|NORMAL|DISCIPLINED
unit_training ::= UNTRAINED|TRAINED|HIGHLY_TRAINED
// ############### export_descr_unit end #################################

// ############### export_descr_buildings start ###############################
export_descr_buildings ::= tags_
                           condition_alias*
                           building_tree+

tags_ ::= TAGS OCB <<list ID>> CCB {pin=1}

condition_alias ::= ALIAS ID OCB
                       requirement
                       (DISPLAY_STRING ID)?
                     CCB {pin=1 recoverWhile=aliasRecover}
private aliasRecover ::= !(condition_alias|building_tree)

building_tree ::= BUILDING building_tree_name_decl OCB
                        (CLASSIFICATION building_category)?
                        (TAG ID)?
                        (ICON tga_file_)?
                        LEVELS building_level_ref+ OCB
                          building_level+
                        CCB
                        PLUGINS OCB CCB
                      CCB {pin=1}
building_category ::= CORE|DEFENCE|MILITARY|TRADE|WATER|CULTURE|RELIGIOUS|
building_tree_name_decl ::= ID {implements="rr.language.psi.RRNamedElement" methods=[setName getName getNameIdentifier]}
building_tree_ref ::= ID {methods=[setName getReference]}
building_level ::= building_level_name_decl requirement?
                       OCB
                         (AI_DESTRUCTION_HINT requirement)?
                         CAPABILITY OCB
                           (capability_ requirement?)*
                         CCB
                         (FACTION_CAPABILITY OCB
                           (capability_ requirement?)*
                         CCB)?
                         CONSTRUCTION INT
                         COST INT
                         SETTLEMENT_MIN settlement_level
                         UPGRADES OCB
                           (building_level_ref requirement?)*
                         CCB
                       CCB {pin=1}

building_level_name_decl ::= ID {implements="rr.language.psi.RRNamedElement" methods=[setName getName getNameIdentifier]}
building_level_ref ::= ID {methods=[setName getReference]}
capability_ ::= (unit_recruit_capability|agent_recruit_capability|effect_capability) {recoverWhile=capability_recover}
private capability_recover ::= !(capability_|requirement|CCB)
private unit_recruit_capability ::=  RECRUIT str_unit_ref INT
private agent_recruit_capability ::=  AGENT agent_type INT
private effect_capability ::= (
                        TAXABLE_INCOME_BONUS|TRADE_BASE_INCOME_BONUS|TRADE_LEVEL_BONUS| TRADE_FLEET|FARMING_LEVEL|ROAD_LEVEL|MINE_RESOURCE|
                        HAPPINESS_BONUS|LAW_BONUS|(RELIGIOUS_BELIEF religion_ref)|
                        POPULATION_HEALTH_BONUS|POPULATION_GROWTH_BONUS|
                        WALL_LEVEL|TOWER_LEVEL|GATE_STRENGTH|GATE_DEFENCES|
                        RECRUITS_EXP_BONUS|RECRUITS_MORALE_BONUS|
                        CONSTRUCTION_COST_BONUS_MILITARY|CONSTRUCTION_COST_BONUS_RELIGIOUS|CONSTRUCTION_COST_BONUS_DEFENSIVE|CONSTRUCTION_COST_BONUS_OTHER|
                        CONSTRUCTION_TIME_BONUS_MILITARY|CONSTRUCTION_TIME_BONUS_RELIGIOUS|CONSTRUCTION_TIME_BONUS_DEFENSIVE|CONSTRUCTION_TIME_BONUS_OTHER|
                        WEAPON_SIMPLE|WEAPON_BLADED|WEAPON_MISSILE|WEAPON_SIEGE|WEAPON_OTHER|ARMOUR|UPGRADE_BODYGUARD|
                        STAGE_RACES|STAGE_GAMES|
                        AGENT_LIMIT_SETTLEMENT agent_type|
                        DUMMY CAPABILITY_TRAITSANDRETINUE // what is that?
                      ) BONUS? number

requirement ::= REQUIRES composite_c
private composite_c ::= maybe_negated_c ((AND|OR) maybe_negated_c)* {pin=1}
private maybe_negated_c ::= NOT? building_condition
building_condition ::= (alias_c|factions_c|major_event_c|is_player_c|resource_c|hidden_resource_c|no_tag_c|building_min_level_c|building_c|is_toggled_c)
private recover_c ::= !(
                        capability_|
                        DISPLAY_STRING|CAPABILITY|
                        CCB|OCB|
                        AND|OR
                        FACTIONS|MAJOR_EVENT|RESOURCE|HIDDEN_RESOURCE|NO_BUILDING_TAGGED|BUILDING_PRESENT|BUILDING_PRESENT_MIN_LEVEL|IS_TOGGLED
                       )

alias_c ::= ID                                                                           {pin=1}
factions_c ::= FACTIONS OCB {ALL|<<list faction_or_culture_ref>>} COMMA CCB                    {pin=1}
major_event_c ::= MAJOR_EVENT STRING                                                     {pin=1} // TODO: where are these?
is_player_c ::= IS_PLAYER
resource_c ::= RESOURCE resource_ref                                                     {pin=1}
hidden_resource_c ::= HIDDEN_RESOURCE resource_ref                                       {pin=1}
no_tag_c ::= NO_BUILDING_TAGGED ID QUEUED?                                               {pin=1}
building_c ::= BUILDING_PRESENT building_tree_ref                                        {pin=1}
building_min_level_c ::= BUILDING_PRESENT_MIN_LEVEL building_tree_ref building_level_ref {pin=1}
is_toggled_c ::= IS_TOGGLED STRING                                                       {pin=1} // TODO: toggles\remastered\campaign.txt


agent_type ::= DIPLOMAT|SPY|MERCHANT|ASSASSIN
// ############### export_descr_buildings end #################################

// ############### export_descr_ancillaries start ###############################
export_descr_ancillaries ::= ancillary_def+ ancillary_trigger_def+
ancillary_def ::= ANCILLARY ancillary_name_decl
                    (HIDDEN)*
                    (SHOWSTATS)*
                    IMAGE tga_file_*
                    (UNIQUE)*
                    (EXCLUDEDANCILLARIES <<list ancillary_ref>>)*
                    (EXCLUDECULTURES <<list culture_ref>>)*
                    DESCRIPTION ID
                    EFFECTSDESCRIPTION <<list ID>>
                    (EFFECT ID INT)*
                    (FAKEEFFECT ID INT)*
                  {pin=1 recoverWhile=ancillary_def_recover}
ancillary_name_decl ::= ID {implements="rr.language.psi.RRNamedElement" methods=[setName getName getNameIdentifier]}
ancillary_ref ::= ID {methods=[setName getReference]}
private ancillary_def_recover ::= !(ANCILLARY|TRIGGER)

ancillary_trigger_def ::= TRIGGER ID
                            WHENTOTEST event
                            (CONDITION condition_)?
                            (ACQUIREANCILLARY|REMOVEANCILLARY) ancillary_ref CHANCE_LC INT
                          {pin=1 recoverWhile=ancillary_trigger_def_recover}
private ancillary_trigger_def_recover ::= !TRIGGER
// ############### export_descr_ancillaries end #################################

// ############### export_descr_traits start ###############################
export_descr_traits ::= trait_def+ trait_trigger_def+
trait_def ::= TRAIT trait_name_decl
                CHARACTERS <<list (character_type)>>
                HIDDEN?
                (EXCLUDECULTURES <<list ID>>)*
                (NOGOINGBACKLEVEL INT)?
                (ANTITRAITS <<optional_commas_list trait_ref>>)?
              trait_level*
              {pin=1 recoverWhile=trait_def_recover}
trait_name_decl ::= ID {implements="rr.language.psi.RRNamedElement" methods=[setName getName getNameIdentifier]}
trait_ref ::= ID {methods=[setName getReference]}
private trait_def_recover ::= !(TRAIT|TRIGGER)
trait_level ::= LEVEL ID
                  DESCRIPTION ID
                  EFFECTSDESCRIPTION ID
                  (GAINMESSAGE ID)?
                  (LOSEMESSAGE ID)?
                  (EPITHET ID)?
                  THRESHOLD INT
                  (EFFECT ID INT)*

trait_trigger_def ::= TRIGGER ID
                        WHENTOTEST event
                        (CONDITION condition_)?
                      (AFFECTS trait_ref LOSE? INT CHANCE INT)*
                      {pin=1 recoverWhile=trait_trigger_def_recover}
private trait_trigger_def_recover ::= !TRIGGER
// ############### export_descr_traits end #################################

// ############### descr_mercenaries start ###############################
descr_mercenaries ::= mercenary_pool+
mercenary_pool ::= POOL ID
                    mercenary_pool_regions
                    mercenary_pool_unit+
mercenary_pool_regions ::= REGIONS (region_ref COMMA?)+
private mercenary_pool_unit ::= UNIT unit_ref COMMA EXP INT COST INT REPLENISH FLOAT DASH FLOAT MAX INT INITIAL INT
// ############### descr_mercenaries end #################################

// ############### descr_names start ###############################
descr_names ::= names_for_faction+
names_for_faction ::= FACTION COLON faction_ref EOL*
                    CHARACTERS_LC EOL*
                      (name_ EOL)*
                    (SURNAMES EOL*
                      (name_ EOL)*)?
                    WOMEN EOL*
                      (name_ EOL*)*


// ############### descr_names end #################################

// ############### descr_regions start ###############################
descr_regions ::= region_def+
region_def ::= region_name_decl
                 settlement_name_decl
                 faction_ref
                 rebels_ref
                 INT INT INT
                 (NONE|<<list resource_ref>>)
                 INT
                 INT
                 (religion_ref INT)*
region_name_decl ::= ID {implements="rr.language.psi.RRNamedElement" methods=[setName getName getNameIdentifier]}
region_ref ::= ID {methods=[setName getReference]}
settlement_name_decl ::= ID {implements="rr.language.psi.RRNamedElement" methods=[setName getName getNameIdentifier]}
settlement_ref ::= ID {methods=[setName getReference]}
// ############### descr_regions end #################################

// ############### descr_unit_variation start ###############################
descr_unit_variation ::= SKIN OCB skin_* CCB
                         ETHNICITIES OCB ethnicity_* CCB
                         REGION OCB ethnicity_makeup_* CCB
skin_ ::= ID OCB
            MALE tga_file_ INT INT INT
            FEMALE tga_file_ INT INT INT
          CCB
ethnicity_ ::= ethnicity_name_decl OCB
            HAIR_STYLES <<list (OP INT COMMA FLOAT CP)>>
            FEMALE_HAIR <<list (OP INT COMMA FLOAT CP)>>
            BEARD_STYLES <<list (OP INT COMMA FLOAT CP)>>
            HAIR_COLOR <<list (OP ID COMMA FLOAT CP)>>
            AGED_HAIR_COLOR <<list (OP ID COMMA FLOAT CP)>>
          CCB
ethnicity_makeup_ ::= ethnicity_makeup_name_decl OCB
              (VARIANT OCB
                 ETHNICITY ethnicity_ref
                 DISTRIBUTION INT
               CCB)*
            CCB
ethnicity_name_decl ::= ID {implements="rr.language.psi.RRNamedElement" methods=[setName getName getNameIdentifier]}
ethnicity_ref ::= ID {methods=[setName getReference]}
str_ethnicity_ref ::= STRING {methods=[setName getReference]}
ethnicity_makeup_name_decl ::= ID {implements="rr.language.psi.RRNamedElement" methods=[setName getName getNameIdentifier]}
ethnicity_makeup_ref ::= ID {methods=[setName getReference]}
// ############### descr_unit_variation end #################################

// ############### export_buildings start ###############################
export_buildings ::= EXPORT_BUILDINGS_MARKER
                     (OCB buried_building_tree_or_level_ref CCB STRING)+
buried_building_tree_or_level_ref ::= ID {methods=[setName getReference]}
// ############### export_buildings end #################################

// ############### descr_cultures start ###############################
descr_cultures ::= DESCR_CULTURES_MARKER
                   STRING COLON OSB
                     (culture_name_decl COLON KVF_value COMMA)+
                   CSB COMMA

culture_name_decl ::= STRING {implements="rr.language.psi.RRNamedElement" methods=[setName getName getNameIdentifier]}
culture_ref ::= ID {methods=[setName getReference]}
str_culture_ref ::= STRING {methods=[setName getReference]}
// ############### descr_cultures end #################################

// ############### feral_descr_ai_personality start ###############################
feral_descr_ai_personality ::= FERAL_DESCR_AI_PERSONALITY_MARKER
                               ai_building_priority+
                               ai_military_priority+
                               ai_diplomatic_priority+
                               ai_personality+
ai_building_priority ::= BUILDING_PRIORITY ID
                         POPULATION_GROWTH_BONUS INT
                         POPULATION_LOYALTY_BONUS INT
                         POPULATION_HEALTH_BONUS INT
                         TRADE_BASE_INCOME_BONUS INT
                         TRADE_LEVEL_BONUS INT
                         TRADE_FLEET INT
                         TAXABLE_INCOME_BONUS INT
                         MINE_RESOURCE_LEVEL INT
                         FARMING_LEVEL INT
                         ROAD_LEVEL INT
                         GATE_STRENGTH INT
                         GATE_DEFENSES INT
                         WALL_LEVEL INT
                         TOWER_LEVEL INT
                         STAGE_GAMES INT
                         STAGE_RACES INT
                         WEAPON_BLADED INT
                         WEAPON_MISSILE INT
                         ARMOUR INT
                         POPULATION_FIRE_RISK_BONUS INT
                         BODYGUARD INT
                         RECRUITS_MORALE_BONUS INT
                         (RECRUITS_EXPERIENCE_BONUS INT)
                         HAPPINESS_BONUS INT
                         LAW_BONUS INT

ai_military_priority ::= MILITARY_PRIORITY ID
                         MASS INT
                         INFANTRY_LIGHT INT
                         INFANTRY_HEAVY INT
                         INFANTRY_MISSILE INT
                         INFANTRY_SPEARMEN INT
                         CAVALRY_LIGHT INT
                         CAVALRY_HEAVY INT
                         CAVALRY_MISSILE INT
                         SIEGE_ARTILLERY INT
                         SPECIAL INT
                         SALLY_AGRESSION INT
                         SALLY_DESPERATE INT
                         ATTACK_RISK_TAKER INT
                         SUBTERFUGE_RISK_TAKER INT

ai_diplomatic_priority ::= DIPLOMATIC_PRIORITY ID
                           AGGRESIVENESS INT

ai_personality ::= PERSONALITY ai_personality_name_decl
                   BUILDING_PRIORITY ID
                   MILITARY_PRIORITY ID
                   DIPLOMATIC_PRIORITY ID
ai_personality_name_decl ::= ID {implements="rr.language.psi.RRNamedElement" methods=[setName getName getNameIdentifier]}
ai_personality_ref ::= ID {methods=[setName getReference]}
// ############### feral_descr_ai_personality end #################################

// ############### descr_faction_groups start ###############################
descr_faction_groups ::= DESCR_FACTION_GROUPS_MARKER
                         faction_group*
faction_group ::= GROUP faction_group_name_decl
                  (FACTION faction_ref)*
faction_group_name_decl ::= ID {implements="rr.language.psi.RRNamedElement" methods=[setName getName getNameIdentifier]}
str_faction_group_ref ::= STRING {methods=[setName getReference]}
// ############### descr_faction_groups end #################################

// ############### descr_sm_factions start ###############################
descr_sm_factions ::= DESCR_SM_FACTIONS_MARKER
                      STRING COLON OSB
                        faction_decl+
                      CSB COMMA
faction_decl ::= faction_name_decl COLON OCB
                   STRING COLON STRING COMMA
                   STRING COLON STRING COMMA
                   STRING COLON str_culture_ref COMMA
                   STRING COLON str_ethnicity_ref COMMA
                   STRING COLON OSB (<<list str_faction_group_ref>> COMMA)? CSB COMMA
                   KVF_item
                   KVF_item
                   KVF_item
                   KVF_item
                   KVF_item
                   KVF_item
                   (STRING COLON str_religion_ref COMMA)?
                   KVF_item+
                 CCB COMMA

faction_name_decl ::= STRING {implements="rr.language.psi.RRNamedElement" methods=[setName getName getNameIdentifier]}
faction_ref ::= ID {methods=[setName getReference]}
str_faction_ref ::= STRING {methods=[setName getReference]}
// ############### descr_sm_factions end #################################

// ############### descr_sm_resources start ###############################
descr_sm_resources ::= DESCR_SM_RESOURCES_MARKER
                       STRING COLON OSB
                        resource_decl+
                       CSB COMMA
resource_decl ::= resource_name_decl COLON OCB
                    STRING COLON resource_type COMMA
                   KVF_item*
                 CCB COMMA
resource_type ::= '"hidden"'|'"slaves"'|'"mineable"'|'"none"'
resource_name_decl ::= STRING {implements="rr.language.psi.RRNamedElement" methods=[setName getName getNameIdentifier]}
resource_ref ::= ID {methods=[setName getReference]}
// ############### descr_sm_resources end #################################

// ############### feral_descr_portraits_variation start ###############################
feral_descr_portraits_variation ::= FERAL_DESCR_PORTRAITS_VARIATION_MARKER
                                    culture_portrait_variation+
culture_portrait_variation ::= culture_ref OCB
                                 OLD OCB
                                   CIVILIAN OCB portrait_variation+ CCB
                                   GENERAL OCB portrait_variation+ CCB
                                   (ROGUE OCB portrait_variation+ CCB)?
                                 CCB
                                   YOUNG OCB
                                   CIVILIAN OCB portrait_variation+ CCB
                                   GENERAL OCB portrait_variation+ CCB
                                   (ROGUE OCB portrait_variation+ CCB)?
                                 CCB
                               CCB
private portrait_variation ::= INT COMMA INT COMMA INT COMMA ID
// ############### feral_descr_portraits_variation end #################################

// ############### descr_banners start ###############################
descr_banners ::= DESCR_BANNERS_MARKER
                  culture_banner+
                  faction_banner+
culture_banner ::= BANNER culture_ref
                   MODEL cas_file_
                   SKELETON ID
                   OUTLINE cas_file_
                   MODEL cas_file_
                   SKELETON ID
                   OUTLINE cas_file_
                   MODEL cas_file_
                   SKELETON ID
                   OUTLINE cas_file_ {pin=1 recoverWhile=culture_banner_recover}
private culture_banner_recover ::= !(BANNER|FACTION)
faction_banner ::= FACTION faction_ref
                   STANDARD_TEXTURE tga_file_
                   REBELS_TEXTURE tga_file_
                   ROUTING_TEXTURE tga_file_
                   ALLY_TEXTURE tga_file_ {pin=1 recoverWhile=faction_banner_recover}
private faction_banner_recover ::= !FACTION
// ############### descr_banners end #################################

// ############### descr_character start ###############################
descr_character ::= DESCR_CHARACTER_MARKER
                    STARTING_ACTION_POINTS INT
                    character_type_def+

character_type_def ::= TYPE character_type // TODO: Except of family. What is family? Its used elsewhere.
                   ACTIONS <<list character_action>>
                   WAGE_BASE INT
                   character_type_faction_def+

character_type_faction_def ::= FACTION faction_ref
                               DICTIONARY INT                  // TODO: where is that dictionary?
                               (STRAT_CARD tga_file_)?
                               STRAT_MODEL model_ref
                               (BATTLE_MODEL model_ref)?
                               (BATTLE_EQUIP (COMMA|ID|AND)*)? // TODO: gladius, chainmail shirt helmet and rectangular shield, wth is that
                               {pin=1 recoverWhile=character_type_faction_def_recover}
private character_type_faction_def_recover ::= !(FACTION|TYPE)

character_action ::= ('moving_normal'|'moving_quickmarch'|'garrison'|'assault'|'attack'|'besiege'|'entrench'|'ambush'|'diplomacy'|'bribe'|'exchange'|'building_fort'|'building_watchtower'|'spying'|'assassinate'|'sabotage'|'quick_sail'|'blockade'|'disembark')
// ############### descr_character end #################################

// ############### descr_building_battle start ###############################
descr_building_battle ::= DESCR_BUILDING_BATTLE_MARKER
                          texture_variants_
                          spot_items_
                          stat_categories
                          transition_scripts_
                          (INCLUDE txt_file_)+
                          construction_site+

texture_variants_ ::= TEXTURE_VARIANTS OCB texture_variant+ CCB
texture_variant ::= tga_file_ OCB
                        (variant_condition tga_file_)+
                    CCB
spot_items_ ::= SPOT_ITEMS OCB spot_item+ CCB
spot_item ::= ID OCB
                (variant_condition ID)+
              CCB

variant_condition ::= ANY|(faction_or_culture_ref|WINTER|SNOWCOVER|SNOWFALL)+

stat_categories ::= STAT_CATS OCB stat_category+ CCB
stat_category ::= ID OCB
                    FULL_HEALTH INT
                    BATTLE_STATS ('flammability_none'|'flammability_high'|'flammability_low'|'impact_damage_none'|'impact_damage_high'|'impact_damage_medium')*
                  CCB
transition_scripts_ ::= TRANSITION_SCRIPTS OCB transition_script+ CCB
transition_script ::= TRANSITION ID OCB
                        DURATION INT
                        PHYSICAL_SWITCH INT
                        START_ITEMS OCB
                          // Defined like that, as otherwise I ll have to use EOLs to get the separate entries
                          (number|ID)+
                        CCB
                        END_ITEMS OCB
                          (number|ID)+
                        CCB
                      CCB

construction_site ::= ID OCB
                        FULL_HEALTH INT
                        LOCALISED_NAME ID
                        LEVEL OCB
                          MIN_HEALTH INT
                          BATTLE_STATS
                          ITEM ID
                          PHYSICAL_INFO (NONE|cas_file_)
                        CCB
                      CCB
// ############### descr_building_battle end #################################

// ############### descr_lbc_db start ###############################
descr_lbc_db ::= DESCR_LBC_DB_MARKER
                 (FACTION faction_ref
                 MODEL ID INT
                 MODEL ID INT)+
// ############### descr_lbc_db end #################################

// ############### descr_model_battle start ###############################
descr_model_battle ::= DESCR_MODEL_BATTLE_MARKER
                       model_+
model_ ::= TYPE model_name_decl
           SKELETON <<list ID>> COMMA?
           (SCALE FLOAT)?
           (SKELETON_HORSE ID)?
           (SKELETON_ELEPHANT ID)?
           (SKELETON_CHARIOT ID)?
           (SKELETON_CAMEL ID)?
           (MALE|FEMALE)?
           (BODY (faction_ref COMMA)? bodytype)*
           (ANGRY_FACE (NO|YES))?
           (MEDIEVAL_FEATURES (faction_ref COMMA)? (YES|NO))*
           (TIRED_K (faction_ref COMMA)? (NO|TIRED_C|VERYTIRED))*
           (AGED (faction_ref COMMA)? FLOAT)*
           (model_pbr_texture|model_texture)+
           model_model*
           model_flexi_*

private model_pbr_texture ::= PBR_TEXTURE ((DEFAULT|faction_ref)COMMA)? tga_file_
private model_texture ::= texture ((DEFAULT|faction_ref) COMMA|COMMA)? tga_file_
private model_model ::= NO_VARIATION? model (faction_ref COMMA)? capitalized_ethnicity PATH
private model_flexi_   ::= NO_VARIATION? (MODEL_FLEXI|MODEL_FLEXI_M|MODEL_FLEXI_C)  cas_file_ COMMA (MAX|INT)?
capitalized_ethnicity ::= 'African'|'Arabic'|'Caucasian'|'EastAsian'|'Egyptian'|'Indian'|'Mediterranean'
private bodytype ::= DEFAULT|SKINNY|SKINNYATHLETIC|ATHLETIC|BULKY|OVERWEIGHT
model_name_decl ::= ID {implements="rr.language.psi.RRNamedElement" methods=[setName getName getNameIdentifier]}
model_ref ::= safe_id {methods=[setName getReference]}
// ############### descr_model_battle end #################################

// ############### descr_model_strat start ###############################
descr_model_strat ::= DESCR_MODEL_STRAT_MARKER
                      IGNORE_REGISTRY
                      model_+
// ############### descr_model_strat end #################################

// ############### descr_offmap_models start ###############################
descr_offmap_models ::= DESCR_OFFMAP_MODELS_MARKER
                        offmap_navy
                        offmap_settlement
                        offmap_wonder
                        offmap_port
offmap_navy ::= NAVY OCB
                  (FACTION faction_ref OCB
                    LARGE cas_file_ INT INT
                    MEDIUM cas_file_ INT INT
                    SMALL cas_file_ INT INT
                  CCB)+
                CCB
offmap_settlement ::= SETTLEMENT OCB
                        (CULTURE culture_ref OCB
                          (LEVEL settlement_level OCB
                              cas_file_ INT INT
                          CCB)+
                        CCB)+
                      CCB
offmap_wonder ::= WONDER OCB
                    (wonder_ref cas_file_ INT INT)*
                  CCB
offmap_port ::= PORT OCB
                  (CULTURE culture_ref OCB
                    (LEVEL port_level OCB
                        cas_file_ INT INT
                    CCB)+
                  CCB)+
                CCB

port_level ::= FISHING_VILLAGE|SEA_PORT|SHIPWRIGHT|DOCKYARD
// ############### descr_offmap_models end #################################

// ############### descr_sm_landmarks start ###############################
descr_sm_landmarks ::= DESCR_SM_LANDMARKS_MARKER
                       (TYPE wonder_name_decl
                       ITEM cas_file_
                       IMAGE tga_file_
                       JULII_RTM RTM_FILE
                       BRUTII_RTM RTM_FILE
                       SCIPII_RTM RTM_FILE
                       MOVIE wmv_file_)*
wonder_name_decl ::= ID {implements="rr.language.psi.RRNamedElement" methods=[setName getName getNameIdentifier]}
wonder_ref ::= ID {methods=[setName getReference]}
// ############### descr_sm_landmarks end #################################

// ############### descr_disasters start ###############################
descr_disasters ::= DESCR_DISASTERS_MARKER
                    disaster_*
disaster_ ::= DISASTER_LC disaster_name_decl OCB
                TYPE disaster_type
                YEAR INT
                POSITION coords_no_comma
                SIZE INT
                season_enum?
              CCB
disaster_name_decl ::= ID {implements="rr.language.psi.RRNamedElement" methods=[setName getName getNameIdentifier]}
disaster_ref ::= ID {methods=[setName getReference]}
// ############### descr_disasters end #################################

// ############### descr_mount start ###############################
descr_mount ::= DESCR_MOUNT_MARKER
                (mount_)*
mount_ ::= TYPE mount_name_decl
               CLASS mount_class
               (MODEL model_ref)?
               RADIUS number
               X_RADIUS number
               HEIGHT number
               MASS number
               BANNER_HEIGHT INT
               BOUYANCY_OFFSET number
               WATER_TRAIL_EFFECT ID
               WATER_TRAIL_EFFECT_RUNNING ID
               (
                 (ROOT_NODE_HEIGHT number
                  elephant_specific?
                  (RIDER_OFFSET number COMMA number COMMA number)+
                 )|
                 chariot_scorpion_specific
               ) {pin=1 recoverWhile=mount_recover}
private mount_recover ::= !(TYPE)
elephant_specific ::= ATTACK_DELAY INT
                      DEAD_RADIUS number
                      TUSK_Z number
                      TUSK_RADIUS number
                      RIDERS INT
chariot_scorpion_specific ::= AXLE_WIDTH number
                              WHEEL_RADIUS number
                              PIVOT_OFFSET number COMMA number COMMA number
                              POLE_LENGTH number
                              POLE_PIVOT number COMMA number COMMA number
                              POLE_CONNECT number
                              HARNESS_CONNECT number
                              (ATTACK_DELAY number)?
                              (SCYTHE_RADIUS number)?
                              (REVS_PER_ATTACK number)?
                              HORSE_TYPE mount_ref
                              HORSES INT
                              (HORSE_OFFSET number COMMA number)+
                              RIDERS INT
                              (RIDER_OFFSET number COMMA number COMMA number)+
                              LODS INT?
                              (LOD cas_file_ COMMA INT)*
                              scorpion_cart_specific?
scorpion_cart_specific ::= SCORPION_OFFSET number COMMA number COMMA number
                           SCORPION_HEIGHT number
                           SCORPION_FORWARD_LENGTH number
                           SCORPION_RELOAD_TICKS number

mount_name_decl ::= ID* {implements="rr.language.psi.RRNamedElement" methods=[setName getName getNameIdentifier]}
mount_ref ::= name_ {methods=[setName getReference]}
// ############### descr_mount end #################################

// ############### descr_rebel_factions end #################################
descr_rebel_factions ::= DESCR_REBEL_FACTIONS_MARKER
                         rebel_faction*
rebel_faction ::= REBEL_TYPE rebels_name_decl
                  CATEGORY rebel_category
                  CHANCE_LC INT
                  DESCRIPTION_LC ID
                  (UNIT unit_ref)+ {methods=[getDescription]}
rebels_name_decl ::= ID {implements="rr.language.psi.RRNamedElement" methods=[setName getName getNameIdentifier]}
rebels_ref ::= ID {methods=[setName getReference]}
rebel_category ::= PEASANT_REVOLT|GLADIATOR_REVOLT|BRIGANDS|PIRATES
// ############### descr_rebel_factions end #################################

// ############### descr_items start #################################
descr_items ::= DESCR_ITEMS_MARKER
                (INCLUDE txt_file_)+
                (TYPE ID
                 LOD
                 MAX_DISTANCE INT
                 MODEL_RIGID cas_file_)+
// ############### descr_items end #################################

// ############### descr_sm_ambient_objects start #################################
descr_sm_ambient_objects ::= DESCR_SM_AMBIENT_OBJECTS_MARKER
                             STRING COLON OSB
                               ambient_object_decl+
                             CSB COMMA
ambient_object_decl ::= ambient_object_name_decl COLON OCB
                          STRING COLON OSB
                            (STRING COMMA)+
                          CSB COMMA
                          STRING COLON BOOLEAN COMMA
                        CCB COMMA
ambient_object_name_decl ::= STRING {implements="rr.language.psi.RRNamedElement" methods=[setName getName getNameIdentifier]}
ambient_object_ref ::= ID {methods=[setName getReference]}
// ############### descr_sm_ambient_objects end #################################

// ############### descr_beliefs start #################################
descr_beliefs ::= DESCR_BELIEFS_MARKER
                  STRING COLON OSB
                    religion+
                  CSB COMMA
religion ::= religion_name_decl COLON OCB
               KVF_item
               STRING COLON tga_file_ COMMA
               STRING COLON tga_file_ COMMA
               STRING COLON tga_file_ COMMA
               KVF_item+
             CCB COMMA
religion_name_decl ::= STRING {implements="rr.language.psi.RRNamedElement" methods=[setName getName getNameIdentifier]}
religion_ref ::= ID {methods=[setName getReference]}
str_religion_ref ::= STRING {methods=[setName getReference]}
// ############### descr_beliefs end #################################

// ############### General things #################################
// ############### Conditions ###############################
private condition_ ::= condition_part_ ((and_op|or_op) condition_part_)*
private condition_part_ ::= (NOT|EXCLAMATION)?  (parenthesis_condition_|condition_atom)
private parenthesis_condition_ ::= OP condition_ CP

// ############### text_mapping_format start ###############################
text_mapping_format ::= TEXT_MAPPING_MARKER
                        text_mapping_item+
text_mapping_item ::= OCB ID CCB STRING {pin=1 recoverWhile=text_mapping}
private text_mapping ::= !OCB
// ############### text_mapping_format end #################################

// ############### enums_format start ###############################
enums_format ::= ENUMS_MARKER
                 ID+
// ############### enums_format end #################################

// ############### kv_format start ###############################
kv_format ::= KVF_item
KVF_item ::= KVF_key COLON KVF_value COMMA
KVF_key ::= STRING|file_
KVF_value ::= KVF_item|KVF_object|KVF_array|STRING|number|BOOLEAN|file_
KVF_object ::= OCB (KVF_key COLON KVF_value COMMA)* CCB
KVF_array ::=  OSB (KVF_item|KVF_value COMMA)* CSB
// ############### kv_format end #################################

// ############### script start ###############################
script_ ::= SCRIPT
              statement+
            END_SCRIPT
statement ::= control_structure|command_
private not_statement ::= !statement

private control_structure ::= if_|if_not_|monitor_|monitor_conditions_|monitor_event_|spawn_battle_|benchmark_|while_|while_not_|for_each_|return_

if_ ::= IF condition_ statement* END_IF                                       {pin=1}
if_not_ ::= IF_NOT condition_ statement* END_IF                               {pin=1}
monitor_ ::= MONITOR condition_ statement* END_MONITOR                        {pin=1} // I think thats the same as monitor_conditions
monitor_conditions_ ::= MONITOR_CONDITIONS condition_ statement* END_MONITOR  {pin=1}
monitor_event_ ::= MONITOR_EVENT event_and_condition_ statement* END_MONITOR  {pin=1}
private event_and_condition_ ::= event condition_?  {recoverWhile=not_statement}
while_ ::= WHILE condition_ statement* END_WHILE                              {pin=1}
while_not_ ::= WHILE_NOT condition_ statement* END_WHILE                      {pin=1}
for_each_ ::= FOR_EACH iterator_type IN scope statement* END_FOR              {pin=1}
spawn_battle_ ::= SPAWN_BATTLE PATH statement* END_BATTLE                     {pin=1}
benchmark_ ::= START_BENCHMARK ID statement* END_BENCHMARK                    {pin=1}
return_ ::= RETURN BOOLEAN                                                    {pin=1}
iterator_type ::= SETTLEMENT|CHARACTER|UNIT|ARMY|FACTION
scope ::= (
            FACTION <<local_or str_faction_ref>>?|
            CHARACTER <<local_or STRING>>?|
            SETTLEMENT|
            WORLD|
            ARMY
          )
// ############### script end #################################

// #### events ####
event ::= (PREBATTLE|PREBATTLEWITHDRAWAL|BATTLEAICOMMENCED|BATTLEDELAYPHASECOMMENCED|BATTLEDEPLOYMENTPHASECOMMENCED|BATTLECONFLICTPHASECOMMENCED|BATTLEPLAYERUNITATTACKSENEMYUNIT|BATTLEENEMYUNITATTACKSPLAYERUNIT|BATTLEPLAYERATTACKSSETTLEMENTBUILDING|BATTLEENEMYATTACKSSETTLEMENTBUILDING|BATTLEUNITGOESBERSERK|BATTLEPLAYERUNITGOESBERSERK|BATTLEENEMYUNITGOESBERSERK|BATTLEUNITROUTS|BATTLEPLAYERUNITROUTS|BATTLEENEMYUNITROUTS|BATTLEPLAYERSIEGEENGINEDESTROYED|BATTLEENEMYSIEGEENGINEDESTROYED|POSTBATTLE|BATTLEARMYROUTED|BATTLEGENERALKILLED|BATTLEGENERALROUTED|BATTLEREINFORCEMENTSARRIVE|BATTLESIEGEENGINEDESTROYED|BATTLESIEGEENGINEDOCKSWALL|BATTLEGATESATTACKEDBYENGINE|BATTLEGATESATTACKEDBYPLAYERENGINE|BATTLEGATESATTACKEDBYENEMYENGINE|BATTLEBATTLEGATESDESTROYEDBYENGINE|BATTLEWALLSBREACHEDBYENGINE|BATTLEWALLSCAPTURED|BATTLEFINISHED|ENTEREDCITYVIEW|BATTLEMINIMAPACTION|BATTLEPLAYERUNITSELECTED|ENTERTACTICALMODE|BATTLEREINFORCEMENTSHACK|FACTIONTURNSTART|FACTIONWARDECLARED|HORDEFORMED|FACTIONTURNEND|HIREMERCENARIES|GENERALCAPTURERESIDENCE|GENERALCAPTUREWONDER|GENERALCAPTURESETTLEMENT|LEADERDESTROYEDFACTION|DISASTER|CHARACTERDAMAGEDBYDISASTER|GENERALASSAULTSRESIDENCE|OFFEREDFORADOPTION|LESSERGENERALOFFEREDFORADOPTION|OFFEREDFORMARRIAGE|BROTHERADOPTED|BECOMESFACTIONLEADER|BECOMESFACTIONHEIR|TAKEOFFICE|CEASEDFACTIONLEADER|CEASEDFACTIONHEIR|LEAVEOFFICE|UNGARRISONEDFORT|LOSTLEGIONARYEAGLE|CAPTUREDLEGIONARYEAGLE|RECAPTUREDLEGIONARYEAGLE|SENATEEXPOSURE|QUAESTORINVESTIGATIONMINOR|QUAESTORINVESTIGATION|QUAESTORINVESTIGATIONMAJOR|POPULARSUPPORTFOROVERTHROW|SENATEREADYTOOUTLAWFACTION|SENATEOUTLAWSFACTION|NEWTURNSTART|SCRIPTPROMPTCALLBACK|FACTIONDESTROYED|BIRTH|CHARACTERCOMESOFAGE|CHARACTERMARRIES|CHARACTERBECOMESAFATHER|CHARACTERTURNSTART|CHARACTERTURNEND|CHARACTERTURNENDINSETTLEMENT|GENERALDEVASTATESTILE|SPYMISSION|EXECUTESASPYONAMISSION|LEADERORDEREDSPYINGMISSION|ASSASSINATIONMISSION|EXECUTESANASSASSINONAMISSION|LEADERORDEREDASSASSINATION|SUFFERASSASSINATIONATTEMPT|SABOTAGEMISSION|LEADERORDEREDSABOTAGE|BRIBERYMISSION|LEADERORDEREDBRIBERY|ACCEPTBRIBE|REFUSEBRIBE|INSURRECTION|DIPLOMACYMISSION|LEADERORDEREDDIPLOMACY|LEADERSENATEMISSIONSUCCESS|LEADERSENATEMISSIONFAILED|CONSTRUCTIONITEMCLICKED|RECRUITMENTITEMCLICKED|RECRUITMENTPOPULATED|CONSTRUCTIONPOPULATED|AGENTLISTPOPULATED|MOVERETINUEPOPULATED|MOVERETINUEPRESSED|MOVERETINUEANCILLARYSELECTED|MOVERETINUEANCILLARYDESELECTED|MISSIONSELECTED|AGENTSELECTED|SCROLLDIDOPEN|UNITHASROUTED|BATTLEUNITACTIONSTATUS|DIPLOMACYSCROLLPOPULATED|ITEMDESELECTED|UNITINFOOPENED|ADVISORAUDIOSTOPPED|SETTLEMENTTURNSTART|SETTLEMENTTURNEND|NEWADMIRALCREATED|UNITTRAINED|GOVERNORUNITTRAINED|BUILDINGCOMPLETED|GOVERNORBUILDINGCOMPLETED|PLUGINCOMPLETED|GOVERNORPLUGINCOMPLETED|AGENTCREATED|GOVERNORAGENTCREATED|BUILDINGDESTROYED|GOVERNORBUILDINGDESTROYED|CITYRIOTS|GOVERNORCITYRIOTS|CITYREBELS|GOVERNORCITYREBELS|GOVERNORTHROWGAMES|GOVERNORTHROWRACES|UNGARRISONEDSETTLEMENT|ENSLAVEPOPULATION|EXTERMINATEPOPULATION|CITYSACKED|CHARACTERSELECTED|SETTLEMENTSELECTED|ENEMYSETTLEMENTSELECTED|MULTITURNMOVE|CHARACTERPANELOPEN|SETTLEMENTPANELOPEN|FINANCESPANELOPEN|FACTIONSUMMARYPANELOPEN|FAMILYTREEPANELOPEN|DIPLOMATICSTANDINGPANELOPEN|SENATEMISSIONSPANELOPEN|SENATEOFFICESPANELOPEN|DIPLOMACYPANELOPEN|PREBATTLEPANELOPEN|RECRUITMENTPANELOPEN|CONSTRUCTIONPANELOPEN|TRADEPANELOPEN|HIREMERCENARIESPANELOPEN|NAVALAUTORESOLVEPANELOPEN|INCOMINGMESSAGE|MESSAGEOPEN|REQUESTBUILDINGADVICE|REQUESTTRAININGADVICE|REQUESTMERCENARIESADVICE|BUTTONPRESSED|SHORTCUTTRIGGERED|SCROLLOPENED|SCROLLCLOSED|ADVICESUPRESSED|SCROLLADVICEREQUESTED|PREBATTLESCROLLADVICEREQUESTED|NAVALPREBATTLESCROLLADVICEREQUESTED|SETTLEMENTSCROLLADVICEREQUESTED|IDLE|ABANDONSHOWME|SCRIPTEDADVICE|DECLINEAUTOMATEDSETTLEMENTMANAGEMENT|ESCPRESSED|GAMERELOADED|FIRSTSTRATUPDATES|MOVIESTOPPED|SELECTIONASSISTPOSSIBLE|SETTLEMENTBUTTONPRESSED|WORLDSCRIPTTERMINATE|CAMPAIGNHUDSHOWN|CONTEXTPOPUPINTERACTION|DIPLOMACYCONSTRUCTINGOFFER|DIPLOMACYCONSTRUCTINGCOUNTEROFFER|DIPLOMACYOPPONENTPRESENTSOFFER|DIPLOMACYOPPONENTPRESENTSCOUNTEROFFER|FACTIONSUMMARY|FACTIONSENATE|FACTIONSENATEPOLICY|FACTIONSENATEMISSIONS|FACTIONSENATEOFFICIALS|FACTIONSENATEFLOOR|FACTIONFACTIONS|FACTIONDETAILS|FACTIONFAMILYTREE|FACTIONRANKINGS|FACTIONLISTS|SETTLEMENTCHARACTER|SETTLEMENTTRADE|SETTLEMENTOVERVIEW|SPYSELECTED|DIPLOMATSELECTED|ASSASSINSELECTED|FLEETSELECTED|CAMPAIGNMAPGESTURE|CAMPAIGNDOINGBADLY|BATTLEMAPGESTURE|HIDEBATTLEUI|FERALNEWSVISIBLE|AGENTHUBOPENED|MOVERETINUEOPENED|OWNFACTIONDETAILSOPENED|DIPLOMATICSTANDINGSHOWN|FACTIONFINANCESSHOWN|FAMILYTREESHOWN|SENDAGENTPANEL|SETTLEMENTDETAILSSHOWN|CHARACTERINFOSCREEN|FRIENDLYCHARACTERSELECTED|ENEMYCHARACTERSELECTED|FRIENDLYSETTLEMENTSELECTED|MAPOVERLAYOPENED|SIEGEDETAILSSHOWN|PREBATTLESCREEN|TACTICALMAPSHOWN|POSTBATTLESCREEN|UNITSGROUPED|ENTEREDBATTLE|ADVISOROPENED|FORMATIONTYPESSHOWN|MERCHANTSELECTED|NAVALCOMBATSTARTED|MERGEARMIESOPENED|ROUTESBLOCKADED|ELECTIONRESULTS|BATTLETOGGLEMENU|AMBUSHMODE|NEWSTABCLOSED|NEWSTABOPENED|BATTLENEWSTABOPENED|QUICKLISTSOPENED|EMBARGOISAVAILABLE|REBELCHARACTERSELECTED|HIGHTAXESCAUSEDISORDER|FAILEDTOENDTURN|
ACQUISITIONMISSION|SUFFERACQUISITIONATTEMPT)// Events in this line are not documented, but used
// #### conditions ####
condition_atom ::= i_inbattle_|wonbattle_|i_wonbattle_|routs_|ally_routs_|generalhplostratioinbattle_|generalnumkillsinbattle_|generalfoughtincombat_|percentageofarmykilled_|i_percentageofarmykilled_|percentageenemykilled_|percentagebodyguardkilled_|percentageroutedofffield_|numkilledgenerals_|percentageunitcategory_|numfriendsinbattle_|numenemiesinbattle_|generalfoughtfaction_|generalfoughtculture_|i_conflicttype_|isnightbattle_|battlesuccess_|battleodds_|wasattacker_|i_battleaiattacking_|i_battleaiattackingsettlement_|i_battleaidefendingsettlement_|i_battleaidefendinghill_|i_battleaidefendingcrossing_|i_battleaiscouting_|i_battleisriverbattle_|i_battleissiegebattle_|i_battleissallyoutbattle_|i_battleisfortbattle_|i_battleattackernumsiegeengines_|i_battleattackernumartillerycanpenetratewalls_|i_battledefendernumnonmissileunitsonwalls_|i_battledefendernummissileunitsonwalls_|i_battlesettlementwallsbreached_|i_battlesettlementgatedestroyed_|i_battlesettlementtowerdefence_|i_battlesettlementgatedefence_|i_battlesettlementfortificationlevel_|battlebuildingtype_|i_battlesettlementgatestrength_|i_battlenumberofrivercrossings_|battleplayerunitclass_|battleenemyunitclass_|battleplayerunitcategory_|battleenemyunitcategory_|battleplayerunitsiegeengineclass_|battleenemyunitsiegeengineclass_|battleplayerunitonwalls_|battleenemyunitonwalls_|battleplayercurrentformation_|battleenemycurrentformation_|battleplayerunitcloseformation_|battleenemyunitcloseformation_|battleplayerunitspecialabilitysupported_|battleselectedplayerunitspecialabilitysupported_|battleenemyunitspecialabilitysupported_|battleplayerunitspecialabilityactive_|battleenemyunitspecialabilityactive_|battleplayermountclass_|battleenemymountclass_|battleplayerunitmeleestrength_|battleenemyunitmeleestrength_|battleplayerunitmissilestrength_|battleenemyunitmissilestrength_|battleplayerunitspecialformation_|battleenemyunitspecialformation_|battleplayerunitengaged_|battleenemyunitengaged_|battleplayeractionstatus_|battleenemyactionstatus_|battleplayerunitmovingfast_|battleenemyunitmovingfast_|battlerangeofattack_|battledirectionofattack_|battleismeleeattack_|i_battleplayerarmypercentageofunitclass_|i_battleenemyarmypercentageofunitclass_|i_battleplayerarmypercentageofunitcategory_|i_battleenemyarmypercentageofunitcategory_|i_battleplayerarmypercentageofmountclass_|i_battleenemyarmypercentageofmountclass_|i_battleplayerarmypercentageofclassandcategory_|i_battleenemyarmypercentageofclassandcategory_|i_battleplayerarmypercentageofspecialability_|i_battleenemyarmypercentageofspecialability_|i_battleplayerarmypercentagecanhide_|i_battleenemyarmypercentagecanhide_|i_battleplayerarmypercentagecanswim_|i_battleenemyarmypercentagecanswim_|i_battleplayerarmyisattacker_|i_battleplayerallianceoddsinfavour_|i_battleplayerallianceoddsagainst_|totalsiegeweapons_|i_battlestarted_|i_battlefinished_|i_battleend_|i_battleendpending_|i_isunitmovefastset_|i_isunitmoving_|i_isunitidle_|i_isunitrouting_|i_isunitunderfire_|i_isunitengaged_|i_isunitengagedwithunit_|i_unitformation_|i_percentageunitkilled_|i_unitpercentageammoleft_|i_unitdistancefromposition_|i_unitdistancefromline_|i_unitdistancefromunit_|i_unitinrangeofunit_|i_unitdestroyed_|i_unitenemyunitinradius_|i_isunitgroupmoving_|i_isunitgroupengaged_|i_isunitgroupidle_|i_isunitgroupdestroyed_|i_percentageunitgroupkilled_|i_unitgroupformation_|i_unitgroupdistancefromposition_|i_unitgroupdistancefromgroup_|i_unitgroupinrangeofunit_|i_unitinrangeofunitgroup_|i_unitgroupinrangeofunitgroup_|i_playerinrangeofunitgroup_|i_playerinrangeofunit_|i_unittypeselected_|unittype_|i_unitselected_|i_multipleunitsselected_|i_specificunitsselected_|i_iscamerazoomingtounit_|i_battleenemyarmypercentageofmatchingunits_|i_battleenemyarmynumberofmatchingunits_|i_battleplayerarmypercentageofmatchingunits_|i_battleplayerarmynumberofmatchingunits_|localplayerhasmanualreinforcements_|localplayerhasaireinforcements_|trait_|hasancillary_|fathertrait_|factionleadertrait_|attribute_|remainingmppercentage_|i_remainingmppercentage_|i_charactercanmove_|noactionthisturn_|agenttype_|trainedagenttype_|disastertype_|culturetype_|originalfactiontype_|originalculturetype_|isgeneral_|isadmiral_|remasterededucation_|endedinsettlement_|isfactionleader_|isfactionheir_|ismarried_|atsea_|inenemylands_|inbarbarianlands_|inuncivilisedlands_|isbesieging_|isundersiege_|i_withdrawsbeforebattle_|endedinenemyzoc_|adviseaction_|i_charactertypenearcharactertype_|i_charactertypeneartile_|i_characternameneartile_|tradingresource_|regiontradingresource_|tradingexotic_|distancecapital_|distancehome_|tradinggroup_|regionmerchantcount_|preciousminecount_|isfromfaction_|nightbattlesenabled_|hasoffice_|factiontype_|targetfactiontype_|factionculturetype_|targetfactionculturetype_|trainedunitcategory_|unitcategory_|senatemissiontimeremaining_|mediantaxlevel_|modetaxlevel_|i_modetaxlevel_|missionsuccesslevel_|missionsucceeded_|missionfactiontargettype_|missionculturetargettype_|diplomaticstancefromcharacter_|diplomaticstancefromfaction_|factionhasallies_|losingmoney_|i_losingmoney_|factionisalive_|supportcostspercentage_|treasury_|onawarfooting_|i_factionbesieging_|i_factionbesieged_|i_numberofsettlements_|i_numberofheirs_|i_factionneartile_|settlementstaken_|battlesfought_|battleswon_|battleslost_|defensivesiegesfought_|defensivesiegeswon_|offensivesiegesfought_|offensivesiegeswon_|factionwideancillaryexists_|isally_|isprotectorate_|isprotector_|issamesuperfaction_|localplayerbattlesfought_|toggled_|majoreventactive_|randompercent_|truecondition_|worldwideancillaryexists_|i_istutorialenabled_|i_isplayerturn_|constructionitemclicked_|recruitmentitemclicked_|charactername_|scrolldidopen_|unithasrouted_|battleunitactionstatus_|i_amountofunitinsettlement_|i_unitcardselected_|i_comparecounter_|testfaction_|langis_|i_timerelapsed_|i_soundplaying_|hasresource_|settlementrevoltingfrom_|iscapital_|settlementname_|governorbuildingexists_|settlementbuildingexists_|homesettlementbuildingexists_|settlementorderlevel_|settlementcapabilitylevel_|buildingfinishedbygovernor_|settlementbuildingfinished_|governorpluginexists_|governorpluginfinished_|governortaxlevel_|settlementtaxlevel_|governorinresidence_|governorloyaltylevel_|settlementloyaltylevel_|riotrisk_|buildingqueueidledespitecash_|trainingqueueidledespitecash_|i_settlementexists_|i_settlementowner_|i_settlementownerculture_|i_settlementlevel_|advisefinancialbuild_|advisebuild_|adviserecruit_|settlementpopulationmaxedout_|settlementpopulationtoolow_|settlementautomanaged_|feralsettlementautomanaged_|percentageofpopulationingarrison_|garrisontopopulationratio_|garrisonsettlementratio_|healthpercentage_|settlementhasplague_|isfortgarrisoned_|issettlementgarrisoned_|issettlementrioting_|i_numberunitsinsettlement_|i_advisorspeechplaying_|characterislocal_|targetcharacterislocal_|settlementislocal_|targetsettlementislocal_|regionislocal_|targetregionislocal_|armyislocal_|armyisgarrison_|targetarmyislocal_|factionislocal_|i_localfaction_|targetfactionislocal_|i_turnnumber_|i_mapname_|i_threadcount_|i_istriggertrue_|incomingmessagetype_|i_advisorverbosity_|i_advisorvisible_|i_characterselected_|i_agentselected_|i_settlementselected_|shortcuttriggered_|i_advancedstatsscrollisopen_|buttonpressed_|scrollopened_|scrollclosed_|scrolladvicerequested_|i_annotationdisplayed_|feraluitype_|merchantisavailabletobuild_|settlementhasdamagedbuilding_|localplayerhasreinforcements_|settlementmerchanttradingwith_|settlementownedby_|factionbuildingexists_
{recoverWhile=condition_recover}
private condition_recover ::= !(ends_of_conditions|statement)
private ends_of_conditions ::= ACQUIREANCILLARY|REMOVEANCILLARY|AFFECTS|END_IF|END_WHILE|END_MONITOR|CP|and_op|or_op

i_inbattle_ ::= I_INBATTLE {pin=1}
wonbattle_ ::= WONBATTLE {pin=1}
i_wonbattle_ ::= I_WONBATTLE faction_ref {pin=1}
routs_ ::= ROUTS {pin=1}
ally_routs_ ::= ALLY_ROUTS {pin=1}
generalhplostratioinbattle_ ::= GENERALHPLOSTRATIOINBATTLE comparison_op number {pin=1}
generalnumkillsinbattle_ ::= GENERALNUMKILLSINBATTLE comparison_op number {pin=1}
generalfoughtincombat_ ::= GENERALFOUGHTINCOMBAT {pin=1}
percentageofarmykilled_ ::= PERCENTAGEOFARMYKILLED comparison_op number {pin=1}
i_percentageofarmykilled_ ::= I_PERCENTAGEOFARMYKILLED INT INT comparison_op INT {pin=1}
percentageenemykilled_ ::= PERCENTAGEENEMYKILLED comparison_op number {pin=1}
percentagebodyguardkilled_ ::= PERCENTAGEBODYGUARDKILLED comparison_op number {pin=1}
percentageroutedofffield_ ::= PERCENTAGEROUTEDOFFFIELD comparison_op number {pin=1}
numkilledgenerals_ ::= NUMKILLEDGENERALS comparison_op number {pin=1}
percentageunitcategory_ ::= PERCENTAGEUNITCATEGORY unit_category comparison_op number {pin=1}
numfriendsinbattle_ ::= NUMFRIENDSINBATTLE comparison_op number {pin=1}
numenemiesinbattle_ ::= NUMENEMIESINBATTLE comparison_op number {pin=1}
generalfoughtfaction_ ::= GENERALFOUGHTFACTION faction_ref {pin=1}
generalfoughtculture_ ::= GENERALFOUGHTCULTURE culture_ref {pin=1}
i_conflicttype_ ::= I_CONFLICTTYPE conflict_type {pin=1}
isnightbattle_ ::= ISNIGHTBATTLE {pin=1}
battlesuccess_ ::= BATTLESUCCESS comparison_op battle_success {pin=1}
battleodds_ ::= BATTLEODDS comparison_op number {pin=1}
wasattacker_ ::= WASATTACKER {pin=1}
i_battleaiattacking_ ::= I_BATTLEAIATTACKING {pin=1}
i_battleaiattackingsettlement_ ::= I_BATTLEAIATTACKINGSETTLEMENT {pin=1}
i_battleaidefendingsettlement_ ::= I_BATTLEAIDEFENDINGSETTLEMENT {pin=1}
i_battleaidefendinghill_ ::= I_BATTLEAIDEFENDINGHILL {pin=1}
i_battleaidefendingcrossing_ ::= I_BATTLEAIDEFENDINGCROSSING {pin=1}
i_battleaiscouting_ ::= I_BATTLEAISCOUTING {pin=1}
i_battleisriverbattle_ ::= I_BATTLEISRIVERBATTLE {pin=1}
i_battleissiegebattle_ ::= I_BATTLEISSIEGEBATTLE {pin=1}
i_battleissallyoutbattle_ ::= I_BATTLEISSALLYOUTBATTLE {pin=1}
i_battleisfortbattle_ ::= I_BATTLEISFORTBATTLE {pin=1}
i_battleattackernumsiegeengines_ ::= I_BATTLEATTACKERNUMSIEGEENGINES siege_engine_class {pin=1}
i_battleattackernumartillerycanpenetratewalls_ ::= I_BATTLEATTACKERNUMARTILLERYCANPENETRATEWALLS comparison_op INT {pin=1}
i_battledefendernumnonmissileunitsonwalls_ ::= I_BATTLEDEFENDERNUMNONMISSILEUNITSONWALLS comparison_op INT {pin=1}
i_battledefendernummissileunitsonwalls_ ::= I_BATTLEDEFENDERNUMMISSILEUNITSONWALLS comparison_op INT {pin=1}
i_battlesettlementwallsbreached_ ::= I_BATTLESETTLEMENTWALLSBREACHED {pin=1}
i_battlesettlementgatedestroyed_ ::= I_BATTLESETTLEMENTGATEDESTROYED {pin=1}
i_battlesettlementtowerdefence_ ::= I_BATTLESETTLEMENTTOWERDEFENCE tower_defence_type {pin=1}
i_battlesettlementgatedefence_ ::= I_BATTLESETTLEMENTGATEDEFENCE gate_defence_type {pin=1}
i_battlesettlementfortificationlevel_ ::= I_BATTLESETTLEMENTFORTIFICATIONLEVEL comparison_op INT {pin=1}
battlebuildingtype_ ::= BATTLEBUILDINGTYPE EQUALS battle_building_type {pin=1}
i_battlesettlementgatestrength_ ::= I_BATTLESETTLEMENTGATESTRENGTH comparison_op INT {pin=1}
i_battlenumberofrivercrossings_ ::= I_BATTLENUMBEROFRIVERCROSSINGS comparison_op INT {pin=1}
battleplayerunitclass_ ::= BATTLEPLAYERUNITCLASS EQUALS unit_class {pin=1}
battleenemyunitclass_ ::= BATTLEENEMYUNITCLASS EQUALS unit_class {pin=1}
battleplayerunitcategory_ ::= BATTLEPLAYERUNITCATEGORY EQUALS unit_category {pin=1}
battleenemyunitcategory_ ::= BATTLEENEMYUNITCATEGORY EQUALS unit_category {pin=1}
battleplayerunitsiegeengineclass_ ::= BATTLEPLAYERUNITSIEGEENGINECLASS EQUALS siege_engine_class {pin=1}
battleenemyunitsiegeengineclass_ ::= BATTLEENEMYUNITSIEGEENGINECLASS EQUALS siege_engine_class {pin=1}
battleplayerunitonwalls_ ::= BATTLEPLAYERUNITONWALLS {pin=1}
battleenemyunitonwalls_ ::= BATTLEENEMYUNITONWALLS {pin=1}
battleplayercurrentformation_ ::= BATTLEPLAYERCURRENTFORMATION EQUALS unit_formation {pin=1}
battleenemycurrentformation_ ::= BATTLEENEMYCURRENTFORMATION EQUALS unit_formation {pin=1}
battleplayerunitcloseformation_ ::= BATTLEPLAYERUNITCLOSEFORMATION {pin=1}
battleenemyunitcloseformation_ ::= BATTLEENEMYUNITCLOSEFORMATION {pin=1}
battleplayerunitspecialabilitysupported_ ::= BATTLEPLAYERUNITSPECIALABILITYSUPPORTED comparison_op special_ability {pin=1}
battleselectedplayerunitspecialabilitysupported_ ::= BATTLESELECTEDPLAYERUNITSPECIALABILITYSUPPORTED comparison_op special_ability {pin=1}
battleenemyunitspecialabilitysupported_ ::= BATTLEENEMYUNITSPECIALABILITYSUPPORTED comparison_op special_ability {pin=1}
battleplayerunitspecialabilityactive_ ::= BATTLEPLAYERUNITSPECIALABILITYACTIVE {pin=1}
battleenemyunitspecialabilityactive_ ::= BATTLEENEMYUNITSPECIALABILITYACTIVE {pin=1}
battleplayermountclass_ ::= BATTLEPLAYERMOUNTCLASS comparison_op mount_class {pin=1}
battleenemymountclass_ ::= BATTLEENEMYMOUNTCLASS comparison_op mount_class {pin=1}
battleplayerunitmeleestrength_ ::= BATTLEPLAYERUNITMELEESTRENGTH comparison_op number {pin=1}
battleenemyunitmeleestrength_ ::= BATTLEENEMYUNITMELEESTRENGTH comparison_op number {pin=1}
battleplayerunitmissilestrength_ ::= BATTLEPLAYERUNITMISSILESTRENGTH comparison_op number {pin=1}
battleenemyunitmissilestrength_ ::= BATTLEENEMYUNITMISSILESTRENGTH comparison_op number {pin=1}
battleplayerunitspecialformation_ ::= BATTLEPLAYERUNITSPECIALFORMATION EQUALS unit_formation {pin=1}
battleenemyunitspecialformation_ ::= BATTLEENEMYUNITSPECIALFORMATION EQUALS unit_formation {pin=1}
battleplayerunitengaged_ ::= BATTLEPLAYERUNITENGAGED {pin=1}
battleenemyunitengaged_ ::= BATTLEENEMYUNITENGAGED {pin=1}
battleplayeractionstatus_ ::= BATTLEPLAYERACTIONSTATUS EQUALS action_status {pin=1}
battleenemyactionstatus_ ::= BATTLEENEMYACTIONSTATUS EQUALS action_status {pin=1}
battleplayerunitmovingfast_ ::= BATTLEPLAYERUNITMOVINGFAST {pin=1}
battleenemyunitmovingfast_ ::= BATTLEENEMYUNITMOVINGFAST {pin=1}
battlerangeofattack_ ::= BATTLERANGEOFATTACK comparison_op number {pin=1}
battledirectionofattack_ ::= BATTLEDIRECTIONOFATTACK EQUALS attack_direction {pin=1}
battleismeleeattack_ ::= BATTLEISMELEEATTACK {pin=1}
i_battleplayerarmypercentageofunitclass_ ::= I_BATTLEPLAYERARMYPERCENTAGEOFUNITCLASS unit_class comparison_op number {pin=1}
i_battleenemyarmypercentageofunitclass_ ::= I_BATTLEENEMYARMYPERCENTAGEOFUNITCLASS unit_class comparison_op number {pin=1}
i_battleplayerarmypercentageofunitcategory_ ::= I_BATTLEPLAYERARMYPERCENTAGEOFUNITCATEGORY unit_category comparison_op number {pin=1}
i_battleenemyarmypercentageofunitcategory_ ::= I_BATTLEENEMYARMYPERCENTAGEOFUNITCATEGORY unit_category comparison_op number {pin=1}
i_battleplayerarmypercentageofmountclass_ ::= I_BATTLEPLAYERARMYPERCENTAGEOFMOUNTCLASS mount_class comparison_op number {pin=1}
i_battleenemyarmypercentageofmountclass_ ::= I_BATTLEENEMYARMYPERCENTAGEOFMOUNTCLASS mount_class comparison_op number {pin=1}
i_battleplayerarmypercentageofclassandcategory_ ::= I_BATTLEPLAYERARMYPERCENTAGEOFCLASSANDCATEGORY unit_class unit_category comparison_op number {pin=1}
i_battleenemyarmypercentageofclassandcategory_ ::= I_BATTLEENEMYARMYPERCENTAGEOFCLASSANDCATEGORY unit_class unit_category comparison_op number {pin=1}
i_battleplayerarmypercentageofspecialability_ ::= I_BATTLEPLAYERARMYPERCENTAGEOFSPECIALABILITY special_ability comparison_op number {pin=1}
i_battleenemyarmypercentageofspecialability_ ::= I_BATTLEENEMYARMYPERCENTAGEOFSPECIALABILITY special_ability comparison_op number {pin=1}
i_battleplayerarmypercentagecanhide_ ::= I_BATTLEPLAYERARMYPERCENTAGECANHIDE hide_type comparison_op number {pin=1}
i_battleenemyarmypercentagecanhide_ ::= I_BATTLEENEMYARMYPERCENTAGECANHIDE hide_type comparison_op number {pin=1}
i_battleplayerarmypercentagecanswim_ ::= I_BATTLEPLAYERARMYPERCENTAGECANSWIM comparison_op number {pin=1}
i_battleenemyarmypercentagecanswim_ ::= I_BATTLEENEMYARMYPERCENTAGECANSWIM comparison_op number {pin=1}
i_battleplayerarmyisattacker_ ::= I_BATTLEPLAYERARMYISATTACKER {pin=1}
i_battleplayerallianceoddsinfavour_ ::= I_BATTLEPLAYERALLIANCEODDSINFAVOUR comparison_op INT {pin=1}
i_battleplayerallianceoddsagainst_ ::= I_BATTLEPLAYERALLIANCEODDSAGAINST comparison_op INT {pin=1}
totalsiegeweapons_ ::= TOTALSIEGEWEAPONS comparison_op INT {pin=1}
i_battlestarted_ ::= I_BATTLESTARTED {pin=1}
i_battlefinished_ ::= I_BATTLEFINISHED {pin=1}
i_battleend_ ::= I_BATTLEEND {pin=1}
i_battleendpending_ ::= I_BATTLEENDPENDING {pin=1}
i_isunitmovefastset_ ::= I_ISUNITMOVEFASTSET ID {pin=1}
i_isunitmoving_ ::= I_ISUNITMOVING ID {pin=1}
i_isunitidle_ ::= I_ISUNITIDLE ID {pin=1}
i_isunitrouting_ ::= I_ISUNITROUTING ID {pin=1}
i_isunitunderfire_ ::= I_ISUNITUNDERFIRE ID {pin=1}
i_isunitengaged_ ::= I_ISUNITENGAGED ID {pin=1}
i_isunitengagedwithunit_ ::= I_ISUNITENGAGEDWITHUNIT ID ID {pin=1}
i_unitformation_ ::= I_UNITFORMATION ID EQUALS unit_formation {pin=1}
i_percentageunitkilled_ ::= I_PERCENTAGEUNITKILLED ID comparison_op INT {pin=1}
i_unitpercentageammoleft_ ::= I_UNITPERCENTAGEAMMOLEFT ID comparison_op INT {pin=1}
i_unitdistancefromposition_ ::= I_UNITDISTANCEFROMPOSITION ID (coords|coords_no_comma|ID) comparison_op INT {pin=1}
i_unitdistancefromline_ ::= I_UNITDISTANCEFROMLINE ID ID ID comparison_op INT {pin=1}
i_unitdistancefromunit_ ::= I_UNITDISTANCEFROMUNIT ID ID comparison_op INT {pin=1}
i_unitinrangeofunit_ ::= I_UNITINRANGEOFUNIT ID ID {pin=1}
i_unitdestroyed_ ::= I_UNITDESTROYED ID {pin=1}
i_unitenemyunitinradius_ ::= I_UNITENEMYUNITINRADIUS ID INT {pin=1}
i_isunitgroupmoving_ ::= I_ISUNITGROUPMOVING ID {pin=1}
i_isunitgroupengaged_ ::= I_ISUNITGROUPENGAGED ID {pin=1}
i_isunitgroupidle_ ::= I_ISUNITGROUPIDLE ID {pin=1}
i_isunitgroupdestroyed_ ::= I_ISUNITGROUPDESTROYED ID {pin=1}
i_percentageunitgroupkilled_ ::= I_PERCENTAGEUNITGROUPKILLED ID comparison_op INT {pin=1}
i_unitgroupformation_ ::= I_UNITGROUPFORMATION ID EQUALS ID {pin=1}
i_unitgroupdistancefromposition_ ::= I_UNITGROUPDISTANCEFROMPOSITION ID INT comparison_op INT {pin=1}
i_unitgroupdistancefromgroup_ ::= I_UNITGROUPDISTANCEFROMGROUP ID ID comparison_op INT {pin=1}
i_unitgroupinrangeofunit_ ::= I_UNITGROUPINRANGEOFUNIT ID ID {pin=1}
i_unitinrangeofunitgroup_ ::= I_UNITINRANGEOFUNITGROUP ID ID {pin=1}
i_unitgroupinrangeofunitgroup_ ::= I_UNITGROUPINRANGEOFUNITGROUP ID ID {pin=1}
i_playerinrangeofunitgroup_ ::= I_PLAYERINRANGEOFUNITGROUP ID {pin=1}
i_playerinrangeofunit_ ::= I_PLAYERINRANGEOFUNIT ID {pin=1}
i_unittypeselected_ ::= I_UNITTYPESELECTED unit_ref {pin=1}
unittype_ ::= UNITTYPE unit_ref {pin=1}
i_unitselected_ ::= I_UNITSELECTED ID {pin=1}
i_multipleunitsselected_ ::= I_MULTIPLEUNITSSELECTED {pin=1}
i_specificunitsselected_ ::= I_SPECIFICUNITSSELECTED ID* {pin=1}
i_iscamerazoomingtounit_ ::= I_ISCAMERAZOOMINGTOUNIT ID {pin=1}
i_battleenemyarmypercentageofmatchingunits_ ::= I_BATTLEENEMYARMYPERCENTAGEOFMATCHINGUNITS ID comparison_op number {pin=1}
i_battleenemyarmynumberofmatchingunits_ ::= I_BATTLEENEMYARMYNUMBEROFMATCHINGUNITS ID comparison_op INT {pin=1}
i_battleplayerarmypercentageofmatchingunits_ ::= I_BATTLEPLAYERARMYPERCENTAGEOFMATCHINGUNITS ID comparison_op number {pin=1}
i_battleplayerarmynumberofmatchingunits_ ::= I_BATTLEPLAYERARMYNUMBEROFMATCHINGUNITS ID comparison_op INT {pin=1}
localplayerhasmanualreinforcements_ ::= LOCALPLAYERHASMANUALREINFORCEMENTS {pin=1}
localplayerhasaireinforcements_ ::= LOCALPLAYERHASAIREINFORCEMENTS {pin=1}
trait_ ::= trait trait_ref comparison_op INT {pin=1}
hasancillary_ ::= HASANCILLARY ancillary_ref {pin=1}
fathertrait_ ::= FATHERTRAIT trait_ref comparison_op INT {pin=1}
factionleadertrait_ ::= FACTIONLEADERTRAIT trait_ref comparison_op INT {pin=1}
attribute_ ::= ATTRIBUTE character_attribute comparison_op INT {pin=1}
remainingmppercentage_ ::= REMAININGMPPERCENTAGE comparison_op number {pin=1}
i_remainingmppercentage_ ::= I_REMAININGMPPERCENTAGE name_ comparison_op number {pin=1}
i_charactercanmove_ ::= I_CHARACTERCANMOVE name_ {pin=1}
noactionthisturn_ ::= NOACTIONTHISTURN {pin=1}
agenttype_ ::= AGENTTYPE EQUALS character_type {pin=1}
trainedagenttype_ ::= TRAINEDAGENTTYPE EQUALS character_type {pin=1}
disastertype_ ::= DISASTERTYPE disaster_type {pin=1}
culturetype_ ::= CULTURETYPE culture_ref {pin=1}
originalfactiontype_ ::= ORIGINALFACTIONTYPE faction_ref {pin=1}
originalculturetype_ ::= ORIGINALCULTURETYPE culture_ref {pin=1}
isgeneral_ ::= ISGENERAL {pin=1}
isadmiral_ ::= ISADMIRAL {pin=1}
remasterededucation_ ::= REMASTEREDEDUCATION {pin=1}
endedinsettlement_ ::= ENDEDINSETTLEMENT {pin=1}
isfactionleader_ ::= ISFACTIONLEADER {pin=1}
isfactionheir_ ::= ISFACTIONHEIR {pin=1}
ismarried_ ::= ISMARRIED {pin=1}
atsea_ ::= ATSEA {pin=1}
inenemylands_ ::= INENEMYLANDS {pin=1}
inbarbarianlands_ ::= INBARBARIANLANDS {pin=1}
inuncivilisedlands_ ::= INUNCIVILISEDLANDS {pin=1}
isbesieging_ ::= ISBESIEGING {pin=1}
isundersiege_ ::= ISUNDERSIEGE {pin=1}
i_withdrawsbeforebattle_ ::= I_WITHDRAWSBEFOREBATTLE {pin=1}
endedinenemyzoc_ ::= ENDEDINENEMYZOC {pin=1}
adviseaction_ ::= ADVISEACTION EQUALS character_action_advice {pin=1}
i_charactertypenearcharactertype_ ::= I_CHARACTERTYPENEARCHARACTERTYPE faction_ref character_type INT faction_ref character_type {pin=1}
i_charactertypeneartile_ ::= I_CHARACTERTYPENEARTILE (LOCAL_FACTION|faction_ref) (character_type|'named_character') COMMA? number COMMA? coords {pin=1}
i_characternameneartile_ ::= I_CHARACTERNAMENEARTILE (LOCAL_FACTION|faction_ref) COMMA name_ COMMA number coords {pin=1}
tradingresource_ ::= TRADINGRESOURCE resource_ref? {pin=1}
regiontradingresource_ ::= REGIONTRADINGRESOURCE resource_ref {pin=1}
tradingexotic_ ::= TRADINGEXOTIC {pin=1}
distancecapital_ ::= DISTANCECAPITAL comparison_op INT {pin=1}
distancehome_ ::= DISTANCEHOME comparison_op INT {pin=1}
tradinggroup_ ::= TRADINGGROUP ID {pin=1}
regionmerchantcount_ ::= REGIONMERCHANTCOUNT comparison_op INT {pin=1}
preciousminecount_ ::= PRECIOUSMINECOUNT comparison_op INT {pin=1}
isfromfaction_ ::= ISFROMFACTION faction_ref {pin=1}
nightbattlesenabled_ ::= NIGHTBATTLESENABLED {pin=1}
hasoffice_ ::= HASOFFICE ID {pin=1}
factiontype_ ::= FACTIONTYPE faction_ref {pin=1}
targetfactiontype_ ::= TARGETFACTIONTYPE faction_ref {pin=1}
factionculturetype_ ::= FACTIONCULTURETYPE culture_ref {pin=1}
targetfactionculturetype_ ::= TARGETFACTIONCULTURETYPE culture_ref {pin=1}
trainedunitcategory_ ::= TRAINEDUNITCATEGORY unit_category {pin=1}
unitcategory_ ::= UNITCATEGORY EQUALS unit_category {pin=1}
senatemissiontimeremaining_ ::= SENATEMISSIONTIMEREMAINING comparison_op INT {pin=1}
mediantaxlevel_ ::= MEDIANTAXLEVEL comparison_op tax_level {pin=1}
modetaxlevel_ ::= MODETAXLEVEL comparison_op tax_level {pin=1}
i_modetaxlevel_ ::= I_MODETAXLEVEL faction_ref comparison_op tax_level {pin=1}
missionsuccesslevel_ ::= MISSIONSUCCESSLEVEL comparison_op success_level {pin=1}
missionsucceeded_ ::= MISSIONSUCCEEDED {pin=1}
missionfactiontargettype_ ::= MISSIONFACTIONTARGETTYPE faction_ref {pin=1}
missionculturetargettype_ ::= MISSIONCULTURETARGETTYPE culture_ref {pin=1}
diplomaticstancefromcharacter_ ::= DIPLOMATICSTANCEFROMCHARACTER name_ comparison_op diplomatic_stance_for_conditions {pin=1}
diplomaticstancefromfaction_ ::= DIPLOMATICSTANCEFROMFACTION faction_ref comparison_op diplomatic_stance_for_conditions {pin=1}
factionhasallies_ ::= FACTIONHASALLIES {pin=1}
losingmoney_ ::= LOSINGMONEY {pin=1}
i_losingmoney_ ::= I_LOSINGMONEY faction_ref {pin=1}
factionisalive_ ::= FACTIONISALIVE faction_ref {pin=1}
supportcostspercentage_ ::= SUPPORTCOSTSPERCENTAGE comparison_op number {pin=1}
treasury_ ::= TREASURY comparison_op INT {pin=1}
onawarfooting_ ::= ONAWARFOOTING {pin=1}
i_factionbesieging_ ::= I_FACTIONBESIEGING faction_ref {pin=1}
i_factionbesieged_ ::= I_FACTIONBESIEGED faction_ref {pin=1}
i_numberofsettlements_ ::= I_NUMBEROFSETTLEMENTS faction_ref comparison_op INT {pin=1}
i_numberofheirs_ ::= I_NUMBEROFHEIRS faction_ref comparison_op INT {pin=1}
i_factionneartile_ ::= I_FACTIONNEARTILE faction_ref INT COMMA? (coords|coords_no_comma) {pin=1}
settlementstaken_ ::= SETTLEMENTSTAKEN comparison_op INT {pin=1}
battlesfought_ ::= BATTLESFOUGHT comparison_op INT {pin=1}
battleswon_ ::= BATTLESWON comparison_op INT {pin=1}
battleslost_ ::= BATTLESLOST comparison_op INT {pin=1}
defensivesiegesfought_ ::= DEFENSIVESIEGESFOUGHT comparison_op INT {pin=1}
defensivesiegeswon_ ::= DEFENSIVESIEGESWON comparison_op INT {pin=1}
offensivesiegesfought_ ::= OFFENSIVESIEGESFOUGHT comparison_op INT {pin=1}
offensivesiegeswon_ ::= OFFENSIVESIEGESWON comparison_op INT {pin=1}
factionwideancillaryexists_ ::= FACTIONWIDEANCILLARYEXISTS ancillary_ref BOOLEAN {pin=1}
isally_ ::= ISALLY faction_ref {pin=1}
isprotectorate_ ::= ISPROTECTORATE faction_ref {pin=1}
isprotector_ ::= ISPROTECTOR faction_ref {pin=1}
issamesuperfaction_ ::= ISSAMESUPERFACTION faction_ref {pin=1}
localplayerbattlesfought_ ::= LOCALPLAYERBATTLESFOUGHT comparison_op INT {pin=1}
toggled_ ::= TOGGLED ID+ {pin=1}
majoreventactive_ ::= MAJOREVENTACTIVE STRING <<local_or faction_ref>>? {pin=1}
randompercent_ ::= RANDOMPERCENT comparison_op INT {pin=1}
truecondition_ ::= TRUECONDITION {pin=1}
worldwideancillaryexists_ ::= WORLDWIDEANCILLARYEXISTS ancillary_ref BOOLEAN {pin=1}
i_istutorialenabled_ ::= I_ISTUTORIALENABLED {pin=1}
i_isplayerturn_ ::= I_ISPLAYERTURN EQUALS INT {pin=1}
constructionitemclicked_ ::= CONSTRUCTIONITEMCLICKED (field_construction_item|building_level_ref) {pin=1}
recruitmentitemclicked_ ::= RECRUITMENTITEMCLICKED name_ {pin=1}
charactername_ ::= CHARACTERNAME name_ {pin=1}
scrolldidopen_ ::= SCROLLDIDOPEN ID {pin=1}
unithasrouted_ ::= UNITHASROUTED unit_ref {pin=1}
battleunitactionstatus_ ::= BATTLEUNITACTIONSTATUS ID action_status {pin=1}
i_amountofunitinsettlement_ ::= I_AMOUNTOFUNITINSETTLEMENT settlement_ref INT name_ {pin=1}
i_unitcardselected_ ::= I_UNITCARDSELECTED (COMMA? unit_ref COMMA INT)+ {pin=1}
i_comparecounter_ ::= I_COMPARECOUNTER ID comparison_op INT {pin=1}
testfaction_ ::= TESTFACTION faction_ref {pin=1}
langis_ ::= LANGIS ID {pin=1}
i_timerelapsed_ ::= I_TIMERELAPSED ID? comparison_op INT {pin=1}
i_soundplaying_ ::= I_SOUNDPLAYING ID {pin=1}
hasresource_ ::= HASRESOURCE resource_ref {pin=1}
settlementrevoltingfrom_ ::= SETTLEMENTREVOLTINGFROM faction_ref {pin=1}
iscapital_ ::= ISCAPITAL {pin=1}
settlementname_ ::= SETTLEMENTNAME settlement_ref {pin=1}
governorbuildingexists_ ::= GOVERNORBUILDINGEXISTS EQUALS building_level_ref {pin=1}
settlementbuildingexists_ ::= SETTLEMENTBUILDINGEXISTS comparison_op building_level_ref {pin=1}
homesettlementbuildingexists_ ::= HOMESETTLEMENTBUILDINGEXISTS comparison_op building_level_ref {pin=1}
settlementorderlevel_ ::= SETTLEMENTORDERLEVEL settlement_order_type comparison_op INT {pin=1}
settlementcapabilitylevel_ ::= SETTLEMENTCAPABILITYLEVEL ID comparison_op INT {pin=1}
buildingfinishedbygovernor_ ::= BUILDINGFINISHEDBYGOVERNOR EQUALS building_level_ref {pin=1}
settlementbuildingfinished_ ::= SETTLEMENTBUILDINGFINISHED comparison_op building_level_ref {pin=1}
governorpluginexists_ ::= GOVERNORPLUGINEXISTS comparison_op ID {pin=1}
governorpluginfinished_ ::= GOVERNORPLUGINFINISHED comparison_op ID {pin=1}
governortaxlevel_ ::= GOVERNORTAXLEVEL comparison_op tax_level {pin=1}
settlementtaxlevel_ ::= SETTLEMENTTAXLEVEL comparison_op tax_level {pin=1}
governorinresidence_ ::= GOVERNORINRESIDENCE {pin=1}
governorloyaltylevel_ ::= GOVERNORLOYALTYLEVEL comparison_op loyalty_to_governor_level {pin=1}
settlementloyaltylevel_ ::= SETTLEMENTLOYALTYLEVEL comparison_op loyalty_to_governor_level {pin=1}
riotrisk_ ::= RIOTRISK comparison_op INT {pin=1}
buildingqueueidledespitecash_ ::= BUILDINGQUEUEIDLEDESPITECASH {pin=1}
trainingqueueidledespitecash_ ::= TRAININGQUEUEIDLEDESPITECASH {pin=1}
i_settlementexists_ ::= I_SETTLEMENTEXISTS settlement_ref {pin=1}
i_settlementowner_ ::= I_SETTLEMENTOWNER <<local_or settlement_ref>> equality_op faction_ref {pin=1}
i_settlementownerculture_ ::= I_SETTLEMENTOWNERCULTURE <<local_or settlement_ref>> EQUALS culture_ref {pin=1}
i_settlementlevel_ ::= I_SETTLEMENTLEVEL <<local_or settlement_ref>> comparison_op settlement_level {pin=1}
advisefinancialbuild_ ::= ADVISEFINANCIALBUILD EQUALS ID {pin=1}
advisebuild_ ::= ADVISEBUILD EQUALS ID {pin=1}
adviserecruit_ ::= ADVISERECRUIT EQUALS name_ {pin=1}
settlementpopulationmaxedout_ ::= SETTLEMENTPOPULATIONMAXEDOUT {pin=1}
settlementpopulationtoolow_ ::= SETTLEMENTPOPULATIONTOOLOW {pin=1}
settlementautomanaged_ ::= SETTLEMENTAUTOMANAGED automanage_type {pin=1}
feralsettlementautomanaged_ ::= FERALSETTLEMENTAUTOMANAGED automanage_type {pin=1}
percentageofpopulationingarrison_ ::= PERCENTAGEOFPOPULATIONINGARRISON comparison_op INT {pin=1}
garrisontopopulationratio_ ::= GARRISONTOPOPULATIONRATIO comparison_op number {pin=1}
garrisonsettlementratio_ ::= GARRISONSETTLEMENTRATIO comparison_op number {pin=1}
healthpercentage_ ::= HEALTHPERCENTAGE comparison_op INT {pin=1}
settlementhasplague_ ::= SETTLEMENTHASPLAGUE {pin=1}
isfortgarrisoned_ ::= ISFORTGARRISONED {pin=1}
issettlementgarrisoned_ ::= ISSETTLEMENTGARRISONED {pin=1}
issettlementrioting_ ::= ISSETTLEMENTRIOTING {pin=1}
i_numberunitsinsettlement_ ::= I_NUMBERUNITSINSETTLEMENT settlement_ref ID comparison_op INT {pin=1}
i_advisorspeechplaying_ ::= I_ADVISORSPEECHPLAYING {pin=1}
characterislocal_ ::= CHARACTERISLOCAL {pin=1}
targetcharacterislocal_ ::= TARGETCHARACTERISLOCAL {pin=1}
settlementislocal_ ::= SETTLEMENTISLOCAL {pin=1}
targetsettlementislocal_ ::= TARGETSETTLEMENTISLOCAL {pin=1}
regionislocal_ ::= REGIONISLOCAL {pin=1}
targetregionislocal_ ::= TARGETREGIONISLOCAL {pin=1}
armyislocal_ ::= ARMYISLOCAL {pin=1}
armyisgarrison_ ::= ARMYISGARRISON {pin=1}
targetarmyislocal_ ::= TARGETARMYISLOCAL {pin=1}
factionislocal_ ::= FACTIONISLOCAL {pin=1}
i_localfaction_ ::= I_LOCALFACTION faction_ref {pin=1}
targetfactionislocal_ ::= TARGETFACTIONISLOCAL {pin=1}
i_turnnumber_ ::= I_TURNNUMBER comparison_op INT {pin=1}
i_mapname_ ::= I_MAPNAME txt_file_ {pin=1}
i_threadcount_ ::= I_THREADCOUNT ID comparison_op INT {pin=1}
i_istriggertrue_ ::= I_ISTRIGGERTRUE ID {pin=1}
incomingmessagetype_ ::= INCOMINGMESSAGETYPE ID {pin=1}
i_advisorverbosity_ ::= I_ADVISORVERBOSITY comparison_op INT {pin=1}
i_advisorvisible_ ::= I_ADVISORVISIBLE {pin=1}
i_characterselected_ ::= I_CHARACTERSELECTED name_ {pin=1}
i_agentselected_ ::= I_AGENTSELECTED character_type {pin=1}
i_settlementselected_ ::= I_SETTLEMENTSELECTED settlement_ref {pin=1}
shortcuttriggered_ ::= SHORTCUTTRIGGERED ID (COLON COLON)? ID {pin=1}
i_advancedstatsscrollisopen_ ::= I_ADVANCEDSTATSSCROLLISOPEN {pin=1}
buttonpressed_ ::= BUTTONPRESSED ID {pin=1}
scrollopened_ ::= SCROLLOPENED ID {pin=1}
scrollclosed_ ::= SCROLLCLOSED ID {pin=1}
scrolladvicerequested_ ::= SCROLLADVICEREQUESTED ID {pin=1}
i_annotationdisplayed_ ::= I_ANNOTATIONDISPLAYED ID {pin=1}
feraluitype_ ::= FERALUITYPE ID {pin=1}
merchantisavailabletobuild_ ::= MERCHANTISAVAILABLETOBUILD {pin=1}
settlementhasdamagedbuilding_ ::= SETTLEMENTHASDAMAGEDBUILDING {pin=1}
localplayerhasreinforcements_ ::= LOCALPLAYERHASREINFORCEMENTS {pin=1}
settlementmerchanttradingwith_ ::= SETTLEMENTMERCHANTTRADINGWITH faction_ref {pin=1} // This is not documented but used
settlementownedby_ ::= SETTLEMENTOWNEDBY faction_ref {pin=1}                         // This is not documented but used
factionbuildingexists_ ::= FACTIONBUILDINGEXISTS comparison_op ID {pin=1}            // This is not documented but used

// Condition parameters
conflict_type ::= SUCCESSFULAMBUSH|FAILEDAMBUSH|NORMAL|SIEGE|SALLYBESIEGER|NAVAL|WITHDRAW
battle_success ::= CLOSE|AVERAGE|CLEAR|CRUSHING
siege_engine_class ::= TOWER|RAM|LADDER|SAP_POINT|CATAPULT|TREBUCHET|BALLISTA|SCORPION
tower_defence_type ::= ARROW_TOWER|BALLISTA_TOWER|NONE
gate_defence_type ::= HOT_SAND|BURNING_OIL
battle_building_type ::= AMBIENT|MAJOR|WALL|TOWER|GATE
unit_class ::= LIGHT|HEAVY|SKIRMISH|MISSILE|SPEARMEN
unit_category ::= INFANTRY|CAVALRY|SIEGE|HANDLER|SHIP|NON_COMBATANT
hide_type ::= HIDE_FOREST|HIDE_IMPROVED_FOREST|HIDE_LONG_GRASS|HIDE_ANYWHERE
unit_formation::=  SQUARE|SQUARE_HOLLOW|COLUMN|HORDE|PHALANX|TESTUDO|WEDGE|SCHILTROM|SHIELD_WALL
special_ability ::= TESTUDO|PHALANX|WEDGE|DROP_ENGINES|FLAMING_AMMO|WARCRY|CHANT|CURSE|BERSERK|RALLY|KILL_ELEPHANTS|MOVE_AND_SHOOT|CANTABRIAN_CIRCLE|SHIELD_WALL|STEALTH|FEIGNED_ROUT|SCHILTROM
mount_class ::= HORSE|CAMEL|ELEPHANT|CHARIOT|SCORPION_CART
action_status ::= IDLING|HIDING|READY|REFORMING|MOVING|WITHDRAWING|MISSILES_FIRING|MISSILES_RELOADING|CHARGING|FIGHTING|PURSUING|ROUTING|FIGHTING_BACKS_TO_THE_WALLS|RUNNING_AMOK|RALLYING|DEAD|LEAVING_BATTLE|ENTERING_BATTLE|LEFT_BATTLE|
attack_direction ::= FRONT|FLANK|REAR
disaster_type ::= EARTHQUAKE|FLOOD|HORDE|FIRE|RIOT|STORM|VOLCANO
character_action_advice ::= ATTACK_ENEMY|ATTACK_SETTLEMENT|MERGE_ARMIES|PATROL_REGION|MOVE_TO_REGION|DO_NOTHING
character_type ::= ALL|FAMILY|NAMED_CHARACTER|GENERAL|ADMIRAL|agent_type
tax_level ::= TAX_LOW|TAX_NORMAL|TAX_HIGH|TAX_EXTORTIONATE
success_level ::= NOT_SUCCESSFUL|SLIGHTLY_SUCCESSFUL|PARTLY_SUCCESSFUL|HIGHLY_SUCCESSFUL
diplomatic_stance_for_conditions ::= ALLIED|SUSPICIOUS|NEUTRAL|HOSTILE|ATWAR
loyalty_to_governor_level ::= LOYALTY_REVOLTING|LOYALTY_RIOTING|LOYALTY_DISILLUSIONED|LOYALTY_CONTENT|LOYALTY_HAPPY
automanage_type ::= TROOPS|BUILDINGS|MECHANICS

// #### Commands ####
command_ ::= senate_mission_help_player_|senate_mission_assassination_|senate_mission_cease_hostilities_|senate_mission_declare_war_|senate_mission_broker_peace_|senate_mission_take_city_|move_to_settlement_|snap_to_settlement_|clear_restrict_strat_movement_|restrict_strat_movement_|disable_diplomacy_ui_|enable_diplomacy_voices_|enable_unit_voices_|hide_ui_element_|show_ui_element_|enable_ui_card_|disable_ui_card_|disable_all_ui_cards_|enable_all_ui_cards_|disable_agent_hub_all_|enable_agent_hub_all_|disable_agent_hub_|enable_agent_hub_|point_at_agent_hub_|set_marriage_allowed_|trigger_marriage_proposal_|deselect_current_selection_|force_autoresolve_outcome_|force_diplomacy_|create_mercenary_pool_|force_agent_succeed_|allow_campaign_battles_|spawn_character_child_|stop_point_at_indicator_|stop_all_point_at_indicators_|set_battle_|restrict_battle_movement_|clear_restrict_battle_movement_|point_at_diplomacy_offer_|point_at_move_retinue_|disable_move_retinue_all_|enable_move_retinue_all_|disable_move_retinue_|enable_move_retinue_|block_unit_selection_|forced_gate_success_|strat_selection_unblocker_|clear_strat_selection_unblocker_|open_stop_tutorial_confirmation_dialog_|set_label_|goto_|force_deselect_trigger_|box_drag_selection_|force_settlement_tab_|click_drag_move_|toggle_minimap_|close_news_panel_|ui_card_selection_lock_|disable_specific_shortcut_|set_advice_page_|advance_completed_tasks_|set_min_formation_width_|script_log_|ai_active_set_|release_unit_|hiding_enabled_set_|swimming_enabled_set_|pause_battle_|unit_immediate_place_|unit_order_halt_|unit_order_move_|unit_order_move_to_orientation_|unit_order_move_relative_|unit_order_attack_unit_|unit_order_attack_closest_unit_|unit_order_change_formation_|unit_order_move_to_missile_range_|unit_order_turn_|unit_set_morale_|unit_unset_morale_|unit_set_weapon_upgrade_|unit_set_armour_upgrade_|unit_set_experience_|kill_unit_|reduce_unit_strength_|unit_set_guard_mode_|unit_set_skirmish_mode_|unit_set_fire_at_will_mode_|unit_set_formation_spacing_|unit_taunt_|unit_use_special_ability_|unit_group_enable_automation_|unit_group_automate_defend_position_|unit_group_automate_attack_|unit_group_immediate_place_|unit_group_order_halt_|unit_group_order_move_formed_|unit_group_order_move_unformed_|unit_group_order_relative_move_formed_|unit_group_order_relative_move_unformed_|unit_group_move_to_missile_range_of_unit_|unit_group_move_to_missile_range_of_group_|unit_group_order_attack_unit_|unit_group_order_attack_group_|unit_group_order_change_group_formation_|unit_group_order_turn_|unit_group_set_morale_|unit_group_unset_morale_|unit_group_change_unit_formation_|unit_group_set_guard_mode_|unit_group_set_skirmish_mode_|unit_group_set_fire_at_will_mode_|unit_group_set_formation_spacing_|force_ai_control_|finish_battle_|move_strat_camera_|set_strat_camera_speed_|snap_strat_camera_|zoom_strat_camera_|camera_restrictions_set_|camera_event_cuts_active_set_|camera_default_mode_set_|battle_default_camera_|battle_general_camera_|set_camera_bookmark_|use_camera_bookmark_|camera_position_at_bookmark__|camera_zoom_to_bookmark_|camera_position_|camera_zoom_to_|camera_look_at_position_|camera_look_at_unit_|camera_track_unit_|camera_zoom_to_unit_|e_camera_zoom_to_unit_|inhibit_camera_input_|declare_prologue_|terminate_prologue_|provoke_rebellion_|move_|reposition_character_|replenish_action_points_|replenish_units_|spawn_character_|spawn_army_|engage_armies_|disable_popups_|end_benchmark_|disable_pause_shortcut_in_campaign_|override_superfaction_popularity_|set_faction_senate_standing_|set_faction_people_standing_|message_prompt_|include_script_|terminate_script_|break_|set_ao_visible_|set_all_ao_visible_|terminate_monitor_|declare_counter_|declare_persistent_counter_|inc_counter_|set_counter_|counter_operation_|store_counter_|retrieve_counter_|prepare_for_battle_|declare_show_me_|label_unit_|label_location_|define_unit_group_|undefine_unit_group_|remove_unit_from_group_|declare_timer_|restart_timer_|heed_pause_|wait_|campaign_wait_|battle_wait_|suspend_during_battle_|set_music_state_|release_music_control_|play_sound_event_|play_sound_flourish_|stop_sound_event_|point_at_character_|point_at_settlement_|e_point_at_settlement_|point_at_strat_position_|point_at_strat_position_alt_|point_at_message_|ui_flash_start_|ui_flash_stop_|settlement_flash_start_|settlement_flash_stop_|character_flash_start_|character_flash_stop_|point_at_location_|point_at_unit_pos_|point_at_unit_group_pos_|remove_battle_map_arrow_|point_at_card_|point_at_unit_card_|e_point_at_unit_card_|show_mouse_button_animation_|show_movie_|hide_ui_|show_ui_|disable_ui_|enable_ui_|disable_entire_ui_|enable_entire_ui_|set_cards_selectable_|disable_cursor_|enable_cursor_|rename_settlement_in_region_|add_religion_|add_hidden_resource_|remove_hidden_resource_|destroy_building_|reveal_tile_|hide_all_revealed_tiles_|play_video_|advance_advice_thread_|dismiss_advice_|dismiss_advisor_|suspend_unscripted_advice_|select_character_|e_select_character_|select_settlement_|e_select_settlement_|call_object_shortcut_|simulate_mouse_click_|select_ui_element_|disable_shortcuts_|filter_unit_commands_|filter_unit_group_commands_|filter_unit_selection_commands_|filter_settlement_commands_|filter_character_commands_|filter_all_ui_commands_|ui_indicator_|ui_indicator_remove_|steal_esc_key_|highlight_recruitment_item_|highlight_construction_item_|show_annotations_|e_select_unit_|open_siege_scroll_|control_feral_anim_|select_captial_|show_building_info_|show_unit_info_|tactical_view_locked_|console_command_
{recoverWhile=command_recover}
private command_recover ::= !(ends_of_commands|statement)
private ends_of_commands ::= END_IF|END_WHILE|END_FOR|END_MONITOR|END_BATTLE|END_BENCHMARK|END_SCRIPT

senate_mission_help_player_ ::= SENATE_MISSION_HELP_PLAYER senate_reward {pin=1}
senate_mission_assassination_ ::= SENATE_MISSION_ASSASSINATION senate_reward name_ {pin=1}
senate_mission_cease_hostilities_ ::= SENATE_MISSION_CEASE_HOSTILITIES senate_reward faction_ref {pin=1}
senate_mission_declare_war_ ::= SENATE_MISSION_DECLARE_WAR senate_reward faction_ref {pin=1}
senate_mission_broker_peace_ ::= SENATE_MISSION_BROKER_PEACE senate_reward faction_ref {pin=1}
senate_mission_take_city_ ::= SENATE_MISSION_TAKE_CITY senate_reward COMMA settlement_ref (COMMA BOOLEAN)? {pin=1}
move_to_settlement_ ::= MOVE_TO_SETTLEMENT settlement_ref {pin=1}
snap_to_settlement_ ::= SNAP_TO_SETTLEMENT settlement_ref {pin=1}
clear_restrict_strat_movement_ ::= CLEAR_RESTRICT_STRAT_MOVEMENT {pin=1}
restrict_strat_movement_ ::= RESTRICT_STRAT_MOVEMENT faction_ref COMMA coords {pin=1}
disable_diplomacy_ui_ ::= DISABLE_DIPLOMACY_UI {pin=1}
enable_diplomacy_voices_ ::= ENABLE_DIPLOMACY_VOICES on_off {pin=1}
enable_unit_voices_ ::= ENABLE_UNIT_VOICES on_off {pin=1}
hide_ui_element_ ::= HIDE_UI_ELEMENT ID {pin=1}
show_ui_element_ ::= SHOW_UI_ELEMENT ID {pin=1}
disable_ui_card_ ::= DISABLE_UI_CARD ui_card_type COMMA? INT {pin=1}
disable_all_ui_cards_ ::= DISABLE_ALL_UI_CARDS ui_card_type? {pin=1}
enable_all_ui_cards_ ::= ENABLE_ALL_UI_CARDS ui_card_type? {pin=1}
disable_agent_hub_all_ ::= DISABLE_AGENT_HUB_ALL agent_hub_targets {pin=1}
enable_agent_hub_all_ ::= ENABLE_AGENT_HUB_ALL agent_hub_targets {pin=1}
disable_agent_hub_ ::= DISABLE_AGENT_HUB name_ {pin=1}
enable_agent_hub_ ::= ENABLE_AGENT_HUB agent_hub_targets COMMA (name_|ID) {pin=1}
point_at_agent_hub_ ::= POINT_AT_AGENT_HUB agent_hub_targets COMMA (name_|ID) (COMMA point_shape)? {pin=1}
set_marriage_allowed_ ::= SET_MARRIAGE_ALLOWED on_off {pin=1}
trigger_marriage_proposal_ ::= TRIGGER_MARRIAGE_PROPOSAL INT {pin=1}
deselect_current_selection_ ::= DESELECT_CURRENT_SELECTION {pin=1}
force_autoresolve_outcome_ ::= FORCE_AUTORESOLVE_OUTCOME (faction_ref|yes_no) {pin=1}
force_diplomacy_ ::= FORCE_DIPLOMACY accept_reject COMMA yes_no {pin=1}
create_mercenary_pool_ ::= CREATE_MERCENARY_POOL ID
                             mercenary_pool_regions
                             mercenary_pool_unit+
                           END {pin=1}
force_agent_succeed_ ::= FORCE_AGENT_SUCCEED yes_no {pin=1}
allow_campaign_battles_ ::= ALLOW_CAMPAIGN_BATTLES yes_no {pin=1}
spawn_character_child_ ::= SPAWN_CHARACTER_CHILD faction_ref COMMA
AGE INT COMMA
'birth_season' season_enum COMMA
'father' name_ COMMA
'name' name_ COMMA
'surname' name_
{pin=1}
stop_point_at_indicator_ ::= STOP_POINT_AT_INDICATOR {pin=1}
stop_all_point_at_indicators_ ::= STOP_ALL_POINT_AT_INDICATORS {pin=1}
set_battle_ ::= SET_BATTLE txt_file_ {pin=1}
restrict_battle_movement_ ::= RESTRICT_BATTLE_MOVEMENT CIRCLE COMMA LABEL ID COMMA INT {pin=1}
clear_restrict_battle_movement_ ::= CLEAR_RESTRICT_BATTLE_MOVEMENT {pin=1}
point_at_diplomacy_offer_ ::= POINT_AT_DIPLOMACY_OFFER COMMA ID (COMMA point_shape)? (COMMA SCALE number number)? {pin=1}
point_at_move_retinue_ ::= POINT_AT_MOVE_RETINUE (CHARACTER_UCF COMMA name_|ANCILLARY COMMA name_ COMMA ancillary_ref) {pin=1}
disable_move_retinue_all_ ::= DISABLE_MOVE_RETINUE_ALL (CHARACTER_UCF|ANCILLARY) {pin=1}
enable_move_retinue_all_ ::= ENABLE_MOVE_RETINUE_ALL (CHARACTER_UCF|ANCILLARY) {pin=1}
disable_move_retinue_ ::= DISABLE_MOVE_RETINUE (CHARACTER_UCF COMMA name_|ANCILLARY COMMA name_ COMMA ancillary_ref) {pin=1}
enable_move_retinue_ ::= ENABLE_MOVE_RETINUE (CHARACTER_UCF COMMA name_|ANCILLARY COMMA name_ COMMA ancillary_ref) {pin=1}
block_unit_selection_ ::= BLOCK_UNIT_SELECTION on_off ID {pin=1}
forced_gate_success_ ::= FORCED_GATE_SUCCESS on_off COMMA INT? {pin=1}
strat_selection_unblocker_ ::= STRAT_SELECTION_UNBLOCKER (CHARACTER on_off (name_|NONE)|SETTLEMENT on_off (settlement_ref|NONE)) {pin=1}
clear_strat_selection_unblocker_ ::= CLEAR_STRAT_SELECTION_UNBLOCKER {pin=1}
open_stop_tutorial_confirmation_dialog_ ::= OPEN_STOP_TUTORIAL_CONFIRMATION_DIALOG {pin=1}
set_label_ ::= SET_LABEL ID {pin=1}
goto_ ::= GOTO ID {pin=1}
force_deselect_trigger_ ::= FORCE_DESELECT_TRIGGER {pin=1}
box_drag_selection_ ::= BOX_DRAG_SELECTION on_off {pin=1}
force_settlement_tab_ ::= FORCE_SETTLEMENT_TAB settlement_tab {pin=1}
click_drag_move_ ::= CLICK_DRAG_MOVE on_off {pin=1}
toggle_minimap_ ::= TOGGLE_MINIMAP {pin=1}
close_news_panel_ ::= CLOSE_NEWS_PANEL {pin=1}
ui_card_selection_lock_ ::= UI_CARD_SELECTION_LOCK on_off {pin=1}
disable_specific_shortcut_ ::= DISABLE_SPECIFIC_SHORTCUT ID ID BOOLEAN {pin=1}
set_advice_page_ ::= SET_ADVICE_PAGE INT {pin=1}
advance_completed_tasks_ ::= ADVANCE_COMPLETED_TASKS INT {pin=1}
set_min_formation_width_ ::= SET_MIN_FORMATION_WIDTH INT {pin=1}
script_log_ ::= SCRIPT_LOG STRING {pin=1}
ai_active_set_ ::= AI_ACTIVE_SET on_off {pin=1}
release_unit_ ::= RELEASE_UNIT ID {pin=1}
hiding_enabled_set_ ::= HIDING_ENABLED_SET BOOLEAN {pin=1}
swimming_enabled_set_ ::= SWIMMING_ENABLED_SET BOOLEAN {pin=1}
pause_battle_ ::= PAUSE_BATTLE {pin=1}
unit_immediate_place_ ::= UNIT_IMMEDIATE_PLACE ID (coords|coords_no_comma) COMMA? number (COMMA INT)? {pin=1}
unit_order_halt_ ::= UNIT_ORDER_HALT ID {pin=1}
unit_order_move_ ::= UNIT_ORDER_MOVE ID (coords|coords_no_comma|ID) run_walk? {pin=1}
unit_order_move_to_orientation_ ::= UNIT_ORDER_MOVE_TO_ORIENTATION ID ID INT INT INT INT run_walk? {pin=1}
unit_order_move_relative_ ::= UNIT_ORDER_MOVE_RELATIVE ID INT INT run_walk? {pin=1}
unit_order_attack_unit_ ::= UNIT_ORDER_ATTACK_UNIT ID ID run_walk? {pin=1}
unit_order_attack_closest_unit_ ::= UNIT_ORDER_ATTACK_CLOSEST_UNIT ID INT run_walk? {pin=1}
unit_order_change_formation_ ::= UNIT_ORDER_CHANGE_FORMATION ID unit_formation {pin=1}
unit_order_move_to_missile_range_ ::= UNIT_ORDER_MOVE_TO_MISSILE_RANGE ID ID run_walk? {pin=1}
unit_order_turn_ ::= UNIT_ORDER_TURN ID INT (RELATIVE|ABSOLUTE) {pin=1}
unit_set_morale_ ::= UNIT_SET_MORALE ID morale {pin=1}
unit_unset_morale_ ::= UNIT_UNSET_MORALE ID {pin=1}
unit_set_weapon_upgrade_ ::= UNIT_SET_WEAPON_UPGRADE ID INT {pin=1}
unit_set_armour_upgrade_ ::= UNIT_SET_ARMOUR_UPGRADE ID INT {pin=1}
unit_set_experience_ ::= UNIT_SET_EXPERIENCE ID INT {pin=1}
kill_unit_ ::= KILL_UNIT ID {pin=1}
reduce_unit_strength_ ::= REDUCE_UNIT_STRENGTH ID INT {pin=1}
unit_set_guard_mode_ ::= UNIT_SET_GUARD_MODE ID on_off {pin=1}
unit_set_skirmish_mode_ ::= UNIT_SET_SKIRMISH_MODE ID on_off {pin=1}
unit_set_fire_at_will_mode_ ::= UNIT_SET_FIRE_AT_WILL_MODE ID on_off {pin=1}
unit_set_formation_spacing_ ::= UNIT_SET_FORMATION_SPACING ID (LOOSE|TIGHT) {pin=1}
unit_taunt_ ::= UNIT_TAUNT ID {pin=1}
unit_use_special_ability_ ::= UNIT_USE_SPECIAL_ABILITY ID {pin=1}
unit_group_enable_automation_ ::= UNIT_GROUP_ENABLE_AUTOMATION ID BOOLEAN {pin=1}
unit_group_automate_defend_position_ ::= UNIT_GROUP_AUTOMATE_DEFEND_POSITION ID coords_no_comma INT {pin=1}
unit_group_automate_attack_ ::= UNIT_GROUP_AUTOMATE_ATTACK ID ID {pin=1}
unit_group_immediate_place_ ::= UNIT_GROUP_IMMEDIATE_PLACE ID (coords|coords_no_comma) INT {pin=1}
unit_group_order_halt_ ::= UNIT_GROUP_ORDER_HALT ID {pin=1}
unit_group_order_move_formed_ ::= UNIT_GROUP_ORDER_MOVE_FORMED ID (coords|coords_no_comma|ID) run_walk? {pin=1}
unit_group_order_move_unformed_ ::= UNIT_GROUP_ORDER_MOVE_UNFORMED ID (coords|coords_no_comma|ID) run_walk? {pin=1}
unit_group_order_relative_move_formed_ ::= UNIT_GROUP_ORDER_RELATIVE_MOVE_FORMED ID coords_no_comma run_walk? {pin=1}
unit_group_order_relative_move_unformed_ ::= UNIT_GROUP_ORDER_RELATIVE_MOVE_UNFORMED ID (coords|coords_no_comma) run_walk? {pin=1}
unit_group_move_to_missile_range_of_unit_ ::= UNIT_GROUP_MOVE_TO_MISSILE_RANGE_OF_UNIT ID ID run_walk? {pin=1}
unit_group_move_to_missile_range_of_group_ ::= UNIT_GROUP_MOVE_TO_MISSILE_RANGE_OF_GROUP ID ID run_walk? {pin=1}
unit_group_order_attack_unit_ ::= UNIT_GROUP_ORDER_ATTACK_UNIT ID ID run_walk? {pin=1}
unit_group_order_attack_group_ ::= UNIT_GROUP_ORDER_ATTACK_GROUP ID ID run_walk? {pin=1}
unit_group_order_change_group_formation_ ::= UNIT_GROUP_ORDER_CHANGE_GROUP_FORMATION ID ID {pin=1}
unit_group_order_turn_ ::= UNIT_GROUP_ORDER_TURN ID INT RELATIVE? {pin=1}
unit_group_set_morale_ ::= UNIT_GROUP_SET_MORALE ID morale {pin=1}
unit_group_unset_morale_ ::= UNIT_GROUP_UNSET_MORALE ID {pin=1}
unit_group_change_unit_formation_ ::= UNIT_GROUP_CHANGE_UNIT_FORMATION ID unit_formation {pin=1}
unit_group_set_guard_mode_ ::= UNIT_GROUP_SET_GUARD_MODE ID on_off {pin=1}
unit_group_set_skirmish_mode_ ::= UNIT_GROUP_SET_SKIRMISH_MODE ID on_off {pin=1}
unit_group_set_fire_at_will_mode_ ::= UNIT_GROUP_SET_FIRE_AT_WILL_MODE ID on_off {pin=1}
unit_group_set_formation_spacing_ ::= UNIT_GROUP_SET_FORMATION_SPACING ID (LOOSE|TIGHT) {pin=1}
force_ai_control_ ::= FORCE_AI_CONTROL {pin=1}
finish_battle_ ::= FINISH_BATTLE {pin=1}
move_strat_camera_ ::= MOVE_STRAT_CAMERA coords {pin=1}
set_strat_camera_speed_ ::= SET_STRAT_CAMERA_SPEED INT {pin=1}
snap_strat_camera_ ::= SNAP_STRAT_CAMERA coords {pin=1}
zoom_strat_camera_ ::= ZOOM_STRAT_CAMERA number {pin=1}
camera_restrictions_set_ ::= CAMERA_RESTRICTIONS_SET on_off {pin=1}
camera_event_cuts_active_set_ ::= CAMERA_EVENT_CUTS_ACTIVE_SET on_off {pin=1}
camera_default_mode_set_ ::= CAMERA_DEFAULT_MODE_SET camera_mode {pin=1}
battle_default_camera_ ::= BATTLE_DEFAULT_CAMERA {pin=1}
battle_general_camera_ ::= BATTLE_GENERAL_CAMERA {pin=1}
set_camera_bookmark_ ::= SET_CAMERA_BOOKMARK INT COMMA coords_xyz COMMA? coords_xyz {pin=1}
use_camera_bookmark_ ::= USE_CAMERA_BOOKMARK INT {pin=1} // undocumented
camera_position_at_bookmark__ ::= CAMERA_POSITION_AT_BOOKMARK_ INT {pin=1}
camera_zoom_to_bookmark_ ::= CAMERA_ZOOM_TO_BOOKMARK INT number? {pin=1}
camera_position_ ::= CAMERA_POSITION coords_xyz coords_xyz {pin=1}
camera_zoom_to_ ::= CAMERA_ZOOM_TO coords_xyz coords_xyz number? {pin=1}
camera_look_at_position_ ::= CAMERA_LOOK_AT_POSITION FLOAT FLOAT {pin=1}
camera_look_at_unit_ ::= CAMERA_LOOK_AT_UNIT ID {pin=1}
camera_track_unit_ ::= CAMERA_TRACK_UNIT ID front_back_left_right INT INT number? {pin=1}
camera_zoom_to_unit_ ::= CAMERA_ZOOM_TO_UNIT ID {pin=1}
e_camera_zoom_to_unit_ ::= E_CAMERA_ZOOM_TO_UNIT ID {pin=1}
inhibit_camera_input_ ::= INHIBIT_CAMERA_INPUT BOOLEAN {pin=1}
declare_prologue_ ::= DECLARE_PROLOGUE {pin=1}
terminate_prologue_ ::= TERMINATE_PROLOGUE ID? {pin=1}
provoke_rebellion_ ::= PROVOKE_REBELLION <<local_or settlement_ref>> {pin=1}
move_ ::= MOVE name_ COMMA? coords {pin=1}
reposition_character_ ::= REPOSITION_CHARACTER name_ COMMA coords {pin=1}
replenish_action_points_ ::= REPLENISH_ACTION_POINTS name_ {pin=1}
replenish_units_ ::= REPLENISH_UNITS name_ {pin=1}
spawn_character_ ::= SPAWN_CHARACTER faction_ref name_ COMMA character_type COMMA character_skills COMMA AGE INT COMMA coords_with_xy {pin=1}
spawn_army_ ::= SPAWN_ARMY
  FACTION faction_ref (COMMA SUB_FACTION faction_ref)?
  CHARACTER name_ COMMA character_type COMMA (character_skills COMMA)? AGE INT COMMA COMMA? coords_with_xy
  (UNIT unit_ref COMMA? (SOLDIERS INT)? (EXP INT)? (ARMOUR INT)? (WEAPON_LVL INT)?)*
END {pin=1}
engage_armies_ ::= ENGAGE_ARMIES name_ COMMA name_ {pin=1}
disable_popups_ ::= DISABLE_POPUP {pin=1}
end_benchmark_ ::= END_BENCHMAR {pin=1}
disable_pause_shortcut_in_campaign_ ::= DISABLE_PAUSE_SHORTCUT_IN_CAMPAIGN BOOLEAN {pin=1}
override_superfaction_popularity_ ::= OVERRIDE_SUPERFACTION_POPULARITY faction_ref BOOLEAN {pin=1}
set_faction_senate_standing_ ::= SET_FACTION_SENATE_STANDING faction_ref (INT|ID) {pin=1}
set_faction_people_standing_ ::= SET_FACTION_PEOPLE_STANDING faction_ref (INT|ID) {pin=1}
message_prompt_ ::= MESSAGE_PROMPT OCB ID ID ID ID ID? CCB {pin=1}
include_script_ ::= INCLUDE_SCRIPT txt_file_ {pin=1}
terminate_script_ ::= TERMINATE_SCRIPT {pin=1}
break_ ::= BREAK {pin=1}
set_ao_visible_ ::= SET_AO_VISIBLE STRING show_hide region_ref? {pin=1}
set_all_ao_visible_ ::= SET_ALL_AO_VISIBLE STRING show_hide {pin=1}
terminate_monitor_ ::= TERMINATE_MONITOR {pin=1}
declare_counter_ ::= DECLARE_COUNTER ID {pin=1}
declare_persistent_counter_ ::= DECLARE_PERSISTENT_COUNTER ID {pin=1}
inc_counter_ ::= INC_COUNTER ID INT {pin=1}
set_counter_ ::= SET_COUNTER ID INT {pin=1}
counter_operation_ ::= COUNTER_OPERATION ID EQUALS ID math_op ID {pin=1}
store_counter_ ::= STORE_COUNTER ID scope ID {pin=1}
retrieve_counter_ ::= RETRIEVE_COUNTER ID scope ID {pin=1}
prepare_for_battle_ ::= PREPARE_FOR_BATTLE {pin=1}
declare_show_me_ ::= DECLARE_SHOW_ME {pin=1}
label_unit_ ::= LABEL_UNIT INT INT INT ID {pin=1}
label_location_ ::= LABEL_LOCATION (coords|coords_no_comma) ID {pin=1}
define_unit_group_ ::= DEFINE_UNIT_GROUP ID ID* {pin=1}
undefine_unit_group_ ::= UNDEFINE_UNIT_GROUP ID {pin=1}
remove_unit_from_group_ ::= REMOVE_UNIT_FROM_GROUP ID ID {pin=1}
declare_timer_ ::= DECLARE_TIMER ID {pin=1}
restart_timer_ ::= RESTART_TIMER ID? {pin=1}
heed_pause_ ::= HEED_PAUSE on_off {pin=1}
wait_ ::= WAIT number {pin=1}
campaign_wait_ ::= CAMPAIGN_WAIT number {pin=1}
battle_wait_ ::= BATTLE_WAIT number {pin=1}
suspend_during_battle_ ::= SUSPEND_DURING_BATTLE on_off {pin=1}
set_music_state_ ::= SET_MUSIC_STATE ('tension'|'mobilize'|'battle'|'custom' ID) {pin=1}
release_music_control_ ::= RELEASE_MUSIC_CONTRO {pin=1}
play_sound_event_ ::= PLAY_SOUND_EVENT ID (TAG EQUALS ID)? {pin=1}
play_sound_flourish_ ::= PLAY_SOUND_FLOURISH ID 'force_no_fade'? {pin=1}
stop_sound_event_ ::= STOP_SOUND_EVENT ID {pin=1}
point_at_character_ ::= POINT_AT_CHARACTER COMMA? ('slot' INT COMMA)? name_ (COMMA point_shape)? {pin=1}
point_at_settlement_ ::= POINT_AT_SETTLEMENT (COMMA? 'slot' INT)? (COMMA? settlement_ref)? (COMMA? point_shape)? {pin=1}
e_point_at_settlement_ ::= E_POINT_AT_SETTLEMEN {pin=1}
point_at_strat_position_ ::= POINT_AT_STRAT_POSITION (COMMA? 'slot' INT)? COMMA? coords (COMMA 'y_offset' INT)? {pin=1}
point_at_strat_position_alt_ ::= POINT_AT_STRAT_POSITION_ALT COMMA 'slot' INT COMMA coords COMMA 'y_offset' INT {pin=1}
point_at_message_ ::= POINT_AT_MESSAGE (ID|INT) direction? {pin=1}
ui_flash_start_ ::= UI_FLASH_START ID (COMMA? point_shape)? (COMMA? direction)? (COMMA SCALE number number)? {pin=1}
ui_flash_stop_ ::= UI_FLASH_STOP ID? {pin=1}
settlement_flash_start_ ::= SETTLEMENT_FLASH_START settlement_ref {pin=1}
settlement_flash_stop_ ::= SETTLEMENT_FLASH_STOP settlement_ref {pin=1}
character_flash_start_ ::= CHARACTER_FLASH_START name_ {pin=1}
character_flash_stop_ ::= CHARACTER_FLASH_STOP name_ {pin=1}
point_at_location_ ::= POINT_AT_LOCATION (coords|ID) point_shape? INT? {pin=1}
point_at_unit_pos_ ::= POINT_AT_UNIT_POS ID point_shape? INT? {pin=1}
point_at_unit_group_pos_ ::= POINT_AT_UNIT_GROUP_POS ID {pin=1}
remove_battle_map_arrow_ ::= REMOVE_BATTLE_MAP_ARROW {pin=1}
enable_ui_card_ ::= ENABLE_UI_CARD (
                      CHARACTER COMMA? name_|
                      UNIT COMMA? INT |
                      RECRUITMENT COMMA? unit_ref|
                      CONSTRUCTION COMMA? building_level_ref|
                      BUILDING COMMA? building_level_ref COMMA INT|
                      MERCENARIES COMMA? unit_ref|
                      FIELD_CONSTRUCTION COMMA? field_construction_item
                    ) (COMMA point_shape)? (COMMA color_ INT)? {pin=1}
point_at_card_ ::= POINT_AT_CARD (
                     CHARACTER COMMA? name_|
                     UNIT (COMMA? 'slot' INT)? (
                       (COMMA unit_ref)? COMMA INT |
                       COMMA name_
                     )?|
                     RECRUITMENT COMMA? unit_ref|
                     CONSTRUCTION COMMA? building_level_ref|
                     BUILDING COMMA? building_level_ref (COMMA INT)?|
                     MERCENARIES COMMA? unit_ref|
                     FIELD_CONSTRUCTION COMMA? ('watchtower'|)
                   ) (COMMA point_shape)? (COMMA color_ INT)? {pin=1}
point_at_unit_card_ ::= POINT_AT_UNIT_CARD ID COMMA? point_shape? {pin=1}
e_point_at_unit_card_ ::= E_POINT_AT_UNIT_CARD direction? {pin=1}
show_mouse_button_animation_ ::= SHOW_MOUSE_BUTTON_ANIMATION left_right BOOLEAN {pin=1}
show_movie_ ::= SHOW_MOVIE wmv_file_ INT INT INT INT END_SHOW_MOVIE {pin=1}
hide_ui_ ::= HIDE_UI {pin=1}
show_ui_ ::= SHOW_UI {pin=1}
disable_ui_ ::= DISABLE_UI ID BOOLEAN? {pin=1}
enable_ui_ ::= ENABLE_UI ID {pin=1}
disable_entire_ui_ ::= DISABLE_ENTIRE_UI {pin=1}
enable_entire_ui_ ::= ENABLE_ENTIRE_UI {pin=1}
set_cards_selectable_ ::= SET_CARDS_SELECTABLE BOOLEAN {pin=1}
disable_cursor_ ::= DISABLE_CURSOR {pin=1}
enable_cursor_ ::= ENABLE_CURSOR {pin=1}
rename_settlement_in_region_ ::= RENAME_SETTLEMENT_IN_REGION region_ref STRING {pin=1}
add_religion_ ::= ADD_RELIGION religion_ref region_ref INT {pin=1}
add_hidden_resource_ ::= ADD_HIDDEN_RESOURCE <<local_or region_ref>> resource_ref {pin=1}
remove_hidden_resource_ ::= REMOVE_HIDDEN_RESOURCE <<local_or region_ref>> resource_ref {pin=1}
destroy_building_ ::= DESTROY_BUILDING <<local_or settlement_ref>> building_level_ref {pin=1}
reveal_tile_ ::= REVEAL_TILE coords {pin=1}
hide_all_revealed_tiles_ ::= HIDE_ALL_REVEALED_TILE {pin=1}
play_video_ ::= PLAY_VIDEO wmv_file_ {pin=1}
advance_advice_thread_ ::= ADVANCE_ADVICE_THREAD ID 'no_dismiss'? {pin=1}
dismiss_advice_ ::= DISMISS_ADVICE {pin=1}
dismiss_advisor_ ::= DISMISS_ADVISOR {pin=1}
suspend_unscripted_advice_ ::= SUSPEND_UNSCRIPTED_ADVICE BOOLEAN {pin=1}
select_character_ ::= SELECT_CHARACTER name_ {pin=1}
e_select_character_ ::= E_SELECT_CHARACTE {pin=1}
select_settlement_ ::= SELECT_SETTLEMENT settlement_ref {pin=1}
e_select_settlement_ ::= E_SELECT_SETTLEMEN {pin=1}
call_object_shortcut_ ::= CALL_OBJECT_SHORTCUT ID ID? {pin=1}
simulate_mouse_click_ ::= SIMULATE_MOUSE_CLICK ('lclick_down'|'lclick_up'|'rclick_down'|'rclick_up'|'ldbl_click') {pin=1}
select_ui_element_ ::= SELECT_UI_ELEMENT ID {pin=1}
disable_shortcuts_ ::= DISABLE_SHORTCUTS ((ID COLON COLON ID)|ID)? BOOLEAN {pin=1}
filter_unit_commands_ ::= FILTER_UNIT_COMMANDS on_off ID? unit_command_type?{pin=1}
filter_unit_group_commands_ ::= FILTER_UNIT_GROUP_COMMANDS on_off ID? {pin=1}
filter_unit_selection_commands_ ::= FILTER_UNIT_SELECTION_COMMANDS on_off ID?{pin=1}
filter_settlement_commands_ ::= FILTER_SETTLEMENT_COMMANDS on_off settlement_ref {pin=1}
filter_character_commands_ ::= FILTER_CHARACTER_COMMANDS on_off name_ {pin=1}
filter_all_ui_commands_ ::= FILTER_ALL_UI_COMMANDS on_off {pin=1}
ui_indicator_ ::= UI_INDICATOR
  INT
  ('circle'|'new_arrow_down '|'arrow_down_left'|'arrow_down_right'|'arrow_up_left'|'arrow_up_right')
  (
    coords_no_comma|
    'track' coords_xyz_no_comma|
    'track_3d' coords_xyz_no_comma INT|
    'track_ground' coords_no_comma|
    'track_ground_3d' coords_no_comma INT|
    'track_unit' ID|
    'track_unit_3d' ID INT|
  )
  ('colour' INT INT INT)?
  ('scale' number)?
  ('period' number)?
  'loop'? {pin=1}
ui_indicator_remove_ ::= UI_INDICATOR_REMOVE INT {pin=1}
steal_esc_key_ ::= STEAL_ESC_KEY on_off? {pin=1}
highlight_recruitment_item_ ::= HIGHLIGHT_RECRUITMENT_ITEM unit_ref {pin=1}
highlight_construction_item_ ::= HIGHLIGHT_CONSTRUCTION_ITEM building_level_ref {pin=1}
show_annotations_ ::= SHOW_ANNOTATIONS TXT_FILE {pin=1}
e_select_unit_ ::= E_SELECT_UNIT {pin=1}
open_siege_scroll_ ::= OPEN_SIEGE_SCROLL {pin=1}
control_feral_anim_ ::= CONTROL_FERAL_ANIM ID ID 'reverse' {pin=1}
select_captial_ ::= SELECT_CAPTIAL {pin=1}
show_building_info_ ::= SHOW_BUILDING_INFO {pin=1}
show_unit_info_ ::= SHOW_UNIT_INFO {pin=1}
tactical_view_locked_ ::= TACTICAL_VIEW_LOCKED BOOLEAN {pin=1} // undocumented
console_command_ ::= CONSOLE_COMMAND c_command_ {pin=1}

c_command_ ::= change_character_faction_|disable_ai_|surrender_regions_|run_ai_|add_income_|add_expenditure_|give_ancillary_|control_|give_everything_|invulnerable_general_|set_fow_|become_protector_|force_battle_victory_|toggle_fow_|quit_game_|kill_character_|give_trait_|process_cq_|add_population_|capture_settlement_|add_money_|diplomatic_stance_|give_trait_c|date_|season_|create_building_|create_unit_|destroy_unit_
kill_character_ ::= KILL_CHARACTER <<local_or STRING>> {pin=1}
give_trait_ ::= GIVE_TRAIT <<local_or STRING>> trait_ref INT {pin=1}
give_ancillary_ ::= GIVE_ANCILLARY STRING ancillary_ref
process_cq_ ::= PROCESS_CQ <<local_or settlement_ref>> {pin=1}
add_population_ ::= ADD_POPULATION <<local_or settlement_ref>> COMMA? INT {pin=1}
capture_settlement_ ::= CAPTURE_SETTLEMENT <<local_or settlement_ref>> faction_ref{pin=1}
add_money_ ::= ADD_MONEY faction_ref? COMMA? INT {pin=1}
diplomatic_stance_ ::= DIPLOMATIC_STANCE faction_ref faction_ref diplomatic_stance_for_command {pin=1}
give_trait_c ::= give_trait_
date_ ::= DATE INT {pin=1}
season_ ::= SEASON season_enum {pin=1}
create_building_ ::= CREATE_BUILDING <<local_or settlement_ref>> building_level_ref {pin=1}
create_unit_ ::= CREATE_UNIT (LOCAL_CHARACTER|STRING|LOCAL_SETTLEMENT|settlement_ref) str_unit_ref INT? INT? INT? INT?{pin=1}
destroy_unit_ ::= DESTROY_UNIT (LOCAL_CHARACTER|STRING|LOCAL_SETTLEMENT|settlement_ref) str_unit_ref INT? {pin=1}
quit_game_ ::= SUDO? QUIT_GAME {pin=2}
toggle_fow_ ::= TOGGLE_FOW
set_fow_ ::= SET_FOW on_off
force_battle_victory_ ::= SUDO? FORCE_BATTLE_VICTORY
become_protector_ ::= BECOME_PROTECTOR faction_ref faction_ref
invulnerable_general_ ::= INVULNERABLE_GENERAL STRING
give_everything_ ::= GIVE_EVERYTHING faction_ref faction_ref
change_character_faction_ ::= CHANGE_CHARACTER_FACTION (LOCAL_CHARACTER|name_) (LOCAL_FACTION|faction_ref)
add_income_ ::= ADD_INCOME (LOCAL_FACTION|faction_ref|LOCAL_SETTLEMENT|settlement_ref) ID INT
add_expenditure_ ::= ADD_EXPENDITURE (LOCAL_FACTION|faction_ref|LOCAL_SETTLEMENT|settlement_ref) ID INT
control_ ::= CONTROL faction_ref
disable_ai_ ::= DISABLE_AI
surrender_regions_ ::= SURRENDER_REGIONS faction_ref faction_ref
run_ai_ ::= RUN_AI
private diplomatic_stance_for_command ::= ALLIED|NEUTRAL|WAR


// #### Commands params ####
settlement_order_type ::= 'garrison'|'law'|'fun'|'influence'|'tax_bonus'|'triumph'|'wonder'|'boom'|'squalour'|'distance_to_capital'|'culture_penalty'|'no_governance'|'tax_penalty'|'turmoil'|'underpopulation'|'besieged'|'blockaded'|'recession'|'entertained'|'health'|'governor_religion_unrest'|'leader_religion_unrest'
field_construction_item::='watchtower'|
senate_reward ::= ID //TODO:DO ME
unit_command_type ::= MOVE|RUN|'move_rot'|'change_formation'
on_off ::= (ON|OFF)
run_walk ::= (RUN|WALK)
ui_card_type ::= (UNIT|CHARACTER|BUILDING|CONSTRUCTION|RECRUITMENT|MERCENARIES|FIELD_CONSTRUCTION)
agent_hub_targets ::= (AGENT_UCF|MISSION_UCF|'Named_Mission')
point_shape ::= (CIRCLE|SQUARE|ARROW)
accept_reject ::= (ACCEPT|REJECT)
yes_no ::= (YES|NO)
show_hide ::= (SHOW|HIDE)
settlement_tab ::=(UNITS|BUILDINGS|CHARACTERS_LC|PASSENGERS)
left_right ::= LEFT|RIGHT
front_back_left_right ::= FRONT|BACK|left_right
direction ::=(UP|DOWN|left_right|TOP_LEFT|TOP_RIGHT|BOT_LEFT|BOT_RIGHT)
morale::=(BERSERK|IMPETUOUS|HIGH|FIRM|SHAKEN|WAVERING|ROUTING)
camera_mode::=(TW|RTS|GENERAL|USER_PREF)

// #### Primitives ####
private number ::= INT|FLOAT

// #### Files ####
txt_file_ ::= TXT_FILE {methods=[setName getReference]}
tga_file_ ::= TGA_FILE|safe_id {methods=[setName getReference]}
cas_file_ ::= CAS_FILE {methods=[setName getReference]}
wmv_file_ ::= WMV_FILE {methods=[setName getReference]}
file_ ::= txt_file_|tga_file_|cas_file_|wmv_file_

// #### operators ####
private math_op ::= (PLUS|DASH|SLASH|STAR)
private equality_op ::= EQUALS|NOT_EQUALS
private comparison_op ::= equality_op|LARGER|LARGER_OR_EQUAL|SMALLER|SMALLER_OR_EQUAL|
private and_op ::= (AND|AMBERSANDS)
private or_op ::= (OR|PIPES)

// #### coordinates ####
coords ::= number COMMA number
coords_no_comma ::= number number
coords_with_xy ::= X INT COMMA Y INT
coords_xyz_no_comma ::= number number number
coords_xyz ::= number COMMA number COMMA number

// #### colors ####
color_ ::= 'blue'

// #### metas ####
private meta local_or ::= LOCAL|<<item>>
private meta local_character_or ::= LOCAL|<<item>>

private meta list ::= <<item>> (COMMA <<item>>)*
private meta optional_commas_list ::= <<item>> (COMMA? <<item>>)*